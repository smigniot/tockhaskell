<!DOCTYPE html><html lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><style>body {transition: opacity ease-in 0.2s; } 
body[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } 
</style><style>body {transition: opacity ease-in 0.2s; } 
body[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } 
</style>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <title>Tock UI</title>
        <script type="text/javascript">/* {{{ */
        var Replicant = (function() {
        function _(tag,attrs) {
            var result = document.createElement(tag);
            if(attrs) {
                Object.keys(attrs).forEach(function(attr) {
                    result.setAttribute(attr, attrs[attr]);
                });
            }
            return result;
        }
        var textplugin = {
            "addtools":function(file, toolbar) {
                if(file.content.match(/^data:text\//)) {
                    // GrepSed tool
                    toolbar.appendChild(_("a", {
                        "class": "tool grep",
                        "href": "#",
                        "onclick": "Replicant.grepsed(this);event.preventDefault();",
                    }));
                    console.log("TEXT:", file);
                }
            },
        };
        var imageplugin = {
            "addtools":function(file, toolbar) {
                if(file.content.match(/^data:image\//)) {
                    // Preview tool
                    toolbar.appendChild(_("a", {
                        "class": "tool preview",
                        "href": "#",
                        "onclick": "Replicant.imgv(this);event.preventDefault();",
                    }));
                    console.log("IMAGE:", file);
                }
            },
        };
        var umlplugin = {
            "addtools":function(file, toolbar) {
                var href = file.content;
                if(href.match(/^data:text\/html;base64,/)) {
                    var b64 = href.slice(href.indexOf(";base64,")+
                            ";base64,".length);
                    var html = atob(b64);
                    if(html.match(/__UML_Marker_Meditation__/)) {
                        // UML tool
                        toolbar.appendChild(_("a", {
                            "class": "tool inline",
                            "href": "#",
                            "onclick": "Replicant.importuml(this)"
                                +";event.preventDefault();",
                        }));
                        console.log("UML:", file);
                    }
                }
            },
        };
        return {
            "plugins": [textplugin,imageplugin,umlplugin],
            /* {{{ */"html":function() {
                return new XMLSerializer().serializeToString(document);
            }/* }}} */,
            /* {{{ */"uri":function() {
                return ("data:application/octet-stream,"+
                        encodeURIComponent(this.html()));
            }/* }}} */,
            /* {{{ */"download":function(title,uri) {
                var now = new Date();
                var m = "0"+(now.getMonth()+1);
                m = m.substring(m.length-2);
                var d = "0"+(now.getDate());
                d = d.substring(d.length-2);
                var stamp = now.getFullYear()+m+d;
                var a = _("a", {
                    "href": uri || this.uri(),
                    "download": title || (document.title+"_"+stamp+".html"),
                });
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }/* }}} */,
            /* {{{ */"dragover":function(event) {
                event.preventDefault();
            }/* }}} */,
            /* {{{ */"drop":function(event) {
                event.preventDefault();
                this.addfiles(event.dataTransfer.files);
            }/* }}} */,
            /* {{{ */"addfiles":function(files) {
                var self=this;
                [].forEach.call(files, function(file) {
                    var r = new FileReader();
                    r.onload = function(f) {
                        return function(e) {
                            self.addfile(f.name, e.target.result);
                        };
                    }(file);
                    r.readAsDataURL(file);
                });
            }/* }}} */,
            /* {{{ */"delete":function(node) {
                if(node) node.parentNode.removeChild(node);
            }/* }}} */,
            /* {{{ */"addfile":function(name,content,container) {
                var a = _("a", {
                    "class": "file",
                    "download": name,
                    "title": name,
                    "href": content,
                });
                a.appendChild(document.createTextNode(name));
                container = container || document.querySelector("nav.replicant");
                container.appendChild(a);
                var m = _("div", {
                    "class": "toolbar",
                });
                this.addtools({"name":name,"content":content},m);
                container.appendChild(m);
            }/* }}} */,
            /* {{{ */"imgv":function(element) {
                var a = element.parentNode.previousSibling;
                var href = a.getAttribute("href");
                var blank = _("div", { "style":
                    "position:fixed;top:0;left:0;bottom:0;right:0;",
                    "onclick":"Replicant.delete(this)",
                    });
                var b2 = _("div", { "style":
                    "position:relative;width:100%;height:100%" });
                var preview = _("img", { "style":
                    ("position:absolute;top:10vmin;max-height:80vh;"
                    +"left:10vmin;max-width:80vw;"
                    +"border:1px solid black;"),
                    "src":href,
                    });
                b2.appendChild(preview);
                blank.appendChild(b2);
                document.body.appendChild(blank);
            }/* }}} */,
            /* {{{ */"importuml":function(element) {
                var a = element.parentNode.previousSibling;
                var href = a.getAttribute("href");
                var b64 = href.slice(href.indexOf(";base64,")+
                        ";base64,".length);
                var html = atob(b64);
                var tmp = document.implementation.createHTMLDocument();
                tmp.documentElement.innerHTML = html;
                diagrams = tmp.querySelectorAll('uml-usecase-diagram,uml-sequence-diagram,uml-class-diagram,uml-activity-diagram');
                [].forEach.call(diagrams, function(d) {
                    if(d.parentNode) d.parentNode.removeChild(d);
                    document.body.appendChild(d);
                });
            }/* }}} */,
            /* {{{ */"grepsed":function(element) {
                var pre = this.preview(element);
                var div = _("div",{"style":(
                    "position:fixed;top:49px;right:49px;"
                    +"margin:0;z-index:1"
                    )});
                var input = _("input",{"type":"text"});
                var before = pre.textContent;
                input.onkeyup = function(event) {
                    if(event.keyCode == 13) {
                        input.blur();
                        input.focus();
                    }
                };
                input.onchange = function(event) {
                    var r = new RegExp(input.value);
                    var after = before.split(/[\r\n]+/).filter(function(line) {
                        return line.match(r);
                    }).join("\n");
                    pre.textContent = after;
                };
                div.appendChild(input);
                var button = _("button");
                button.appendChild(document.createTextNode("Save"));
                button.onclick=function(event) {
                    Replicant.addfile("Excerpt.txt", "data:text/plain;base64,"+btoa(pre.textContent));
                };
                div.appendChild(button);
                pre.parentNode.insertBefore(div,pre);
            }/* }}} */,
            /* {{{ */"preview":function(element) {
                var a = element.parentNode.previousSibling;
                var href = a.getAttribute("href");
                if(href.match(/^data:[^;]*;base64,/)) {
                    var b64 = href.slice(href.indexOf(";base64,")+
                            ";base64,".length);
                    var data = atob(b64);
                    var blank = _("div", { "style":
                        "position:fixed;top:0;left:0;bottom:0;right:0;",
                        "onclick":"if(event.target==this) Replicant.delete(this)",
                        });
                    var preview = _("pre", { "style":
                        ("position:fixed;top:48px;left:48px;"
                        +"bottom:48px;right:48px;margin:0;"
                        +"overflow-x:hidden;overflow-y:scroll;"
                        +"font-size:small;font-family:monospace;"
                        +"border:1px solid black;"),
                        });
                    blank.appendChild(preview);
                    document.body.appendChild(blank);
                    preview.textContent = data;
                    return preview;
                }
            }/* }}} */,
            /* {{{ */"addtools":function(file,toolbar) {
                // Delete tool
                toolbar.appendChild(_("a", {
                    "class": "tool delete",
                    "href": "#",
                    "onclick": ("Replicant.delete("
                        +"this.parentNode.previousSibling);"
                        +"Replicant.delete(this.parentNode);"
                        +"event.preventDefault();"),
                }));
                // Plugin tools
                this.plugins.forEach(function(plugin) {
                    try {
                        plugin.addtools(file,toolbar);
                    } catch(err) {
                        console.log("PLUGIN: Error", err);
                    }
                });
            }/* }}} */,
            /* {{{ */"bootstrap":function() {
                ["drop","dragover"].forEach(function(e) {
                    if(!document.body.getAttribute("on"+e)) {
                        document.body.setAttribute("on"+e,
                            "Replicant."+e+"(event)");
                    }
                });
                if(!document.querySelector("nav.replicant")) {
                    var n = _("nav",{"class":"replicant"});
                    var b = _("button",{
                        "class":"tool save",
                        'onclick':'Replicant.download()',
                    });
                    b.appendChild(document.createTextNode('Download'));
                    n.appendChild(b);

                    b = _("button",{
                        "class":"tool upload",
                        'onclick': 'this.firstChild.click()',
                    });
                    var i = _("input",{
                        "type":"file",
                        'onchange':'Replicant.addfiles(this.files)',
                    });
                    b.appendChild(i);
                    b.appendChild(document.createTextNode('Upload'));
                    n.appendChild(b);

                    b = _("button",{
                        "class":"tool uml",
                        'onclick': 'Replicant.uml(this)',
                    });
                    b.appendChild(document.createTextNode('UML'));
                    n.appendChild(b);

                    document.body.insertBefore(n,document.body.firstChild);
                }
            }/* }}} */,
            /* {{{ */"uml":function(button) {
                var container = button.parentNode;
                var existing = container.querySelector("uml-palette");
                if(existing) {
                    if(existing.focusedDiagram) {
                        existing.focusDiagram(null);
                    } else if(existing.style.display == "block") {
                        existing.style.display = "none";
                    } else {
                        existing.style.display = "block";
                    }
                } else {
                    container.insertBefore(
                            _("uml-palette"),
                            button.nextSibling);
                }
            }/* }}} */,
        };
        })();
        /* }}} */</script>
        <style type="text/css">/* {{{ */
            /* {{{ */html,body { 
                height: 100%; 
                margin: 0px;
                padding: 0px;
            }/* }}} */
            /* {{{ */nav.replicant {
                position: fixed;
                right:1px;
                top:1px;
                height: 100%;
            }/* }}} */
            /* {{{ */.tool {
                background-repeat: no-repeat;
                background-size: cover;
                width:48px;
                height:48px;
                border-radius: 5px;
                color:transparent;
                display:block;
            }/* }}} */
            /* {{{ */.toolbar {
                position:absolute;
                right:46px;
                margin-top:-48px;
                padding-right:4px;
                min-width: 192px;
                text-align:right;
            }
            a.file + div.toolbar {
                display:none;
            }
            a.file:hover + div.toolbar,
            a.file + div.toolbar:hover {
                display:block;
            }/* }}} */
            /* {{{ */.delete,.preview,.grep,.inline {
                display:inline-block;
            }/* }}} */
            /* {{{ */.grep { 
               background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIHZpZXdCb3g9IjAgMCA4IDgiPjxwYXRoIGQ9Ik0wIDB2MWg3di0xaC03em0wIDJ2MWg1di0xaC01em0wIDJ2MWg4di0xaC04em0wIDJ2MWgxdi0xaC0xem0yIDB2MWgxdi0xaC0xem0yIDB2MWgxdi0xaC0xeiIgLz48L3N2Zz4=');
            }/* }}} */
            /* {{{ */.save { 
                background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJzdmctaWNvbiIgdmlld0JveD0iMCAwIDIwIDIwIj4NCjxwYXRoIGQ9Ik0xNy41OTIsOC45MzZsLTYuNTMxLTYuNTM0Yy0wLjU5My0wLjYzMS0wLjc1MS0wLjI0NS0wLjc1MSwwLjA1NmwwLjAwMiwyLjk5OUw1LjQyNyw5LjA3NUgyLjQ5MWMtMC44MzksMC0wLjE2MiwwLjkwMS0wLjMxMSwwLjc1MmwzLjY4MywzLjY3OGwtMy4wODEsMy4xMDhjLTAuMTcsMC4xNzEtMC4xNywwLjQ0OSwwLDAuNjJjMC4xNjksMC4xNywwLjQ0OCwwLjE3LDAuNjE4LDBsMy4wOTgtMy4wOTNsMy42NzUsMy42ODVjLTAuMDk5LTAuMDk5LDAuNzczLDAuNDc0LDAuNzczLTAuMjk2di0yLjk2NWwzLjYwMS00Ljg3MmwyLjczNC0wLjAwNUMxNy43Myw5LjY4OCwxOC4zMjYsOS42NjksMTcuNTkyLDguOTM2IE0zLjUzNCw5LjkwNGgxLjkwNmw0LjY1OSw0LjY2djEuOTA2TDMuNTM0LDkuOTA0eiBNMTAuNTIyLDEzLjcxN0w2LjI4Nyw5LjQ4bDQuMzI1LTMuMTI0bDMuMDg4LDMuMTI0TDEwLjUyMiwxMy43MTd6IE0xNC4zMzUsOC44NDVsLTMuMTc3LTMuMTc3VjMuNzYybDUuMDgzLDUuMDgzSDE0LjMzNXoiPjwvcGF0aD4NCjwvc3ZnPg0K');
            }/* }}} */
            /* {{{ */.uml { 
                background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJzdmctaWNvbiIgdmlld0JveD0iMCAwIDIwIDIwIj4NCgkJCQkJCQk8cGF0aCBkPSJNOC42MjcsNy44ODVDOC40OTksOC4zODgsNy44NzMsOC4xMDEsOC4xMyw4LjE3N0w0LjEyLDcuMTQzYy0wLjIxOC0wLjA1Ny0wLjM1MS0wLjI4LTAuMjkzLTAuNDk4YzAuMDU3LTAuMjE4LDAuMjc5LTAuMzUxLDAuNDk3LTAuMjk0bDQuMDExLDEuMDM3QzguNTUyLDcuNDQ0LDguNjg1LDcuNjY3LDguNjI3LDcuODg1IE04LjMzNCwxMC4xMjNMNC4zMjMsOS4wODZDNC4xMDUsOS4wMzEsMy44ODMsOS4xNjIsMy44MjYsOS4zOEMzLjc2OSw5LjU5OCwzLjkwMSw5LjgyLDQuMTIsOS44NzdsNC4wMSwxLjAzN2MtMC4yNjItMC4wNjIsMC4zNzMsMC4xOTIsMC40OTctMC4yOTRDOC42ODUsMTAuNDAxLDguNTUyLDEwLjE4LDguMzM0LDEwLjEyMyBNNy4xMzEsMTIuNTA3TDQuMzIzLDExLjc4Yy0wLjIxOC0wLjA1Ny0wLjQ0LDAuMDc2LTAuNDk3LDAuMjk1Yy0wLjA1NywwLjIxOCwwLjA3NSwwLjQzOSwwLjI5MywwLjQ5NWwyLjgwOSwwLjcyNmMtMC4yNjUtMC4wNjIsMC4zNywwLjE5MywwLjQ5NS0wLjI5M0M3LjQ4LDEyLjc4NCw3LjM1LDEyLjU2Miw3LjEzMSwxMi41MDdNMTguMTU5LDMuNjc3djEwLjcwMWMwLDAuMTg2LTAuMTI2LDAuMzQ4LTAuMzA2LDAuMzkzbC03Ljc1NSwxLjk0OGMtMC4wNywwLjAxNi0wLjEzNCwwLjAxNi0wLjIwNCwwbC03Ljc0OC0xLjk0OGMtMC4xNzktMC4wNDUtMC4zMDYtMC4yMDctMC4zMDYtMC4zOTNWMy42NzdjMC0wLjI2NywwLjI0OS0wLjQ2MSwwLjUwOS0wLjM5Nmw3LjY0NiwxLjkyMWw3LjY1NC0xLjkyMUMxNy45MSwzLjIxNiwxOC4xNTksMy40MSwxOC4xNTksMy42NzcgTTkuNTg5LDUuOTM5TDIuNjU2LDQuMjAzdjkuODU3bDYuOTMzLDEuNzM3VjUuOTM5eiBNMTcuMzQ0LDQuMjAzbC02LjkzOSwxLjczNnY5Ljg1OWw2LjkzOS0xLjczN1Y0LjIwM3ogTTE2LjE2OCw2LjY0NWMtMC4wNTgtMC4yMTgtMC4yNzktMC4zNTEtMC40OTgtMC4yOTRsLTQuMDExLDEuMDM3Yy0wLjIxOCwwLjA1Ny0wLjM1MSwwLjI4LTAuMjkzLDAuNDk4YzAuMTI4LDAuNTAzLDAuNzU1LDAuMjE2LDAuNDk4LDAuMjkybDQuMDA5LTEuMDM0QzE2LjA5Miw3LjA4NSwxNi4yMjUsNi44NjMsMTYuMTY4LDYuNjQ1IE0xNi4xNjgsOS4zOGMtMC4wNTgtMC4yMTgtMC4yNzktMC4zNDktMC40OTgtMC4yOTRsLTQuMDExLDEuMDM2Yy0wLjIxOCwwLjA1Ny0wLjM1MSwwLjI3OS0wLjI5MywwLjQ5OGMwLjEyNCwwLjQ4NiwwLjc1OSwwLjIzMiwwLjQ5OCwwLjI5NGw0LjAwOS0xLjAzN0MxNi4wOTIsOS44MiwxNi4yMjUsOS41OTgsMTYuMTY4LDkuMzggTTE0Ljk2MywxMi4zODVjLTAuMDU1LTAuMjE5LTAuMjc2LTAuMzUtMC40OTUtMC4yOTRsLTIuODA5LDAuNzI2Yy0wLjIxOCwwLjA1Ni0wLjM1MSwwLjI3OS0wLjI5MywwLjQ5NmMwLjEyNywwLjUwNiwwLjc1NSwwLjIxOCwwLjQ5OCwwLjI5M2wyLjgwNy0wLjcyM0MxNC44OSwxMi44MjUsMTUuMDIxLDEyLjYwMywxNC45NjMsMTIuMzg1Ij48L3BhdGg+DQoJCQkJCQk8L3N2Zz4NCg==');
            }/* }}} */
            /* {{{ */.preview { 
                background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIHZpZXdCb3g9IjAgMCA4IDgiPjxwYXRoIGQ9Ik00LjAzIDBjLTIuNTMgMC00LjAzIDMtNC4wMyAzczEuNSAzIDQuMDMgM2MyLjQ3IDAgMy45Ny0zIDMuOTctM3MtMS41LTMtMy45Ny0zem0tLjAzIDFjMS4xMSAwIDIgLjkgMiAyIDAgMS4xMS0uODkgMi0yIDItMS4xIDAtMi0uODktMi0yIDAtMS4xLjktMiAyLTJ6bTAgMWMtLjU1IDAtMSAuNDUtMSAxcy40NSAxIDEgMSAxLS40NSAxLTFjMC0uMS0uMDQtLjE5LS4wNi0uMjgtLjA4LjE2LS4yNC4yOC0uNDQuMjgtLjI4IDAtLjUtLjIyLS41LS41IDAtLjIuMTItLjM2LjI4LS40NC0uMDktLjAzLS4xOC0uMDYtLjI4LS4wNnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMSkiIC8+PC9zdmc+');
            }/* }}} */
            /* {{{ */.upload { 
                background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJzdmctaWNvbiIgdmlld0JveD0iMCAwIDIwIDIwIj4NCjxwYXRoIGQ9Ik00LjMxNywxNi40MTFjLTEuNDIzLTEuNDIzLTEuNDIzLTMuNzM3LDAtNS4xNmw4LjA3NS03Ljk4NGMwLjk5NC0wLjk5NiwyLjYxMy0wLjk5NiwzLjYxMSwwLjAwMUMxNyw0LjI2NCwxNyw1Ljg4NCwxNi4wMDQsNi44OGwtOC4wNzUsNy45ODRjLTAuNTY4LDAuNTY4LTEuNDkzLDAuNTY5LTIuMDYzLTAuMDAxYy0wLjU2OS0wLjU2OS0wLjU2OS0xLjQ5NSwwLTIuMDY0TDkuOTMsOC44MjhjMC4xNDUtMC4xNDEsMC4zNzYtMC4xMzksMC41MTcsMC4wMDVjMC4xNDEsMC4xNDQsMC4xMzksMC4zNzUtMC4wMDYsMC41MTZsLTQuMDYyLDMuOTY4Yy0wLjI4MiwwLjI4Mi0wLjI4MiwwLjc0NSwwLjAwMywxLjAzYzAuMjg1LDAuMjg0LDAuNzQ3LDAuMjg0LDEuMDMyLDBsOC4wNzQtNy45ODVjMC43MTEtMC43MSwwLjcxMS0xLjg2OC0wLjAwMi0yLjU3OWMtMC43MTEtMC43MTItMS44NjctMC43MTItMi41OCwwbC04LjA3NCw3Ljk4NGMtMS4xMzcsMS4xMzctMS4xMzcsMi45ODgsMC4wMDEsNC4xMjdjMS4xNCwxLjE0LDIuOTg5LDEuMTQsNC4xMjksMGw2Ljk4OS02Ljg5NmMwLjE0My0wLjE0MiwwLjM3NS0wLjE0LDAuNTE2LDAuMDAzYzAuMTQzLDAuMTQzLDAuMTQxLDAuMzc0LTAuMDAyLDAuNTE2bC02Ljk4OCw2Ljg5NUM4LjA1NCwxNy44MzYsNS43NDMsMTcuODM2LDQuMzE3LDE2LjQxMSI+PC9wYXRoPg0KPC9zdmc+DQo=');
            }/* }}} */
            /* {{{ */.inline { 
                background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGRhdGEtbmFtZT0icGFnZSIgd2lkdGg9IjQ4cHgiIGhlaWdodD0iNDhweCIgY2xhc3M9InN2Zy1pY29uIiB2aWV3Qm94PSIwIDAgMjAgMjAiPg0KPHBhdGggZD0iTTE1LjM5NiwyLjI5Mkg0LjYwNGMtMC4yMTIsMC0wLjM4NSwwLjE3NC0wLjM4NSwwLjM4NnYxNC42NDZjMCwwLjIxMiwwLjE3MywwLjM4NSwwLjM4NSwwLjM4NWgxMC43OTJjMC4yMTEsMCwwLjM4NS0wLjE3MywwLjM4NS0wLjM4NVYyLjY3N0MxNS43ODEsMi40NjUsMTUuNjA3LDIuMjkyLDE1LjM5NiwyLjI5MiBNMTUuMDEsMTYuOTM4SDQuOTl2LTIuNjk4aDEuNjA5YzAuMTU2LDAuNDQ5LDAuNTg2LDAuNzcxLDEuMDg5LDAuNzcxYzAuNjM4LDAsMS4xNTYtMC41MTksMS4xNTYtMS4xNTZzLTAuNTE5LTEuMTU2LTEuMTU2LTEuMTU2Yy0wLjUwMywwLTAuOTMzLDAuMzIxLTEuMDg5LDAuNzcxSDQuOTl2LTMuMDgzaDEuNjA5YzAuMTU2LDAuNDQ5LDAuNTg2LDAuNzcxLDEuMDg5LDAuNzcxYzAuNjM4LDAsMS4xNTYtMC41MTgsMS4xNTYtMS4xNTZjMC0wLjYzOC0wLjUxOS0xLjE1Ni0xLjE1Ni0xLjE1NmMtMC41MDMsMC0wLjkzMywwLjMyMi0xLjA4OSwwLjc3MUg0Ljk5VjYuNTMxaDEuNjA5QzYuNzU1LDYuOTgsNy4xODUsNy4zMDIsNy42ODgsNy4zMDJjMC42MzgsMCwxLjE1Ni0wLjUxOSwxLjE1Ni0xLjE1NmMwLTAuNjM4LTAuNTE5LTEuMTU2LTEuMTU2LTEuMTU2Yy0wLjUwMywwLTAuOTMzLDAuMzIyLTEuMDg5LDAuNzcxSDQuOTlWMy4wNjJoMTAuMDJWMTYuOTM4eiBNNy4zMDIsMTMuODU0YzAtMC4yMTIsMC4xNzMtMC4zODYsMC4zODUtMC4zODZzMC4zODUsMC4xNzQsMC4zODUsMC4zODZzLTAuMTczLDAuMzg1LTAuMzg1LDAuMzg1UzcuMzAyLDE0LjA2Niw3LjMwMiwxMy44NTQgTTcuMzAyLDEwYzAtMC4yMTIsMC4xNzMtMC4zODUsMC4zODUtMC4zODVTOC4wNzMsOS43ODgsOC4wNzMsMTBzLTAuMTczLDAuMzg1LTAuMzg1LDAuMzg1UzcuMzAyLDEwLjIxMiw3LjMwMiwxMCBNNy4zMDIsNi4xNDZjMC0wLjIxMiwwLjE3My0wLjM4NiwwLjM4NS0wLjM4NnMwLjM4NSwwLjE3NCwwLjM4NSwwLjM4NlM3Ljg5OSw2LjUzMSw3LjY4OCw2LjUzMVM3LjMwMiw2LjM1OCw3LjMwMiw2LjE0NiI+PC9wYXRoPg0KPC9zdmc+DQo=');
            }/* }}} */
            /* {{{ */.uml-usecase-diagram,
                     .uml-usecase { 
                background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIAogICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICAgd2lkdGg9IjQ4cHgiIGhlaWdodD0iNDhweCI+CjxlbGxpcHNlIGN4PSIxNyIgY3k9IjIwIiByeD0iMTYiIHJ5PSIxMCIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJ5ZWxsb3ciIC8+Cjwvc3ZnPgo=');
                background-position: 7px 4px;
            }/* }}} */
            /* {{{ */.uml-sequence-diagram,
                    .uml-lifelane { 
                background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIAogICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICAgd2lkdGg9IjFweCIgaGVpZ2h0PSI2NHB4IgoJIHZpZXdCb3g9IjAgMCAxIDY0Ij4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC41IDAuNSkiPgo8bGluZSB4MT0iMCIgeTE9IjAiIHgyPSIwIiB5Mj0iNjMiIHN0cm9rZT0iYmxhY2siIAogICAgc3Ryb2tlLWRhc2hhcnJheT0iNCw0IiAvPgo8L2c+Cjwvc3ZnPgo=');
                background-repeat: repeat-y;
                background-size: auto;
                background-position: 21px 0px;
            }/* }}} */
            /* {{{ */.uml-class-diagram, .uml-class { 
                background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjQ4cHgiIGhlaWdodD0iNDhweCI+CjxyZWN0IHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0iI0ZGRkZFMCIgeD0iMC41IiB5PSIyLjUiIHdpZHRoPSIzMCIgaGVpZ2h0PSIzNiIvPgo8bGluZSBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEiIHgxPSIwLjUiIHkxPSI3LjUiIHgyPSIzMC41IiB5Mj0iNy41IiAvPgo8L3N2Zz4K');
                background-position: 8px 3px;
            }/* }}} */
            /* {{{ */
            uml-state[type="start"]::before {
                content: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iNi40NTA3OTM3bW0iCiAgIGhlaWdodD0iNi40NTA3OTM3bW0iCiAgIHZpZXdCb3g9IjAgMCAyMi44NTcxNDMgMjIuODU3MTQzIgogICBpZD0ic3ZnMiIKICAgdmVyc2lvbj0iMS4xIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkxIHIxMzcyNSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ic3RhcnQuc3ZnIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNS42IgogICAgIGlua3NjYXBlOmN4PSI0LjQ1NjMxNzMiCiAgICAgaW5rc2NhcGU6Y3k9Ii00LjcwMDYzMSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE2MDAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODM4IgogICAgIGlua3NjYXBlOndpbmRvdy14PSItOCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iLTgiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBmaXQtbWFyZ2luLXRvcD0iMCIKICAgICBmaXQtbWFyZ2luLWxlZnQ9IjAiCiAgICAgZml0LW1hcmdpbi1yaWdodD0iMCIKICAgICBmaXQtbWFyZ2luLWJvdHRvbT0iMCIgLz4KICA8bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGE3Ij4KICAgIDxyZGY6UkRGPgogICAgICA8Y2M6V29yawogICAgICAgICByZGY6YWJvdXQ9IiI+CiAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICAgICAgPGRjOnR5cGUKICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPgogICAgICAgIDxkYzp0aXRsZT48L2RjOnRpdGxlPgogICAgICA8L2NjOldvcms+CiAgICA8L3JkZjpSREY+CiAgPC9tZXRhZGF0YT4KICA8ZwogICAgIGlua3NjYXBlOmxhYmVsPSJDYWxxdWUgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiCiAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTExNS43MjAzMSwtODcuOTI4MTE4KSI+CiAgICA8Y2lyY2xlCiAgICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MC43NzE4OTgwMztzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InBhdGg0MTM2LTIiCiAgICAgICBjeD0iMTI3LjE0ODg4IgogICAgICAgY3k9Ijk5LjM1NjY4OSIKICAgICAgIHI9IjExLjA0MjYyMyIgLz4KICA8L2c+Cjwvc3ZnPgo=');
                display:block;
            }
            uml-state[type="stop"]::before {
                content: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iNi40NTA3OTM3bW0iCiAgIGhlaWdodD0iNi40NTA3OTM3bW0iCiAgIHZpZXdCb3g9IjAgMCAyMi44NTcxNDMgMjIuODU3MTQzIgogICBpZD0ic3ZnMiIKICAgdmVyc2lvbj0iMS4xIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkxIHIxMzcyNSIKICAgc29kaXBvZGk6ZG9jbmFtZT0ic3RvcC5zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0IiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI1LjYiCiAgICAgaW5rc2NhcGU6Y3g9IjQuNDU2MzE3MyIKICAgICBpbmtzY2FwZTpjeT0iLTQuNzAwNjMxIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTYwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4MzgiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9Ii04IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItOCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGZpdC1tYXJnaW4tdG9wPSIwIgogICAgIGZpdC1tYXJnaW4tbGVmdD0iMCIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSIwIgogICAgIGZpdC1tYXJnaW4tYm90dG9tPSIwIiAvPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgICAgPGRjOnRpdGxlPjwvZGM6dGl0bGU+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkNhbHF1ZSAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSIKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTE1LjcyMDMxLC04Ny45MjgxMTgpIj4KICAgIDxjaXJjbGUKICAgICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjc3MTg5ODAzO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icGF0aDQxMzYtMiIKICAgICAgIGN4PSIxMjcuMTQ4ODgiCiAgICAgICBjeT0iOTkuMzU2Njg5IgogICAgICAgcj0iMTEuMDQyNjIzIiAvPgogICAgPGNpcmNsZQogICAgICAgc3R5bGU9Im9wYWNpdHk6MTtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjAuNTY2ODYyNTg7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJwYXRoNDEzNiIKICAgICAgIGN4PSIxMjcuMTYyNjQiCiAgICAgICBjeT0iOTkuNTg0NTc5IgogICAgICAgcj0iOC4xMDk0MjY1IiAvPgogIDwvZz4KPC9zdmc+Cg==');
                display:block;
            }
            uml-state,uml-activity {
                text-align:center;
            }

            .uml-state {
                background-size: cover;
                background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iMjRtbSIKICAgaGVpZ2h0PSIyNG1tIgogICB2aWV3Qm94PSIwIDAgODUuMDM5MzcgODUuMDM5MzciCiAgIGlkPSJzdmcyIgogICB2ZXJzaW9uPSIxLjEiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJzdGF0ZS5zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0IiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI1LjYiCiAgICAgaW5rc2NhcGU6Y3g9IjM0LjgxMzQ2NSIKICAgICBpbmtzY2FwZTpjeT0iMjkuOTQyMjQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTYwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4MzgiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9Ii04IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItOCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGZpdC1tYXJnaW4tdG9wPSIwIgogICAgIGZpdC1tYXJnaW4tbGVmdD0iMCIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSIwIgogICAgIGZpdC1tYXJnaW4tYm90dG9tPSIwIiAvPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgICAgPGRjOnRpdGxlIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkNhbHF1ZSAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSIKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtODUuMzYzMTYxLC02MC4zODg3NjYpIj4KICAgIDxjaXJjbGUKICAgICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjc3MTg5ODAzO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icGF0aDQxMzYtMiIKICAgICAgIGN4PSIxMjcuMTQ4ODgiCiAgICAgICBjeT0iOTkuMzU2Njg5IgogICAgICAgcj0iMTEuMDQyNjIzIiAvPgogICAgPGNpcmNsZQogICAgICAgc3R5bGU9Im9wYWNpdHk6MTtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjAuNTY2ODYyNTg7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJwYXRoNDEzNiIKICAgICAgIGN4PSIxMjcuMTYyNjQiCiAgICAgICBjeT0iOTkuNTg0NTc5IgogICAgICAgcj0iOC4xMDk0MjY1IiAvPgogIDwvZz4KPC9zdmc+Cg==');
            }
            .uml-activity {
                background-size: cover;
                background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iMjRtbSIKICAgaGVpZ2h0PSIyNG1tIgogICB2aWV3Qm94PSIwIDAgODUuMDM5MzcgODUuMDM5MzciCiAgIGlkPSJzdmcyIgogICB2ZXJzaW9uPSIxLjEiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJhY3Rpdml0eS5zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0IiAvPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI1LjYiCiAgICAgaW5rc2NhcGU6Y3g9IjM0LjgxMzQ2NSIKICAgICBpbmtzY2FwZTpjeT0iMjkuOTQyMjQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTYwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4MzgiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9Ii04IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItOCIKICAgICBpbmtzY2FwZTp3aW5kb3ctbWF4aW1pemVkPSIxIgogICAgIGZpdC1tYXJnaW4tdG9wPSIwIgogICAgIGZpdC1tYXJnaW4tbGVmdD0iMCIKICAgICBmaXQtbWFyZ2luLXJpZ2h0PSIwIgogICAgIGZpdC1tYXJnaW4tYm90dG9tPSIwIiAvPgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgICAgPGRjOnRpdGxlIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkNhbHF1ZSAxIgogICAgIGlua3NjYXBlOmdyb3VwbW9kZT0ibGF5ZXIiCiAgICAgaWQ9ImxheWVyMSIKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtODUuMzYzMTYxLC02MC4zODg3NjYpIj4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZjZjY5MTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MC42MjIyOTU3NDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0NDEzOCIKICAgICAgIHdpZHRoPSI3MS4yODUyNCIKICAgICAgIGhlaWdodD0iMjYuMDA5Njc4IgogICAgICAgeD0iOTEuMzg4NTk2IgogICAgICAgeT0iODkuMjg1ODgxIgogICAgICAgcnk9IjkuNzgzNTg5NCIgLz4KICA8L2c+Cjwvc3ZnPgo=');
            }

            uml-activity[type="condition"]::before {
                content: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTEuMzAyMzA1bW0iCiAgIGhlaWdodD0iNS42Mzg0ODY5bW0iCiAgIHZpZXdCb3g9IjAgMCA0MC4wNDc1MzggMTkuOTc4ODkiCiAgIHZlcnNpb249IjEuMSI+CiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwMS4yMDIxNiwtOTAuNzk0NTUpIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDojZmNmNjkxO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjU1NDY0MDQ3cHg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gMTAxLjg0MDUzLDEwMC40NDQxMyAyMC4xNjYyOSwxMC4wMTY1NSAxOC42Mzg1NCwtMTAuMjA5MTggLTE4Ljg0MjI0LC05LjE0OTczMiB6IgogICAgICAgaWQ9InBhdGg1Mjg0IiAvPgogIDwvZz4KPC9zdmc+Cg==');
                display:block;
            }

            .uml-condition {
                background-size: cover;
                background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iMjRtbSIKICAgaGVpZ2h0PSIyNG1tIgogICB2aWV3Qm94PSIwIDAgODUuMDM5MzcgODUuMDM5MzciCiAgIGlkPSJzdmcyIgogICB2ZXJzaW9uPSIxLjEiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJjb25kaXRpb24uc3ZnIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNS42IgogICAgIGlua3NjYXBlOmN4PSIzNC44MTM0NjUiCiAgICAgaW5rc2NhcGU6Y3k9IjI5Ljk0MjI0NCIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE2MDAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODM4IgogICAgIGlua3NjYXBlOndpbmRvdy14PSItOCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iLTgiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBmaXQtbWFyZ2luLXRvcD0iMCIKICAgICBmaXQtbWFyZ2luLWxlZnQ9IjAiCiAgICAgZml0LW1hcmdpbi1yaWdodD0iMCIKICAgICBmaXQtbWFyZ2luLWJvdHRvbT0iMCIgLz4KICA8bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGE3Ij4KICAgIDxyZGY6UkRGPgogICAgICA8Y2M6V29yawogICAgICAgICByZGY6YWJvdXQ9IiI+CiAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICAgICAgPGRjOnR5cGUKICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPgogICAgICAgIDxkYzp0aXRsZT48L2RjOnRpdGxlPgogICAgICA8L2NjOldvcms+CiAgICA8L3JkZjpSREY+CiAgPC9tZXRhZGF0YT4KICA8ZwogICAgIGlua3NjYXBlOmxhYmVsPSJDYWxxdWUgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiCiAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg1LjM2MzE2MSwtNjAuMzg4NzY2KSI+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6I2ZjZjY5MTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MXB4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDkyLjUwNjAxOSwxMDIuNTcwOTkgMzUuMzU3MTQxLDE4LjU3MTQzIDMyLjY3ODU3LC0xOC45Mjg1NyAtMzMuMDM1NzEsLTE2Ljk2NDI4MSB6IgogICAgICAgaWQ9InBhdGg1Mjg0IgogICAgICAgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgLz4KICA8L2c+Cjwvc3ZnPgo=');
            }
            .uml-activity-diagram { 
                background-size: cover;
                background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiCiAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIgogICB3aWR0aD0iMjRtbSIKICAgaGVpZ2h0PSIyNG1tIgogICB2aWV3Qm94PSIwIDAgODUuMDM5MzcgODUuMDM5MzciCiAgIGlkPSJzdmcyIgogICB2ZXJzaW9uPSIxLjEiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJhY3Rpdml0eWRpYWdyYW0uc3ZnIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCIgLz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNS42IgogICAgIGlua3NjYXBlOmN4PSI3NS45NzQxNzkiCiAgICAgaW5rc2NhcGU6Y3k9IjI5Ljk0MjI0NCIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjE2MDAiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODM4IgogICAgIGlua3NjYXBlOndpbmRvdy14PSItOCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iLTgiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBmaXQtbWFyZ2luLXRvcD0iMCIKICAgICBmaXQtbWFyZ2luLWxlZnQ9IjAiCiAgICAgZml0LW1hcmdpbi1yaWdodD0iMCIKICAgICBmaXQtbWFyZ2luLWJvdHRvbT0iMCIgLz4KICA8bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGE3Ij4KICAgIDxyZGY6UkRGPgogICAgICA8Y2M6V29yawogICAgICAgICByZGY6YWJvdXQ9IiI+CiAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+CiAgICAgICAgPGRjOnR5cGUKICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPgogICAgICAgIDxkYzp0aXRsZT48L2RjOnRpdGxlPgogICAgICA8L2NjOldvcms+CiAgICA8L3JkZjpSREY+CiAgPC9tZXRhZGF0YT4KICA8ZwogICAgIGlua3NjYXBlOmxhYmVsPSJDYWxxdWUgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiCiAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg1LjM2MzE2MSwtNjAuMzg4NzY2KSI+CiAgICA8Y2lyY2xlCiAgICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MC42MzkyMjgwNTtzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InBhdGg0MTM2IgogICAgICAgY3g9IjEyOC4wNTU1IgogICAgICAgY3k9Ijc2LjkwNjAxMyIKICAgICAgIHI9IjkuMTQ0NjcyNCIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZjZjY5MTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MC42MjIyOTU3NDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0NDEzOCIKICAgICAgIHdpZHRoPSI3MS4yODUyNCIKICAgICAgIGhlaWdodD0iMjYuMDA5Njc4IgogICAgICAgeD0iOTEuNzQ1NzM1IgogICAgICAgeT0iMTEwLjAwMDE3IgogICAgICAgcnk9IjkuNzgzNTg5NCIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxcHg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gMTI4LjI5OTg5LDg1LjYzMDQ0OSAwLDI0LjI0MzY2MSAtNS4yMjkzMywtOS44MDU2NiAxMC40NTg2NiwtMC4xMTcyOTMgLTUuMTEyMDQsOS44MDU2NjMiCiAgICAgICBpZD0icGF0aDQxNDAiCiAgICAgICBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo=');
            }/* }}} */

            /* {{{ */.uml-actor { 
                background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIAogICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICAgd2lkdGg9IjI0cHgiIGhlaWdodD0iNDJweCIKCSB2aWV3Qm94PSIwIDAgMTcgMzAiPgo8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4IDYpIj4KPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjUiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0id2hpdGUiIC8+CjxsaW5lIHgxPSIwIiB5MT0iNSIgeDI9IjAiIHkyPSIxNSIgc3Ryb2tlPSJibGFjayIgLz4KPGxpbmUgeDE9Ii04IiB5MT0iOCIgeDI9IjgiIHkyPSI4IiBzdHJva2U9ImJsYWNrIiAvPgo8cGF0aCBkPSJNIC03IDIyIEwgMCAxNSBMIDcgMjIiIHN0cm9rZT0iYmxhY2siIGZpbGw9Im5vbmUiIC8+CjwvZz4KPC9zdmc+Cg==');
                background-size: auto;
                background-position: 10px 1px;
            }
            .uml-floating-menu {
                display:inline-block;
                position:absolute;
                font-family: Verdana,arial,sans-serif;
                font-size: 8pt;
                border:1px solid silver;
            }
            .uml-menu-item {
                display:block;
                background-color: #fafafa;
                cursor: default;
            }
            .uml-menu-item:hover {
                background-color: maroon;
                color: white;
            }
            .upload input {
                display:none;
            }/* }}} */
            /* {{{ */a.file {
                z-index: 255;
                background-repeat: no-repeat;
                background-position: 8px 8px;
                background-size: 30px 30px;
                width:44px;
                height:45px;
                margin-left:1px;
                margin-top:1px;
                box-shadow: 1px 1px silver;
                border-radius: 5px;
                border: 1px solid gray;
                display:block;
                font-size:xx-small;
                word-wrap:break-word;
                vertical-align: text-bottom;
                overflow:hidden;
                background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIHZpZXdCb3g9IjAgMCA4IDgiPjxwYXRoIGQ9Ik0wIDB2OGg3di00aC00di00aC0zem00IDB2M2gzbC0zLTN6IiBmaWxsPSJyZ2JhKDAsMCwwLDAuMikiIC8+PC9zdmc+');
            }
            a.file:hover {
                background: #D0D0D0;
            }/* }}} */
            /* {{{ */.delete { 
                background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIHZpZXdCb3g9IjAgMCA4IDgiPjxwYXRoIGQ9Ik0yIDBsLTIgMyAyIDNoNnYtNmgtNnptMS41Ljc4bDEuNSAxLjUgMS41LTEuNS43Mi43Mi0xLjUgMS41IDEuNSAxLjUtLjcyLjcyLTEuNS0xLjUtMS41IDEuNS0uNzItLjczIDEuNS0xLjUtMS41LTEuNS43Mi0uNzJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4IDEpIHNjYWxlKC0xLDEpIiAvPjwvc3ZnPg==');
            }/* }}} */
        /* }}} */</style>
        <!-- {{{ Web Components -->
        <script type="text/javascript" src="data:application/x-javascript;base64,LyoqCiAqIEBsaWNlbnNlCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQKICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0CiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvCiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0CiAqLwovLyBAdmVyc2lvbiAwLjcuMTIKd2luZG93LldlYkNvbXBvbmVudHM9d2luZG93LldlYkNvbXBvbmVudHN8fHt9LGZ1bmN0aW9uKGUpe3ZhciB0PWUuZmxhZ3N8fHt9LG49IndlYmNvbXBvbmVudHMtbGl0ZS5qcyIscj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzY3JpcHRbc3JjKj0iJytuKyciXScpO2lmKCF0Lm5vT3B0cyl7aWYobG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbixyPWUuc3BsaXQoIj0iKTtyWzBdJiYobj1yWzBdLm1hdGNoKC93Yy0oLispLykpJiYodFtuWzFdXT1yWzFdfHwhMCl9KSxyKWZvcih2YXIgbyxpPTA7bz1yLmF0dHJpYnV0ZXNbaV07aSsrKSJzcmMiIT09by5uYW1lJiYodFtvLm5hbWVdPW8udmFsdWV8fCEwKTtpZih0LmxvZyl7dmFyIGE9dC5sb2cuc3BsaXQoIiwiKTt0LmxvZz17fSxhLmZvckVhY2goZnVuY3Rpb24oZSl7dC5sb2dbZV09ITB9KX1lbHNlIHQubG9nPXt9fXQuc2hhZG93PXQuc2hhZG93fHx0LnNoYWRvd2RvbXx8dC5wb2x5ZmlsbCx0LnNoYWRvdz0ibmF0aXZlIj09PXQuc2hhZG93PyExOnQuc2hhZG93fHwhSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsdC5yZWdpc3RlciYmKHdpbmRvdy5DdXN0b21FbGVtZW50cz13aW5kb3cuQ3VzdG9tRWxlbWVudHN8fHtmbGFnczp7fX0sd2luZG93LkN1c3RvbUVsZW1lbnRzLmZsYWdzLnJlZ2lzdGVyPXQucmVnaXN0ZXIpLGUuZmxhZ3M9dH0od2luZG93LldlYkNvbXBvbmVudHMpLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUpe3JldHVybiB2b2lkIDAhPT1oW2VdfWZ1bmN0aW9uIG4oKXtzLmNhbGwodGhpcyksdGhpcy5faXNJbnZhbGlkPSEwfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIiI9PWUmJm4uY2FsbCh0aGlzKSxlLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gbyhlKXt2YXIgdD1lLmNoYXJDb2RlQXQoMCk7cmV0dXJuIHQ+MzImJjEyNz50JiYtMT09WzM0LDM1LDYwLDYyLDYzLDk2XS5pbmRleE9mKHQpP2U6ZW5jb2RlVVJJQ29tcG9uZW50KGUpfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5jaGFyQ29kZUF0KDApO3JldHVybiB0PjMyJiYxMjc+dCYmLTE9PVszNCwzNSw2MCw2Miw5Nl0uaW5kZXhPZih0KT9lOmVuY29kZVVSSUNvbXBvbmVudChlKX1mdW5jdGlvbiBhKGUsYSxzKXtmdW5jdGlvbiBjKGUpe2cucHVzaChlKX12YXIgZD1hfHwic2NoZW1lIHN0YXJ0Iix1PTAsbD0iIixfPSExLHc9ITEsZz1bXTtlOmZvcig7KGVbdS0xXSE9Znx8MD09dSkmJiF0aGlzLl9pc0ludmFsaWQ7KXt2YXIgYj1lW3VdO3N3aXRjaChkKXtjYXNlInNjaGVtZSBzdGFydCI6aWYoIWJ8fCFtLnRlc3QoYikpe2lmKGEpe2MoIkludmFsaWQgc2NoZW1lLiIpO2JyZWFrIGV9bD0iIixkPSJubyBzY2hlbWUiO2NvbnRpbnVlfWwrPWIudG9Mb3dlckNhc2UoKSxkPSJzY2hlbWUiO2JyZWFrO2Nhc2Uic2NoZW1lIjppZihiJiZ2LnRlc3QoYikpbCs9Yi50b0xvd2VyQ2FzZSgpO2Vsc2V7aWYoIjoiIT1iKXtpZihhKXtpZihmPT1iKWJyZWFrIGU7YygiQ29kZSBwb2ludCBub3QgYWxsb3dlZCBpbiBzY2hlbWU6ICIrYik7YnJlYWsgZX1sPSIiLHU9MCxkPSJubyBzY2hlbWUiO2NvbnRpbnVlfWlmKHRoaXMuX3NjaGVtZT1sLGw9IiIsYSlicmVhayBlO3QodGhpcy5fc2NoZW1lKSYmKHRoaXMuX2lzUmVsYXRpdmU9ITApLGQ9ImZpbGUiPT10aGlzLl9zY2hlbWU/InJlbGF0aXZlIjp0aGlzLl9pc1JlbGF0aXZlJiZzJiZzLl9zY2hlbWU9PXRoaXMuX3NjaGVtZT8icmVsYXRpdmUgb3IgYXV0aG9yaXR5Ijp0aGlzLl9pc1JlbGF0aXZlPyJhdXRob3JpdHkgZmlyc3Qgc2xhc2giOiJzY2hlbWUgZGF0YSJ9YnJlYWs7Y2FzZSJzY2hlbWUgZGF0YSI6Ij8iPT1iPyh0aGlzLl9xdWVyeT0iPyIsZD0icXVlcnkiKToiIyI9PWI/KHRoaXMuX2ZyYWdtZW50PSIjIixkPSJmcmFnbWVudCIpOmYhPWImJiIJIiE9YiYmIlxuIiE9YiYmIlxyIiE9YiYmKHRoaXMuX3NjaGVtZURhdGErPW8oYikpO2JyZWFrO2Nhc2Uibm8gc2NoZW1lIjppZihzJiZ0KHMuX3NjaGVtZSkpe2Q9InJlbGF0aXZlIjtjb250aW51ZX1jKCJNaXNzaW5nIHNjaGVtZS4iKSxuLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSJyZWxhdGl2ZSBvciBhdXRob3JpdHkiOmlmKCIvIiE9Ynx8Ii8iIT1lW3UrMV0pe2MoIkV4cGVjdGVkIC8sIGdvdDogIitiKSxkPSJyZWxhdGl2ZSI7Y29udGludWV9ZD0iYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzIjticmVhaztjYXNlInJlbGF0aXZlIjppZih0aGlzLl9pc1JlbGF0aXZlPSEwLCJmaWxlIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5fc2NoZW1lPXMuX3NjaGVtZSksZj09Yil7dGhpcy5faG9zdD1zLl9ob3N0LHRoaXMuX3BvcnQ9cy5fcG9ydCx0aGlzLl9wYXRoPXMuX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT1zLl9xdWVyeSx0aGlzLl91c2VybmFtZT1zLl91c2VybmFtZSx0aGlzLl9wYXNzd29yZD1zLl9wYXNzd29yZDticmVhayBlfWlmKCIvIj09Ynx8IlxcIj09YikiXFwiPT1iJiZjKCJcXCBpcyBhbiBpbnZhbGlkIGNvZGUgcG9pbnQuIiksZD0icmVsYXRpdmUgc2xhc2giO2Vsc2UgaWYoIj8iPT1iKXRoaXMuX2hvc3Q9cy5faG9zdCx0aGlzLl9wb3J0PXMuX3BvcnQsdGhpcy5fcGF0aD1zLl9wYXRoLnNsaWNlKCksdGhpcy5fcXVlcnk9Ij8iLHRoaXMuX3VzZXJuYW1lPXMuX3VzZXJuYW1lLHRoaXMuX3Bhc3N3b3JkPXMuX3Bhc3N3b3JkLGQ9InF1ZXJ5IjtlbHNle2lmKCIjIiE9Yil7dmFyIHk9ZVt1KzFdLEU9ZVt1KzJdOygiZmlsZSIhPXRoaXMuX3NjaGVtZXx8IW0udGVzdChiKXx8IjoiIT15JiYifCIhPXl8fGYhPUUmJiIvIiE9RSYmIlxcIiE9RSYmIj8iIT1FJiYiIyIhPUUpJiYodGhpcy5faG9zdD1zLl9ob3N0LHRoaXMuX3BvcnQ9cy5fcG9ydCx0aGlzLl91c2VybmFtZT1zLl91c2VybmFtZSx0aGlzLl9wYXNzd29yZD1zLl9wYXNzd29yZCx0aGlzLl9wYXRoPXMuX3BhdGguc2xpY2UoKSx0aGlzLl9wYXRoLnBvcCgpKSxkPSJyZWxhdGl2ZSBwYXRoIjtjb250aW51ZX10aGlzLl9ob3N0PXMuX2hvc3QsdGhpcy5fcG9ydD1zLl9wb3J0LHRoaXMuX3BhdGg9cy5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PXMuX3F1ZXJ5LHRoaXMuX2ZyYWdtZW50PSIjIix0aGlzLl91c2VybmFtZT1zLl91c2VybmFtZSx0aGlzLl9wYXNzd29yZD1zLl9wYXNzd29yZCxkPSJmcmFnbWVudCJ9YnJlYWs7Y2FzZSJyZWxhdGl2ZSBzbGFzaCI6aWYoIi8iIT1iJiYiXFwiIT1iKXsiZmlsZSIhPXRoaXMuX3NjaGVtZSYmKHRoaXMuX2hvc3Q9cy5faG9zdCx0aGlzLl9wb3J0PXMuX3BvcnQsdGhpcy5fdXNlcm5hbWU9cy5fdXNlcm5hbWUsdGhpcy5fcGFzc3dvcmQ9cy5fcGFzc3dvcmQpLGQ9InJlbGF0aXZlIHBhdGgiO2NvbnRpbnVlfSJcXCI9PWImJmMoIlxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC4iKSxkPSJmaWxlIj09dGhpcy5fc2NoZW1lPyJmaWxlIGhvc3QiOiJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiO2JyZWFrO2Nhc2UiYXV0aG9yaXR5IGZpcnN0IHNsYXNoIjppZigiLyIhPWIpe2MoIkV4cGVjdGVkICcvJywgZ290OiAiK2IpLGQ9ImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlcyI7Y29udGludWV9ZD0iYXV0aG9yaXR5IHNlY29uZCBzbGFzaCI7YnJlYWs7Y2FzZSJhdXRob3JpdHkgc2Vjb25kIHNsYXNoIjppZihkPSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiLCIvIiE9Yil7YygiRXhwZWN0ZWQgJy8nLCBnb3Q6ICIrYik7Y29udGludWV9YnJlYWs7Y2FzZSJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXMiOmlmKCIvIiE9YiYmIlxcIiE9Yil7ZD0iYXV0aG9yaXR5Ijtjb250aW51ZX1jKCJFeHBlY3RlZCBhdXRob3JpdHksIGdvdDogIitiKTticmVhaztjYXNlImF1dGhvcml0eSI6aWYoIkAiPT1iKXtfJiYoYygiQCBhbHJlYWR5IHNlZW4uIiksbCs9IiU0MCIpLF89ITA7Zm9yKHZhciBMPTA7TDxsLmxlbmd0aDtMKyspe3ZhciBNPWxbTF07aWYoIgkiIT1NJiYiXG4iIT1NJiYiXHIiIT1NKWlmKCI6IiE9TXx8bnVsbCE9PXRoaXMuX3Bhc3N3b3JkKXt2YXIgVD1vKE0pO251bGwhPT10aGlzLl9wYXNzd29yZD90aGlzLl9wYXNzd29yZCs9VDp0aGlzLl91c2VybmFtZSs9VH1lbHNlIHRoaXMuX3Bhc3N3b3JkPSIiO2Vsc2UgYygiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGF1dGhvcml0eS4iKX1sPSIifWVsc2V7aWYoZj09Ynx8Ii8iPT1ifHwiXFwiPT1ifHwiPyI9PWJ8fCIjIj09Yil7dS09bC5sZW5ndGgsbD0iIixkPSJob3N0Ijtjb250aW51ZX1sKz1ifWJyZWFrO2Nhc2UiZmlsZSBob3N0IjppZihmPT1ifHwiLyI9PWJ8fCJcXCI9PWJ8fCI/Ij09Ynx8IiMiPT1iKXsyIT1sLmxlbmd0aHx8IW0udGVzdChsWzBdKXx8IjoiIT1sWzFdJiYifCIhPWxbMV0/MD09bC5sZW5ndGg/ZD0icmVsYXRpdmUgcGF0aCBzdGFydCI6KHRoaXMuX2hvc3Q9ci5jYWxsKHRoaXMsbCksbD0iIixkPSJyZWxhdGl2ZSBwYXRoIHN0YXJ0Iik6ZD0icmVsYXRpdmUgcGF0aCI7Y29udGludWV9IgkiPT1ifHwiXG4iPT1ifHwiXHIiPT1iP2MoIkludmFsaWQgd2hpdGVzcGFjZSBpbiBmaWxlIGhvc3QuIik6bCs9YjticmVhaztjYXNlImhvc3QiOmNhc2UiaG9zdG5hbWUiOmlmKCI6IiE9Ynx8dyl7aWYoZj09Ynx8Ii8iPT1ifHwiXFwiPT1ifHwiPyI9PWJ8fCIjIj09Yil7aWYodGhpcy5faG9zdD1yLmNhbGwodGhpcyxsKSxsPSIiLGQ9InJlbGF0aXZlIHBhdGggc3RhcnQiLGEpYnJlYWsgZTtjb250aW51ZX0iCSIhPWImJiJcbiIhPWImJiJcciIhPWI/KCJbIj09Yj93PSEwOiJdIj09YiYmKHc9ITEpLGwrPWIpOmMoIkludmFsaWQgY29kZSBwb2ludCBpbiBob3N0L2hvc3RuYW1lOiAiK2IpfWVsc2UgaWYodGhpcy5faG9zdD1yLmNhbGwodGhpcyxsKSxsPSIiLGQ9InBvcnQiLCJob3N0bmFtZSI9PWEpYnJlYWsgZTticmVhaztjYXNlInBvcnQiOmlmKC9bMC05XS8udGVzdChiKSlsKz1iO2Vsc2V7aWYoZj09Ynx8Ii8iPT1ifHwiXFwiPT1ifHwiPyI9PWJ8fCIjIj09Ynx8YSl7aWYoIiIhPWwpe3ZhciBOPXBhcnNlSW50KGwsMTApO04hPWhbdGhpcy5fc2NoZW1lXSYmKHRoaXMuX3BvcnQ9TisiIiksbD0iIn1pZihhKWJyZWFrIGU7ZD0icmVsYXRpdmUgcGF0aCBzdGFydCI7Y29udGludWV9IgkiPT1ifHwiXG4iPT1ifHwiXHIiPT1iP2MoIkludmFsaWQgY29kZSBwb2ludCBpbiBwb3J0OiAiK2IpOm4uY2FsbCh0aGlzKX1icmVhaztjYXNlInJlbGF0aXZlIHBhdGggc3RhcnQiOmlmKCJcXCI9PWImJmMoIidcXCcgbm90IGFsbG93ZWQgaW4gcGF0aC4iKSxkPSJyZWxhdGl2ZSBwYXRoIiwiLyIhPWImJiJcXCIhPWIpY29udGludWU7YnJlYWs7Y2FzZSJyZWxhdGl2ZSBwYXRoIjppZihmIT1iJiYiLyIhPWImJiJcXCIhPWImJihhfHwiPyIhPWImJiIjIiE9YikpIgkiIT1iJiYiXG4iIT1iJiYiXHIiIT1iJiYobCs9byhiKSk7ZWxzZXsiXFwiPT1iJiZjKCJcXCBub3QgYWxsb3dlZCBpbiByZWxhdGl2ZSBwYXRoLiIpO3ZhciBPOyhPPXBbbC50b0xvd2VyQ2FzZSgpXSkmJihsPU8pLCIuLiI9PWw/KHRoaXMuX3BhdGgucG9wKCksIi8iIT1iJiYiXFwiIT1iJiZ0aGlzLl9wYXRoLnB1c2goIiIpKToiLiI9PWwmJiIvIiE9YiYmIlxcIiE9Yj90aGlzLl9wYXRoLnB1c2goIiIpOiIuIiE9bCYmKCJmaWxlIj09dGhpcy5fc2NoZW1lJiYwPT10aGlzLl9wYXRoLmxlbmd0aCYmMj09bC5sZW5ndGgmJm0udGVzdChsWzBdKSYmInwiPT1sWzFdJiYobD1sWzBdKyI6IiksdGhpcy5fcGF0aC5wdXNoKGwpKSxsPSIiLCI/Ij09Yj8odGhpcy5fcXVlcnk9Ij8iLGQ9InF1ZXJ5Iik6IiMiPT1iJiYodGhpcy5fZnJhZ21lbnQ9IiMiLGQ9ImZyYWdtZW50Iil9YnJlYWs7Y2FzZSJxdWVyeSI6YXx8IiMiIT1iP2YhPWImJiIJIiE9YiYmIlxuIiE9YiYmIlxyIiE9YiYmKHRoaXMuX3F1ZXJ5Kz1pKGIpKToodGhpcy5fZnJhZ21lbnQ9IiMiLGQ9ImZyYWdtZW50Iik7YnJlYWs7Y2FzZSJmcmFnbWVudCI6ZiE9YiYmIgkiIT1iJiYiXG4iIT1iJiYiXHIiIT1iJiYodGhpcy5fZnJhZ21lbnQrPWIpfXUrK319ZnVuY3Rpb24gcygpe3RoaXMuX3NjaGVtZT0iIix0aGlzLl9zY2hlbWVEYXRhPSIiLHRoaXMuX3VzZXJuYW1lPSIiLHRoaXMuX3Bhc3N3b3JkPW51bGwsdGhpcy5faG9zdD0iIix0aGlzLl9wb3J0PSIiLHRoaXMuX3BhdGg9W10sdGhpcy5fcXVlcnk9IiIsdGhpcy5fZnJhZ21lbnQ9IiIsdGhpcy5faXNJbnZhbGlkPSExLHRoaXMuX2lzUmVsYXRpdmU9ITF9ZnVuY3Rpb24gYyhlLHQpe3ZvaWQgMD09PXR8fHQgaW5zdGFuY2VvZiBjfHwodD1uZXcgYyhTdHJpbmcodCkpKSx0aGlzLl91cmw9ZSxzLmNhbGwodGhpcyk7dmFyIG49ZS5yZXBsYWNlKC9eWyBcdFxyXG5cZl0rfFsgXHRcclxuXGZdKyQvZywiIik7YS5jYWxsKHRoaXMsbixudWxsLHQpfXZhciBkPSExO2lmKCFlLmZvcmNlSlVSTCl0cnl7dmFyIHU9bmV3IFVSTCgiYiIsImh0dHA6Ly9hIik7dS5wYXRobmFtZT0iYyUyMGQiLGQ9Imh0dHA6Ly9hL2MlMjBkIj09PXUuaHJlZn1jYXRjaChsKXt9aWYoIWQpe3ZhciBoPU9iamVjdC5jcmVhdGUobnVsbCk7aC5mdHA9MjEsaC5maWxlPTAsaC5nb3BoZXI9NzAsaC5odHRwPTgwLGguaHR0cHM9NDQzLGgud3M9ODAsaC53c3M9NDQzO3ZhciBwPU9iamVjdC5jcmVhdGUobnVsbCk7cFsiJTJlIl09Ii4iLHBbIi4lMmUiXT0iLi4iLHBbIiUyZS4iXT0iLi4iLHBbIiUyZSUyZSJdPSIuLiI7dmFyIGY9dm9pZCAwLG09L1thLXpBLVpdLyx2PS9bYS16QS1aMC05XCtcLVwuXS87Yy5wcm90b3R5cGU9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaHJlZn0sZ2V0IGhyZWYoKXtpZih0aGlzLl9pc0ludmFsaWQpcmV0dXJuIHRoaXMuX3VybDt2YXIgZT0iIjtyZXR1cm4oIiIhPXRoaXMuX3VzZXJuYW1lfHxudWxsIT10aGlzLl9wYXNzd29yZCkmJihlPXRoaXMuX3VzZXJuYW1lKyhudWxsIT10aGlzLl9wYXNzd29yZD8iOiIrdGhpcy5fcGFzc3dvcmQ6IiIpKyJAIiksdGhpcy5wcm90b2NvbCsodGhpcy5faXNSZWxhdGl2ZT8iLy8iK2UrdGhpcy5ob3N0OiIiKSt0aGlzLnBhdGhuYW1lK3RoaXMuX3F1ZXJ5K3RoaXMuX2ZyYWdtZW50fSxzZXQgaHJlZihlKXtzLmNhbGwodGhpcyksYS5jYWxsKHRoaXMsZSl9LGdldCBwcm90b2NvbCgpe3JldHVybiB0aGlzLl9zY2hlbWUrIjoifSxzZXQgcHJvdG9jb2woZSl7dGhpcy5faXNJbnZhbGlkfHxhLmNhbGwodGhpcyxlKyI6Iiwic2NoZW1lIHN0YXJ0Iil9LGdldCBob3N0KCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZD8iIjp0aGlzLl9wb3J0P3RoaXMuX2hvc3QrIjoiK3RoaXMuX3BvcnQ6dGhpcy5faG9zdH0sc2V0IGhvc3QoZSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmYS5jYWxsKHRoaXMsZSwiaG9zdCIpfSxnZXQgaG9zdG5hbWUoKXtyZXR1cm4gdGhpcy5faG9zdH0sc2V0IGhvc3RuYW1lKGUpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmEuY2FsbCh0aGlzLGUsImhvc3RuYW1lIil9LGdldCBwb3J0KCl7cmV0dXJuIHRoaXMuX3BvcnR9LHNldCBwb3J0KGUpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmEuY2FsbCh0aGlzLGUsInBvcnQiKX0sZ2V0IHBhdGhuYW1lKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZD8iIjp0aGlzLl9pc1JlbGF0aXZlPyIvIit0aGlzLl9wYXRoLmpvaW4oIi8iKTp0aGlzLl9zY2hlbWVEYXRhfSxzZXQgcGF0aG5hbWUoZSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmKHRoaXMuX3BhdGg9W10sYS5jYWxsKHRoaXMsZSwicmVsYXRpdmUgcGF0aCBzdGFydCIpKX0sZ2V0IHNlYXJjaCgpe3JldHVybiB0aGlzLl9pc0ludmFsaWR8fCF0aGlzLl9xdWVyeXx8Ij8iPT10aGlzLl9xdWVyeT8iIjp0aGlzLl9xdWVyeX0sc2V0IHNlYXJjaChlKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiYodGhpcy5fcXVlcnk9Ij8iLCI/Ij09ZVswXSYmKGU9ZS5zbGljZSgxKSksYS5jYWxsKHRoaXMsZSwicXVlcnkiKSl9LGdldCBoYXNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX2ZyYWdtZW50fHwiIyI9PXRoaXMuX2ZyYWdtZW50PyIiOnRoaXMuX2ZyYWdtZW50fSxzZXQgaGFzaChlKXt0aGlzLl9pc0ludmFsaWR8fCh0aGlzLl9mcmFnbWVudD0iIyIsIiMiPT1lWzBdJiYoZT1lLnNsaWNlKDEpKSxhLmNhbGwodGhpcyxlLCJmcmFnbWVudCIpKX0sZ2V0IG9yaWdpbigpe3ZhciBlO2lmKHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX3NjaGVtZSlyZXR1cm4iIjtzd2l0Y2godGhpcy5fc2NoZW1lKXtjYXNlImRhdGEiOmNhc2UiZmlsZSI6Y2FzZSJqYXZhc2NyaXB0IjpjYXNlIm1haWx0byI6cmV0dXJuIm51bGwifXJldHVybiBlPXRoaXMuaG9zdCxlP3RoaXMuX3NjaGVtZSsiOi8vIitlOiIifX07dmFyIF89ZS5VUkw7XyYmKGMuY3JlYXRlT2JqZWN0VVJMPWZ1bmN0aW9uKGUpe3JldHVybiBfLmNyZWF0ZU9iamVjdFVSTC5hcHBseShfLGFyZ3VtZW50cyl9LGMucmV2b2tlT2JqZWN0VVJMPWZ1bmN0aW9uKGUpe18ucmV2b2tlT2JqZWN0VVJMKGUpfSksZS5VUkw9Y319KHRoaXMpLCJ1bmRlZmluZWQiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LmRlZmluZVByb3BlcnR5LHQ9RGF0ZS5ub3coKSUxZTksbj1mdW5jdGlvbigpe3RoaXMubmFtZT0iX19zdCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKHQrKyArIl9fIil9O24ucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24odCxuKXt2YXIgcj10W3RoaXMubmFtZV07cmV0dXJuIHImJnJbMF09PT10P3JbMV09bjplKHQsdGhpcy5uYW1lLHt2YWx1ZTpbdCxuXSx3cml0YWJsZTohMH0pLHRoaXN9LGdldDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4odD1lW3RoaXMubmFtZV0pJiZ0WzBdPT09ZT90WzFdOnZvaWQgMH0sImRlbGV0ZSI6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVt0aGlzLm5hbWVdO3JldHVybiB0JiZ0WzBdPT09ZT8odFswXT10WzFdPXZvaWQgMCwhMCk6ITF9LGhhczpmdW5jdGlvbihlKXt2YXIgdD1lW3RoaXMubmFtZV07cmV0dXJuIHQ/dFswXT09PWU6ITF9fSx3aW5kb3cuV2Vha01hcD1ufSgpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7Yi5wdXNoKGUpLGd8fChnPSEwLG0ocikpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCYmd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChlKXx8ZX1mdW5jdGlvbiByKCl7Zz0hMTt2YXIgZT1iO2I9W10sZS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudWlkXy10LnVpZF99KTt2YXIgdD0hMTtlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZS50YWtlUmVjb3JkcygpO28oZSksbi5sZW5ndGgmJihlLmNhbGxiYWNrXyhuLGUpLHQ9ITApfSksdCYmcigpfWZ1bmN0aW9uIG8oZSl7ZS5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj12LmdldCh0KTtuJiZuLmZvckVhY2goZnVuY3Rpb24odCl7dC5vYnNlcnZlcj09PWUmJnQucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfWZ1bmN0aW9uIGkoZSx0KXtmb3IodmFyIG49ZTtuO249bi5wYXJlbnROb2RlKXt2YXIgcj12LmdldChuKTtpZihyKWZvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXt2YXIgaT1yW29dLGE9aS5vcHRpb25zO2lmKG49PT1lfHxhLnN1YnRyZWUpe3ZhciBzPXQoYSk7cyYmaS5lbnF1ZXVlKHMpfX19fWZ1bmN0aW9uIGEoZSl7dGhpcy5jYWxsYmFja189ZSx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3l9ZnVuY3Rpb24gcyhlLHQpe3RoaXMudHlwZT1lLHRoaXMudGFyZ2V0PXQsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9bmV3IHMoZS50eXBlLGUudGFyZ2V0KTtyZXR1cm4gdC5hZGRlZE5vZGVzPWUuYWRkZWROb2Rlcy5zbGljZSgpLHQucmVtb3ZlZE5vZGVzPWUucmVtb3ZlZE5vZGVzLnNsaWNlKCksdC5wcmV2aW91c1NpYmxpbmc9ZS5wcmV2aW91c1NpYmxpbmcsdC5uZXh0U2libGluZz1lLm5leHRTaWJsaW5nLHQuYXR0cmlidXRlTmFtZT1lLmF0dHJpYnV0ZU5hbWUsdC5hdHRyaWJ1dGVOYW1lc3BhY2U9ZS5hdHRyaWJ1dGVOYW1lc3BhY2UsdC5vbGRWYWx1ZT1lLm9sZFZhbHVlLHR9ZnVuY3Rpb24gZChlLHQpe3JldHVybiBFPW5ldyBzKGUsdCl9ZnVuY3Rpb24gdShlKXtyZXR1cm4gTD9MOihMPWMoRSksTC5vbGRWYWx1ZT1lLEwpfWZ1bmN0aW9uIGwoKXtFPUw9dm9pZCAwfWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGU9PT1MfHxlPT09RX1mdW5jdGlvbiBwKGUsdCl7cmV0dXJuIGU9PT10P2U6TCYmaChlKT9MOm51bGx9ZnVuY3Rpb24gZihlLHQsbil7dGhpcy5vYnNlcnZlcj1lLHRoaXMudGFyZ2V0PXQsdGhpcy5vcHRpb25zPW4sdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfXZhciBtLHY9bmV3IFdlYWtNYXA7aWYoL1RyaWRlbnR8RWRnZS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSltPXNldFRpbWVvdXQ7ZWxzZSBpZih3aW5kb3cuc2V0SW1tZWRpYXRlKW09d2luZG93LnNldEltbWVkaWF0ZTtlbHNle3ZhciBfPVtdLHc9U3RyaW5nKE1hdGgucmFuZG9tKCkpO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIixmdW5jdGlvbihlKXtpZihlLmRhdGE9PT13KXt2YXIgdD1fO189W10sdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UoKX0pfX0pLG09ZnVuY3Rpb24oZSl7Xy5wdXNoKGUpLHdpbmRvdy5wb3N0TWVzc2FnZSh3LCIqIil9fXZhciBnPSExLGI9W10seT0wO2EucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGUsdCl7aWYoZT1uKGUpLCF0LmNoaWxkTGlzdCYmIXQuYXR0cmlidXRlcyYmIXQuY2hhcmFjdGVyRGF0YXx8dC5hdHRyaWJ1dGVPbGRWYWx1ZSYmIXQuYXR0cmlidXRlc3x8dC5hdHRyaWJ1dGVGaWx0ZXImJnQuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmIXQuYXR0cmlidXRlc3x8dC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUmJiF0LmNoYXJhY3RlckRhdGEpdGhyb3cgbmV3IFN5bnRheEVycm9yO3ZhciByPXYuZ2V0KGUpO3J8fHYuc2V0KGUscj1bXSk7Zm9yKHZhciBvLGk9MDtpPHIubGVuZ3RoO2krKylpZihyW2ldLm9ic2VydmVyPT09dGhpcyl7bz1yW2ldLG8ucmVtb3ZlTGlzdGVuZXJzKCksby5vcHRpb25zPXQ7YnJlYWt9b3x8KG89bmV3IGYodGhpcyxlLHQpLHIucHVzaChvKSx0aGlzLm5vZGVzXy5wdXNoKGUpKSxvLmFkZExpc3RlbmVycygpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihlKXtmb3IodmFyIHQ9di5nZXQoZSksbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO2lmKHIub2JzZXJ2ZXI9PT10aGlzKXtyLnJlbW92ZUxpc3RlbmVycygpLHQuc3BsaWNlKG4sMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLGV9fTt2YXIgRSxMO2YucHJvdG90eXBlPXtlbnF1ZXVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMub2JzZXJ2ZXIucmVjb3Jkc18scj1uLmxlbmd0aDtpZihuLmxlbmd0aD4wKXt2YXIgbz1uW3ItMV0saT1wKG8sZSk7aWYoaSlyZXR1cm4gdm9pZChuW3ItMV09aSl9ZWxzZSB0KHRoaXMub2JzZXJ2ZXIpO25bcl09ZX0sYWRkTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5hZGRMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0sYWRkTGlzdGVuZXJzXzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnM7dC5hdHRyaWJ1dGVzJiZlLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUF0dHJNb2RpZmllZCIsdGhpcywhMCksdC5jaGFyYWN0ZXJEYXRhJiZlLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZCIsdGhpcywhMCksdC5jaGlsZExpc3QmJmUuYWRkRXZlbnRMaXN0ZW5lcigiRE9NTm9kZUluc2VydGVkIix0aGlzLCEwKSwodC5jaGlsZExpc3R8fHQuc3VidHJlZSkmJmUuYWRkRXZlbnRMaXN0ZW5lcigiRE9NTm9kZVJlbW92ZWQiLHRoaXMsITApfSxyZW1vdmVMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18odGhpcy50YXJnZXQpfSxyZW1vdmVMaXN0ZW5lcnNfOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9uczt0LmF0dHJpYnV0ZXMmJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQXR0ck1vZGlmaWVkIix0aGlzLCEwKSx0LmNoYXJhY3RlckRhdGEmJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIix0aGlzLCEwKSx0LmNoaWxkTGlzdCYmZS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Ob2RlSW5zZXJ0ZWQiLHRoaXMsITApLCh0LmNoaWxkTGlzdHx8dC5zdWJ0cmVlKSYmZS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Ob2RlUmVtb3ZlZCIsdGhpcywhMCl9LGFkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKGUpe2lmKGUhPT10aGlzLnRhcmdldCl7dGhpcy5hZGRMaXN0ZW5lcnNfKGUpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGUpO3ZhciB0PXYuZ2V0KGUpO3R8fHYuc2V0KGUsdD1bXSksdC5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKGUpO2Zvcih2YXIgdD12LmdldChlKSxuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXT09PXRoaXMpe3Quc3BsaWNlKG4sMSk7YnJlYWt9fSx0aGlzKX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24oZSl7c3dpdGNoKGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS50eXBlKXtjYXNlIkRPTUF0dHJNb2RpZmllZCI6dmFyIHQ9ZS5hdHRyTmFtZSxuPWUucmVsYXRlZE5vZGUubmFtZXNwYWNlVVJJLHI9ZS50YXJnZXQsbz1uZXcgZCgiYXR0cmlidXRlcyIscik7by5hdHRyaWJ1dGVOYW1lPXQsby5hdHRyaWJ1dGVOYW1lc3BhY2U9bjt2YXIgYT1lLmF0dHJDaGFuZ2U9PT1NdXRhdGlvbkV2ZW50LkFERElUSU9OP251bGw6ZS5wcmV2VmFsdWU7aShyLGZ1bmN0aW9uKGUpe3JldHVybiFlLmF0dHJpYnV0ZXN8fGUuYXR0cmlidXRlRmlsdGVyJiZlLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJi0xPT09ZS5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZih0KSYmLTE9PT1lLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKG4pP3ZvaWQgMDplLmF0dHJpYnV0ZU9sZFZhbHVlP3UoYSk6b30pO2JyZWFrO2Nhc2UiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIjp2YXIgcj1lLnRhcmdldCxvPWQoImNoYXJhY3RlckRhdGEiLHIpLGE9ZS5wcmV2VmFsdWU7aShyLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJhY3RlckRhdGE/ZS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWU/dShhKTpvOnZvaWQgMH0pO2JyZWFrO2Nhc2UiRE9NTm9kZVJlbW92ZWQiOnRoaXMuYWRkVHJhbnNpZW50T2JzZXJ2ZXIoZS50YXJnZXQpO2Nhc2UiRE9NTm9kZUluc2VydGVkIjp2YXIgcyxjLGg9ZS50YXJnZXQ7IkRPTU5vZGVJbnNlcnRlZCI9PT1lLnR5cGU/KHM9W2hdLGM9W10pOihzPVtdLGM9W2hdKTt2YXIgcD1oLnByZXZpb3VzU2libGluZyxmPWgubmV4dFNpYmxpbmcsbz1kKCJjaGlsZExpc3QiLGUudGFyZ2V0LnBhcmVudE5vZGUpO28uYWRkZWROb2Rlcz1zLG8ucmVtb3ZlZE5vZGVzPWMsby5wcmV2aW91c1NpYmxpbmc9cCxvLm5leHRTaWJsaW5nPWYsaShlLnJlbGF0ZWROb2RlLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoaWxkTGlzdD9vOnZvaWQgMH0pfWwoKX19LGUuSnNNdXRhdGlvbk9ic2VydmVyPWEsZS5NdXRhdGlvbk9ic2VydmVyfHwoZS5NdXRhdGlvbk9ic2VydmVyPWEpfSh3aW5kb3cpLHdpbmRvdy5IVE1MSW1wb3J0cz13aW5kb3cuSFRNTEltcG9ydHN8fHtmbGFnczp7fX0sZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3Q9dHx8ZixyKGZ1bmN0aW9uKCl7aShlLHQpfSx0KX1mdW5jdGlvbiBuKGUpe3JldHVybiJjb21wbGV0ZSI9PT1lLnJlYWR5U3RhdGV8fGUucmVhZHlTdGF0ZT09PV99ZnVuY3Rpb24gcihlLHQpe2lmKG4odCkpZSYmZSgpO2Vsc2V7dmFyIG89ZnVuY3Rpb24oKXsoImNvbXBsZXRlIj09PXQucmVhZHlTdGF0ZXx8dC5yZWFkeVN0YXRlPT09XykmJih0LnJlbW92ZUV2ZW50TGlzdGVuZXIodyxvKSxyKGUsdCkpfTt0LmFkZEV2ZW50TGlzdGVuZXIodyxvKX19ZnVuY3Rpb24gbyhlKXtlLnRhcmdldC5fX2xvYWRlZD0hMH1mdW5jdGlvbiBpKGUsdCl7ZnVuY3Rpb24gbigpe2M9PWQmJmUmJmUoe2FsbEltcG9ydHM6cyxsb2FkZWRJbXBvcnRzOnUsZXJyb3JJbXBvcnRzOmx9KX1mdW5jdGlvbiByKGUpe28oZSksdS5wdXNoKHRoaXMpLGMrKyxuKCl9ZnVuY3Rpb24gaShlKXtsLnB1c2godGhpcyksYysrLG4oKX12YXIgcz10LnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxjPTAsZD1zLmxlbmd0aCx1PVtdLGw9W107aWYoZClmb3IodmFyIGgscD0wO2Q+cCYmKGg9c1twXSk7cCsrKWEoaCk/KGMrKyxuKCkpOihoLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLHIpLGguYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLGkpKTtlbHNlIG4oKX1mdW5jdGlvbiBhKGUpe3JldHVybiBsP2UuX19sb2FkZWR8fGVbImltcG9ydCJdJiYibG9hZGluZyIhPT1lWyJpbXBvcnQiXS5yZWFkeVN0YXRlOmUuX19pbXBvcnRQYXJzZWR9ZnVuY3Rpb24gcyhlKXtmb3IodmFyIHQsbj0wLHI9ZS5sZW5ndGg7cj5uJiYodD1lW25dKTtuKyspYyh0KSYmZCh0KX1mdW5jdGlvbiBjKGUpe3JldHVybiJsaW5rIj09PWUubG9jYWxOYW1lJiYiaW1wb3J0Ij09PWUucmVsfWZ1bmN0aW9uIGQoZSl7dmFyIHQ9ZVsiaW1wb3J0Il07dD9vKHt0YXJnZXQ6ZX0pOihlLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLG8pLGUuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLG8pKX12YXIgdT0iaW1wb3J0IixsPUJvb2xlYW4odSBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaW5rIikpLGg9Qm9vbGVhbih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLHA9ZnVuY3Rpb24oZSl7cmV0dXJuIGg/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChlKTplfSxmPXAoZG9jdW1lbnQpLG09e2dldDpmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5IVE1MSW1wb3J0cy5jdXJyZW50U2NyaXB0fHxkb2N1bWVudC5jdXJyZW50U2NyaXB0fHwoImNvbXBsZXRlIiE9PWRvY3VtZW50LnJlYWR5U3RhdGU/ZG9jdW1lbnQuc2NyaXB0c1tkb2N1bWVudC5zY3JpcHRzLmxlbmd0aC0xXTpudWxsKTtyZXR1cm4gcChlKX0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsIl9jdXJyZW50U2NyaXB0IixtKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZiwiX2N1cnJlbnRTY3JpcHQiLG0pO3ZhciB2PS9UcmlkZW50Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLF89dj8iY29tcGxldGUiOiJpbnRlcmFjdGl2ZSIsdz0icmVhZHlzdGF0ZWNoYW5nZSI7bCYmKG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTAscj1lLmxlbmd0aDtyPm4mJih0PWVbbl0pO24rKyl0LmFkZGVkTm9kZXMmJnModC5hZGRlZE5vZGVzKX0pLm9ic2VydmUoZG9jdW1lbnQuaGVhZCx7Y2hpbGRMaXN0OiEwfSksZnVuY3Rpb24oKXtpZigibG9hZGluZyI9PT1kb2N1bWVudC5yZWFkeVN0YXRlKWZvcih2YXIgZSx0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImxpbmtbcmVsPWltcG9ydF0iKSxuPTAscj10Lmxlbmd0aDtyPm4mJihlPXRbbl0pO24rKylkKGUpfSgpKSx0KGZ1bmN0aW9uKGUpe3dpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeT0hMCx3aW5kb3cuSFRNTEltcG9ydHMucmVhZHlUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3ZhciB0PWYuY3JlYXRlRXZlbnQoIkN1c3RvbUV2ZW50Iik7dC5pbml0Q3VzdG9tRXZlbnQoIkhUTUxJbXBvcnRzTG9hZGVkIiwhMCwhMCxlKSxmLmRpc3BhdGNoRXZlbnQodCl9KSxlLklNUE9SVF9MSU5LX1RZUEU9dSxlLnVzZU5hdGl2ZT1sLGUucm9vdERvY3VtZW50PWYsZS53aGVuUmVhZHk9dCxlLmlzSUU9dn0od2luZG93LkhUTUxJbXBvcnRzKSxmdW5jdGlvbihlKXt2YXIgdD1bXSxuPWZ1bmN0aW9uKGUpe3QucHVzaChlKX0scj1mdW5jdGlvbigpe3QuZm9yRWFjaChmdW5jdGlvbih0KXt0KGUpfSl9O2UuYWRkTW9kdWxlPW4sZS5pbml0aWFsaXplTW9kdWxlcz1yfSh3aW5kb3cuSFRNTEltcG9ydHMpLHdpbmRvdy5IVE1MSW1wb3J0cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7dmFyIHQ9Lyh1cmxcKCkoW14pXSopKFwpKS9nLG49LyhAaW1wb3J0W1xzXSsoPyF1cmxcKCkpKFteO10qKSg7KS9nLHI9e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihlLHQpe3ZhciBuPWUub3duZXJEb2N1bWVudCxyPW4uY3JlYXRlRWxlbWVudCgiYSIpO3JldHVybiBlLnRleHRDb250ZW50PXRoaXMucmVzb2x2ZVVybHNJbkNzc1RleHQoZS50ZXh0Q29udGVudCx0LHIpLGV9LHJlc29sdmVVcmxzSW5Dc3NUZXh0OmZ1bmN0aW9uKGUscixvKXt2YXIgaT10aGlzLnJlcGxhY2VVcmxzKGUsbyxyLHQpO3JldHVybiBpPXRoaXMucmVwbGFjZVVybHMoaSxvLHIsbil9LHJlcGxhY2VVcmxzOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBlLnJlcGxhY2UocixmdW5jdGlvbihlLHIsbyxpKXt2YXIgYT1vLnJlcGxhY2UoL1siJ10vZywiIik7cmV0dXJuIG4mJihhPW5ldyBVUkwoYSxuKS5ocmVmKSx0LmhyZWY9YSxhPXQuaHJlZixyKyInIithKyInIitpfSl9fTtlLnBhdGg9cn0pLHdpbmRvdy5IVE1MSW1wb3J0cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7dmFyIHQ9e2FzeW5jOiEwLG9rOmZ1bmN0aW9uKGUpe3JldHVybiBlLnN0YXR1cz49MjAwJiZlLnN0YXR1czwzMDB8fDMwND09PWUuc3RhdHVzfHwwPT09ZS5zdGF0dXN9LGxvYWQ6ZnVuY3Rpb24obixyLG8pe3ZhciBpPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4oZS5mbGFncy5kZWJ1Z3x8ZS5mbGFncy5idXN0KSYmKG4rPSI/IitNYXRoLnJhbmRvbSgpKSxpLm9wZW4oIkdFVCIsbix0LmFzeW5jKSxpLmFkZEV2ZW50TGlzdGVuZXIoInJlYWR5c3RhdGVjaGFuZ2UiLGZ1bmN0aW9uKGUpe2lmKDQ9PT1pLnJlYWR5U3RhdGUpe3ZhciBuPWkuZ2V0UmVzcG9uc2VIZWFkZXIoIkxvY2F0aW9uIiksYT1udWxsO2lmKG4pdmFyIGE9Ii8iPT09bi5zdWJzdHIoMCwxKT9sb2NhdGlvbi5vcmlnaW4rbjpuO3IuY2FsbChvLCF0Lm9rKGkpJiZpLGkucmVzcG9uc2V8fGkucmVzcG9uc2VUZXh0LGEpfX0pLGkuc2VuZCgpLGl9LGxvYWREb2N1bWVudDpmdW5jdGlvbihlLHQsbil7dGhpcy5sb2FkKGUsdCxuKS5yZXNwb25zZVR5cGU9ImRvY3VtZW50In19O2UueGhyPXR9KSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe3ZhciB0PWUueGhyLG49ZS5mbGFncyxyPWZ1bmN0aW9uKGUsdCl7dGhpcy5jYWNoZT17fSx0aGlzLm9ubG9hZD1lLHRoaXMub25jb21wbGV0ZT10LHRoaXMuaW5mbGlnaHQ9MCx0aGlzLnBlbmRpbmc9e319O3IucHJvdG90eXBlPXthZGROb2RlczpmdW5jdGlvbihlKXt0aGlzLmluZmxpZ2h0Kz1lLmxlbmd0aDtmb3IodmFyIHQsbj0wLHI9ZS5sZW5ndGg7cj5uJiYodD1lW25dKTtuKyspdGhpcy5yZXF1aXJlKHQpO3RoaXMuY2hlY2tEb25lKCl9LGFkZE5vZGU6ZnVuY3Rpb24oZSl7dGhpcy5pbmZsaWdodCsrLHRoaXMucmVxdWlyZShlKSx0aGlzLmNoZWNrRG9uZSgpfSxyZXF1aXJlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3JjfHxlLmhyZWY7ZS5fX25vZGVVcmw9dCx0aGlzLmRlZHVwZSh0LGUpfHx0aGlzLmZldGNoKHQsZSl9LGRlZHVwZTpmdW5jdGlvbihlLHQpe2lmKHRoaXMucGVuZGluZ1tlXSlyZXR1cm4gdGhpcy5wZW5kaW5nW2VdLnB1c2godCksITA7cmV0dXJuIHRoaXMuY2FjaGVbZV0/KHRoaXMub25sb2FkKGUsdCx0aGlzLmNhY2hlW2VdKSx0aGlzLnRhaWwoKSwhMCk6KHRoaXMucGVuZGluZ1tlXT1bdF0sITEpfSxmZXRjaDpmdW5jdGlvbihlLHIpe2lmKG4ubG9hZCYmY29uc29sZS5sb2coImZldGNoIixlLHIpLGUpaWYoZS5tYXRjaCgvXmRhdGE6Lykpe3ZhciBvPWUuc3BsaXQoIiwiKSxpPW9bMF0sYT1vWzFdO2E9aS5pbmRleE9mKCI7YmFzZTY0Iik+LTE/YXRvYihhKTpkZWNvZGVVUklDb21wb25lbnQoYSksc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMucmVjZWl2ZShlLHIsbnVsbCxhKX0uYmluZCh0aGlzKSwwKX1lbHNle3ZhciBzPWZ1bmN0aW9uKHQsbixvKXt0aGlzLnJlY2VpdmUoZSxyLHQsbixvKX0uYmluZCh0aGlzKTt0LmxvYWQoZSxzKX1lbHNlIHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnJlY2VpdmUoZSxyLHtlcnJvcjoiaHJlZiBtdXN0IGJlIHNwZWNpZmllZCJ9LG51bGwpfS5iaW5kKHRoaXMpLDApfSxyZWNlaXZlOmZ1bmN0aW9uKGUsdCxuLHIsbyl7dGhpcy5jYWNoZVtlXT1yO2Zvcih2YXIgaSxhPXRoaXMucGVuZGluZ1tlXSxzPTAsYz1hLmxlbmd0aDtjPnMmJihpPWFbc10pO3MrKyl0aGlzLm9ubG9hZChlLGkscixuLG8pLHRoaXMudGFpbCgpO3RoaXMucGVuZGluZ1tlXT1udWxsfSx0YWlsOmZ1bmN0aW9uKCl7LS10aGlzLmluZmxpZ2h0LHRoaXMuY2hlY2tEb25lKCl9LGNoZWNrRG9uZTpmdW5jdGlvbigpe3RoaXMuaW5mbGlnaHR8fHRoaXMub25jb21wbGV0ZSgpfX0sZS5Mb2FkZXI9cn0pLHdpbmRvdy5IVE1MSW1wb3J0cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oZSl7dGhpcy5hZGRDYWxsYmFjaz1lLHRoaXMubW89bmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5oYW5kbGVyLmJpbmQodGhpcykpfTt0LnByb3RvdHlwZT17aGFuZGxlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0wLHI9ZS5sZW5ndGg7cj5uJiYodD1lW25dKTtuKyspImNoaWxkTGlzdCI9PT10LnR5cGUmJnQuYWRkZWROb2Rlcy5sZW5ndGgmJnRoaXMuYWRkZWROb2Rlcyh0LmFkZGVkTm9kZXMpfSxhZGRlZE5vZGVzOmZ1bmN0aW9uKGUpe3RoaXMuYWRkQ2FsbGJhY2smJnRoaXMuYWRkQ2FsbGJhY2soZSk7Zm9yKHZhciB0LG49MCxyPWUubGVuZ3RoO3I+biYmKHQ9ZVtuXSk7bisrKXQuY2hpbGRyZW4mJnQuY2hpbGRyZW4ubGVuZ3RoJiZ0aGlzLmFkZGVkTm9kZXModC5jaGlsZHJlbil9LG9ic2VydmU6ZnVuY3Rpb24oZSl7dGhpcy5tby5vYnNlcnZlKGUse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9fSxlLk9ic2VydmVyPXR9KSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuImxpbmsiPT09ZS5sb2NhbE5hbWUmJmUucmVsPT09dX1mdW5jdGlvbiBuKGUpe3ZhciB0PXIoZSk7cmV0dXJuImRhdGE6dGV4dC9qYXZhc2NyaXB0O2NoYXJzZXQ9dXRmLTgsIitlbmNvZGVVUklDb21wb25lbnQodCl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gZS50ZXh0Q29udGVudCtvKGUpfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9ZS5vd25lckRvY3VtZW50O3QuX19pbXBvcnRlZFNjcmlwdHM9dC5fX2ltcG9ydGVkU2NyaXB0c3x8MDt2YXIgbj1lLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxyPXQuX19pbXBvcnRlZFNjcmlwdHM/Ii0iK3QuX19pbXBvcnRlZFNjcmlwdHM6IiI7cmV0dXJuIHQuX19pbXBvcnRlZFNjcmlwdHMrKywiXG4vLyMgc291cmNlVVJMPSIrbityKyIuanNcbiJ9ZnVuY3Rpb24gaShlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTtyZXR1cm4gdC50ZXh0Q29udGVudD1lLnRleHRDb250ZW50LGEucmVzb2x2ZVVybHNJblN0eWxlKHQpLHR9dmFyIGE9ZS5wYXRoLHM9ZS5yb290RG9jdW1lbnQsYz1lLmZsYWdzLGQ9ZS5pc0lFLHU9ZS5JTVBPUlRfTElOS19UWVBFLGw9ImxpbmtbcmVsPSIrdSsiXSIsaD17ZG9jdW1lbnRTZWxlY3RvcnM6bCxpbXBvcnRzU2VsZWN0b3JzOltsLCJsaW5rW3JlbD1zdHlsZXNoZWV0XTpub3QoW3R5cGVdKSIsInN0eWxlOm5vdChbdHlwZV0pIiwic2NyaXB0Om5vdChbdHlwZV0pIiwnc2NyaXB0W3R5cGU9ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiXScsJ3NjcmlwdFt0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiXSddLmpvaW4oIiwiKSxtYXA6e2xpbms6InBhcnNlTGluayIsc2NyaXB0OiJwYXJzZVNjcmlwdCIsc3R5bGU6InBhcnNlU3R5bGUifSxkeW5hbWljRWxlbWVudHM6W10scGFyc2VOZXh0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5uZXh0VG9QYXJzZSgpO2UmJnRoaXMucGFyc2UoZSl9LHBhcnNlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuaXNQYXJzZWQoZSkpcmV0dXJuIHZvaWQoYy5wYXJzZSYmY29uc29sZS5sb2coIlslc10gaXMgYWxyZWFkeSBwYXJzZWQiLGUubG9jYWxOYW1lKSk7dmFyIHQ9dGhpc1t0aGlzLm1hcFtlLmxvY2FsTmFtZV1dO3QmJih0aGlzLm1hcmtQYXJzaW5nKGUpLHQuY2FsbCh0aGlzLGUpKX0scGFyc2VEeW5hbWljOmZ1bmN0aW9uKGUsdCl7dGhpcy5keW5hbWljRWxlbWVudHMucHVzaChlKSx0fHx0aGlzLnBhcnNlTmV4dCgpfSxtYXJrUGFyc2luZzpmdW5jdGlvbihlKXtjLnBhcnNlJiZjb25zb2xlLmxvZygicGFyc2luZyIsZSksdGhpcy5wYXJzaW5nRWxlbWVudD1lfSxtYXJrUGFyc2luZ0NvbXBsZXRlOmZ1bmN0aW9uKGUpe2UuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrRHluYW1pY1BhcnNpbmdDb21wbGV0ZShlKSxlLl9faW1wb3J0RWxlbWVudCYmKGUuX19pbXBvcnRFbGVtZW50Ll9faW1wb3J0UGFyc2VkPSEwLHRoaXMubWFya0R5bmFtaWNQYXJzaW5nQ29tcGxldGUoZS5fX2ltcG9ydEVsZW1lbnQpKSx0aGlzLnBhcnNpbmdFbGVtZW50PW51bGwsYy5wYXJzZSYmY29uc29sZS5sb2coImNvbXBsZXRlZCIsZSl9LG1hcmtEeW5hbWljUGFyc2luZ0NvbXBsZXRlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZHluYW1pY0VsZW1lbnRzLmluZGV4T2YoZSk7dD49MCYmdGhpcy5keW5hbWljRWxlbWVudHMuc3BsaWNlKHQsMSl9LHBhcnNlSW1wb3J0OmZ1bmN0aW9uKGUpe2lmKGVbImltcG9ydCJdPWUuX19kb2Msd2luZG93LkhUTUxJbXBvcnRzLl9faW1wb3J0c1BhcnNpbmdIb29rJiZ3aW5kb3cuSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2soZSksZVsiaW1wb3J0Il0mJihlWyJpbXBvcnQiXS5fX2ltcG9ydFBhcnNlZD0hMCksdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGUpLGUuZGlzcGF0Y2hFdmVudChlLl9fcmVzb3VyY2UmJiFlLl9fZXJyb3I/bmV3IEN1c3RvbUV2ZW50KCJsb2FkIix7YnViYmxlczohMX0pOm5ldyBDdXN0b21FdmVudCgiZXJyb3IiLHtidWJibGVzOiExfSkpLGUuX19wZW5kaW5nKWZvcih2YXIgdDtlLl9fcGVuZGluZy5sZW5ndGg7KXQ9ZS5fX3BlbmRpbmcuc2hpZnQoKSx0JiZ0KHt0YXJnZXQ6ZX0pO3RoaXMucGFyc2VOZXh0KCl9LHBhcnNlTGluazpmdW5jdGlvbihlKXt0KGUpP3RoaXMucGFyc2VJbXBvcnQoZSk6KGUuaHJlZj1lLmhyZWYsdGhpcy5wYXJzZUdlbmVyaWMoZSkpfSxwYXJzZVN0eWxlOmZ1bmN0aW9uKGUpe3ZhciB0PWU7ZT1pKGUpLHQuX19hcHBsaWVkRWxlbWVudD1lLGUuX19pbXBvcnRFbGVtZW50PXQsdGhpcy5wYXJzZUdlbmVyaWMoZSl9LHBhcnNlR2VuZXJpYzpmdW5jdGlvbihlKXt0aGlzLnRyYWNrRWxlbWVudChlKSx0aGlzLmFkZEVsZW1lbnRUb0RvY3VtZW50KGUpfSxyb290SW1wb3J0Rm9yRWxlbWVudDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZTt0Lm93bmVyRG9jdW1lbnQuX19pbXBvcnRMaW5rOyl0PXQub3duZXJEb2N1bWVudC5fX2ltcG9ydExpbms7cmV0dXJuIHR9LGFkZEVsZW1lbnRUb0RvY3VtZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucm9vdEltcG9ydEZvckVsZW1lbnQoZS5fX2ltcG9ydEVsZW1lbnR8fGUpO3QucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0KX0sdHJhY2tFbGVtZW50OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxyPWZ1bmN0aW9uKG8pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsciksZS5yZW1vdmVFdmVudExpc3RlbmVyKCJlcnJvciIsciksdCYmdChvKSxuLm1hcmtQYXJzaW5nQ29tcGxldGUoZSksbi5wYXJzZU5leHQoKX07aWYoZS5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixyKSxlLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixyKSxkJiYic3R5bGUiPT09ZS5sb2NhbE5hbWUpe3ZhciBvPSExO2lmKC0xPT1lLnRleHRDb250ZW50LmluZGV4T2YoIkBpbXBvcnQiKSlvPSEwO2Vsc2UgaWYoZS5zaGVldCl7bz0hMDtmb3IodmFyIGksYT1lLnNoZWV0LmNzc1J1bGVzLHM9YT9hLmxlbmd0aDowLGM9MDtzPmMmJihpPWFbY10pO2MrKylpLnR5cGU9PT1DU1NSdWxlLklNUE9SVF9SVUxFJiYobz1vJiZCb29sZWFuKGkuc3R5bGVTaGVldCkpfW8mJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJsb2FkIix7YnViYmxlczohMX0pKX0pfX0scGFyc2VTY3JpcHQ6ZnVuY3Rpb24odCl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7ci5fX2ltcG9ydEVsZW1lbnQ9dCxyLnNyYz10LnNyYz90LnNyYzpuKHQpLGUuY3VycmVudFNjcmlwdD10LHRoaXMudHJhY2tFbGVtZW50KHIsZnVuY3Rpb24odCl7ci5wYXJlbnROb2RlJiZyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQociksZS5jdXJyZW50U2NyaXB0PW51bGx9KSx0aGlzLmFkZEVsZW1lbnRUb0RvY3VtZW50KHIpfSxuZXh0VG9QYXJzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXlQYXJzZT1bXSwhdGhpcy5wYXJzaW5nRWxlbWVudCYmKHRoaXMubmV4dFRvUGFyc2VJbkRvYyhzKXx8dGhpcy5uZXh0VG9QYXJzZUR5bmFtaWMoKSl9LG5leHRUb1BhcnNlSW5Eb2M6ZnVuY3Rpb24oZSxuKXtpZihlJiZ0aGlzLl9tYXlQYXJzZS5pbmRleE9mKGUpPDApe3RoaXMuX21heVBhcnNlLnB1c2goZSk7Zm9yKHZhciByLG89ZS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMucGFyc2VTZWxlY3RvcnNGb3JOb2RlKGUpKSxpPTAsYT1vLmxlbmd0aDthPmkmJihyPW9baV0pO2krKylpZighdGhpcy5pc1BhcnNlZChyKSlyZXR1cm4gdGhpcy5oYXNSZXNvdXJjZShyKT90KHIpP3RoaXMubmV4dFRvUGFyc2VJbkRvYyhyLl9fZG9jLHIpOnI6dm9pZCAwfXJldHVybiBufSxuZXh0VG9QYXJzZUR5bmFtaWM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5keW5hbWljRWxlbWVudHNbMF19LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnR8fGU7cmV0dXJuIHQ9PT1zP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX2ltcG9ydFBhcnNlZH0sbmVlZHNEeW5hbWljUGFyc2luZzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5keW5hbWljRWxlbWVudHMuaW5kZXhPZihlKT49MH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSkmJnZvaWQgMD09PWUuX19kb2M/ITE6ITB9fTtlLnBhcnNlcj1oLGUuSU1QT1JUX1NFTEVDVE9SPWx9KSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIG4oZSxhKX1mdW5jdGlvbiBuKGUsdCl7cmV0dXJuImxpbmsiPT09ZS5sb2NhbE5hbWUmJmUuZ2V0QXR0cmlidXRlKCJyZWwiKT09PXR9ZnVuY3Rpb24gcihlKXtyZXR1cm4hIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwiYmFzZVVSSSIpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoYSk7bi5fVVJMPXQ7dmFyIG89bi5jcmVhdGVFbGVtZW50KCJiYXNlIik7by5zZXRBdHRyaWJ1dGUoImhyZWYiLHQpLG4uYmFzZVVSSXx8cihuKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sImJhc2VVUkkiLHt2YWx1ZTp0fSk7dmFyIGk9bi5jcmVhdGVFbGVtZW50KCJtZXRhIik7cmV0dXJuIGkuc2V0QXR0cmlidXRlKCJjaGFyc2V0IiwidXRmLTgiKSxuLmhlYWQuYXBwZW5kQ2hpbGQoaSksbi5oZWFkLmFwcGVuZENoaWxkKG8pLG4uYm9keS5pbm5lckhUTUw9ZSx3aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwKG4pLG59dmFyIGk9ZS5mbGFncyxhPWUuSU1QT1JUX0xJTktfVFlQRSxzPWUuSU1QT1JUX1NFTEVDVE9SLGM9ZS5yb290RG9jdW1lbnQsZD1lLkxvYWRlcix1PWUuT2JzZXJ2ZXIsbD1lLnBhcnNlcixoPXtkb2N1bWVudHM6e30sZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOnMsaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnM6W3NdLmpvaW4oIiwiKSxsb2FkTm9kZTpmdW5jdGlvbihlKXtwLmFkZE5vZGUoZSl9LGxvYWRTdWJ0cmVlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubWFyc2hhbE5vZGVzKGUpO3AuYWRkTm9kZXModCl9LG1hcnNoYWxOb2RlczpmdW5jdGlvbihlKXtyZXR1cm4gZS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMubG9hZFNlbGVjdG9yc0Zvck5vZGUoZSkpfSxsb2FkU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnR8fGU7cmV0dXJuIHQ9PT1jP3RoaXMuZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOnRoaXMuaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnN9LGxvYWRlZDpmdW5jdGlvbihlLG4scixhLHMpe2lmKGkubG9hZCYmY29uc29sZS5sb2coImxvYWRlZCIsZSxuKSxuLl9fcmVzb3VyY2U9cixuLl9fZXJyb3I9YSx0KG4pKXt2YXIgYz10aGlzLmRvY3VtZW50c1tlXTt2b2lkIDA9PT1jJiYoYz1hP251bGw6byhyLHN8fGUpLGMmJihjLl9faW1wb3J0TGluaz1uLHRoaXMuYm9vdERvY3VtZW50KGMpKSx0aGlzLmRvY3VtZW50c1tlXT1jKSxuLl9fZG9jPWN9bC5wYXJzZU5leHQoKX0sYm9vdERvY3VtZW50OmZ1bmN0aW9uKGUpe3RoaXMubG9hZFN1YnRyZWUoZSksdGhpcy5vYnNlcnZlci5vYnNlcnZlKGUpLGwucGFyc2VOZXh0KCl9LGxvYWRlZEFsbDpmdW5jdGlvbigpe2wucGFyc2VOZXh0KCl9fSxwPW5ldyBkKGgubG9hZGVkLmJpbmQoaCksaC5sb2FkZWRBbGwuYmluZChoKSk7aWYoaC5vYnNlcnZlcj1uZXcgdSwhZG9jdW1lbnQuYmFzZVVSSSl7dmFyIGY9e2dldDpmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoImJhc2UiKTtyZXR1cm4gZT9lLmhyZWY6d2luZG93LmxvY2F0aW9uLmhyZWZ9LGNvbmZpZ3VyYWJsZTohMH07T2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LCJiYXNlVVJJIixmKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYywiYmFzZVVSSSIsZil9ZS5pbXBvcnRlcj1oLGUuaW1wb3J0TG9hZGVyPXB9KSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyc2VyLG49ZS5pbXBvcnRlcixyPXthZGRlZDpmdW5jdGlvbihlKXtmb3IodmFyIHIsbyxpLGEscz0wLGM9ZS5sZW5ndGg7Yz5zJiYoYT1lW3NdKTtzKyspcnx8KHI9YS5vd25lckRvY3VtZW50LG89dC5pc1BhcnNlZChyKSksaT10aGlzLnNob3VsZExvYWROb2RlKGEpLGkmJm4ubG9hZE5vZGUoYSksdGhpcy5zaG91bGRQYXJzZU5vZGUoYSkmJm8mJnQucGFyc2VEeW5hbWljKGEsaSl9LHNob3VsZExvYWROb2RlOmZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZSYmby5jYWxsKGUsbi5sb2FkU2VsZWN0b3JzRm9yTm9kZShlKSl9LHNob3VsZFBhcnNlTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGUmJm8uY2FsbChlLHQucGFyc2VTZWxlY3RvcnNGb3JOb2RlKGUpKX19O24ub2JzZXJ2ZXIuYWRkQ2FsbGJhY2s9ci5hZGRlZC5iaW5kKHIpO3ZhciBvPUhUTUxFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3J9KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7d2luZG93LkhUTUxJbXBvcnRzLmltcG9ydGVyLmJvb3REb2N1bWVudChvKX12YXIgbj1lLmluaXRpYWxpemVNb2R1bGVzLHI9ZS5pc0lFO2lmKCFlLnVzZU5hdGl2ZSl7ciYmImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkN1c3RvbUV2ZW50Iik7cmV0dXJuIG4uaW5pdEN1c3RvbUV2ZW50KGUsQm9vbGVhbih0LmJ1YmJsZXMpLEJvb2xlYW4odC5jYW5jZWxhYmxlKSx0LmRldGFpbCksbi5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJkZWZhdWx0UHJldmVudGVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9fSl9LG59LHdpbmRvdy5DdXN0b21FdmVudC5wcm90b3R5cGU9d2luZG93LkV2ZW50LnByb3RvdHlwZSksbigpO3ZhciBvPWUucm9vdERvY3VtZW50OyJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHwiaW50ZXJhY3RpdmUiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSYmIXdpbmRvdy5hdHRhY2hFdmVudD90KCk6ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsdCl9fSh3aW5kb3cuSFRNTEltcG9ydHMpLHdpbmRvdy5DdXN0b21FbGVtZW50cz13aW5kb3cuQ3VzdG9tRWxlbWVudHN8fHtmbGFnczp7fX0sZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mbGFncyxuPVtdLHI9ZnVuY3Rpb24oZSl7bi5wdXNoKGUpfSxvPWZ1bmN0aW9uKCl7bi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX07ZS5hZGRNb2R1bGU9cixlLmluaXRpYWxpemVNb2R1bGVzPW8sZS5oYXNOYXRpdmU9Qm9vbGVhbihkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpLGUuaXNJRT0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxlLnVzZU5hdGl2ZT0hdC5yZWdpc3RlciYmZS5oYXNOYXRpdmUmJiF3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJighd2luZG93LkhUTUxJbXBvcnRzfHx3aW5kb3cuSFRNTEltcG9ydHMudXNlTmF0aXZlKX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSk/ITA6dm9pZCByKGUsdCl9KSxyKGUsdCl9ZnVuY3Rpb24gbihlLHQscil7dmFyIG89ZS5maXJzdEVsZW1lbnRDaGlsZDtpZighbylmb3Iobz1lLmZpcnN0Q2hpbGQ7byYmby5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylvPW8ubmV4dFNpYmxpbmc7Zm9yKDtvOyl0KG8scikhPT0hMCYmbihvLHQsciksbz1vLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gbnVsbH1mdW5jdGlvbiByKGUsbil7Zm9yKHZhciByPWUuc2hhZG93Um9vdDtyOyl0KHIsbikscj1yLm9sZGVyU2hhZG93Um9vdH1mdW5jdGlvbiBvKGUsdCl7aShlLHQsW10pfWZ1bmN0aW9uIGkoZSx0LG4pe2lmKGU9d2luZG93LndyYXAoZSksIShuLmluZGV4T2YoZSk+PTApKXtuLnB1c2goZSk7Zm9yKHZhciByLG89ZS5xdWVyeVNlbGVjdG9yQWxsKCJsaW5rW3JlbD0iK2ErIl0iKSxzPTAsYz1vLmxlbmd0aDtjPnMmJihyPW9bc10pO3MrKylyWyJpbXBvcnQiXSYmaShyWyJpbXBvcnQiXSx0LG4pO3QoZSl9fXZhciBhPXdpbmRvdy5IVE1MSW1wb3J0cz93aW5kb3cuSFRNTEltcG9ydHMuSU1QT1JUX0xJTktfVFlQRToibm9uZSI7ZS5mb3JEb2N1bWVudFRyZWU9byxlLmZvclN1YnRyZWU9dH0pLHdpbmRvdy5DdXN0b21FbGVtZW50cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3JldHVybiBuKGUsdCl8fHIoZSx0KX1mdW5jdGlvbiBuKHQsbil7cmV0dXJuIGUudXBncmFkZSh0LG4pPyEwOnZvaWQobiYmYSh0KSl9ZnVuY3Rpb24gcihlLHQpe2coZSxmdW5jdGlvbihlKXtyZXR1cm4gbihlLHQpPyEwOnZvaWQgMH0pfWZ1bmN0aW9uIG8oZSl7TC5wdXNoKGUpLEV8fChFPSEwLHNldFRpbWVvdXQoaSkpfWZ1bmN0aW9uIGkoKXtFPSExO2Zvcih2YXIgZSx0PUwsbj0wLHI9dC5sZW5ndGg7cj5uJiYoZT10W25dKTtuKyspZSgpO0w9W119ZnVuY3Rpb24gYShlKXt5P28oZnVuY3Rpb24oKXtzKGUpfSk6cyhlKX1mdW5jdGlvbiBzKGUpe2UuX191cGdyYWRlZF9fJiYhZS5fX2F0dGFjaGVkJiYoZS5fX2F0dGFjaGVkPSEwLGUuYXR0YWNoZWRDYWxsYmFjayYmZS5hdHRhY2hlZENhbGxiYWNrKCkpfWZ1bmN0aW9uIGMoZSl7ZChlKSxnKGUsZnVuY3Rpb24oZSl7ZChlKX0pfWZ1bmN0aW9uIGQoZSl7eT9vKGZ1bmN0aW9uKCl7dShlKX0pOnUoZSl9ZnVuY3Rpb24gdShlKXtlLl9fdXBncmFkZWRfXyYmZS5fX2F0dGFjaGVkJiYoZS5fX2F0dGFjaGVkPSExLGUuZGV0YWNoZWRDYWxsYmFjayYmZS5kZXRhY2hlZENhbGxiYWNrKCkpfWZ1bmN0aW9uIGwoZSl7Zm9yKHZhciB0PWUsbj13aW5kb3cud3JhcChkb2N1bWVudCk7dDspe2lmKHQ9PW4pcmV0dXJuITA7dD10LnBhcmVudE5vZGV8fHQubm9kZVR5cGU9PT1Ob2RlLkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUmJnQuaG9zdH19ZnVuY3Rpb24gaChlKXtpZihlLnNoYWRvd1Jvb3QmJiFlLnNoYWRvd1Jvb3QuX193YXRjaGVkKXt3LmRvbSYmY29uc29sZS5sb2coIndhdGNoaW5nIHNoYWRvdy1yb290IGZvcjogIixlLmxvY2FsTmFtZSk7Zm9yKHZhciB0PWUuc2hhZG93Um9vdDt0OyltKHQpLHQ9dC5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIHAoZSxuKXtpZih3LmRvbSl7dmFyIHI9blswXTtpZihyJiYiY2hpbGRMaXN0Ij09PXIudHlwZSYmci5hZGRlZE5vZGVzJiZyLmFkZGVkTm9kZXMpe2Zvcih2YXIgbz1yLmFkZGVkTm9kZXNbMF07byYmbyE9PWRvY3VtZW50JiYhby5ob3N0OylvPW8ucGFyZW50Tm9kZTt2YXIgaT1vJiYoby5VUkx8fG8uX1VSTHx8by5ob3N0JiZvLmhvc3QubG9jYWxOYW1lKXx8IiI7aT1pLnNwbGl0KCIvPyIpLnNoaWZ0KCkuc3BsaXQoIi8iKS5wb3AoKX1jb25zb2xlLmdyb3VwKCJtdXRhdGlvbnMgKCVkKSBbJXNdIixuLmxlbmd0aCxpfHwiIil9dmFyIGE9bChlKTtuLmZvckVhY2goZnVuY3Rpb24oZSl7ImNoaWxkTGlzdCI9PT1lLnR5cGUmJihNKGUuYWRkZWROb2RlcyxmdW5jdGlvbihlKXtlLmxvY2FsTmFtZSYmdChlLGEpfSksTShlLnJlbW92ZWROb2RlcyxmdW5jdGlvbihlKXtlLmxvY2FsTmFtZSYmYyhlKX0pKX0pLHcuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gZihlKXtmb3IoZT13aW5kb3cud3JhcChlKSxlfHwoZT13aW5kb3cud3JhcChkb2N1bWVudCkpO2UucGFyZW50Tm9kZTspZT1lLnBhcmVudE5vZGU7dmFyIHQ9ZS5fX29ic2VydmVyO3QmJihwKGUsdC50YWtlUmVjb3JkcygpKSxpKCkpfWZ1bmN0aW9uIG0oZSl7aWYoIWUuX19vYnNlcnZlcil7dmFyIHQ9bmV3IE11dGF0aW9uT2JzZXJ2ZXIocC5iaW5kKHRoaXMsZSkpO3Qub2JzZXJ2ZShlLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pLGUuX19vYnNlcnZlcj10fX1mdW5jdGlvbiB2KGUpe2U9d2luZG93LndyYXAoZSksdy5kb20mJmNvbnNvbGUuZ3JvdXAoInVwZ3JhZGVEb2N1bWVudDogIixlLmJhc2VVUkkuc3BsaXQoIi8iKS5wb3AoKSk7dmFyIG49ZT09PXdpbmRvdy53cmFwKGRvY3VtZW50KTt0KGUsbiksbShlKSx3LmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIF8oZSl7YihlLHYpfXZhciB3PWUuZmxhZ3MsZz1lLmZvclN1YnRyZWUsYj1lLmZvckRvY3VtZW50VHJlZSx5PSF3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9PT13aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyO2UuaGFzUG9seWZpbGxNdXRhdGlvbnM9eTt2YXIgRT0hMSxMPVtdLE09QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxUPUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7VCYmKEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q9ZnVuY3Rpb24oKXt2YXIgZT1ULmNhbGwodGhpcyk7cmV0dXJuIHdpbmRvdy5DdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxlfSksZS53YXRjaFNoYWRvdz1oLGUudXBncmFkZURvY3VtZW50VHJlZT1fLGUudXBncmFkZURvY3VtZW50PXYsZS51cGdyYWRlU3VidHJlZT1yLGUudXBncmFkZUFsbD10LGUuYXR0YWNoZWQ9YSxlLnRha2VSZWNvcmRzPWZ9KSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtpZighdC5fX3VwZ3JhZGVkX18mJnQubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIG89dC5nZXRBdHRyaWJ1dGUoImlzIiksaT1lLmdldFJlZ2lzdGVyZWREZWZpbml0aW9uKHQubG9jYWxOYW1lKXx8ZS5nZXRSZWdpc3RlcmVkRGVmaW5pdGlvbihvKTtpZihpJiYobyYmaS50YWc9PXQubG9jYWxOYW1lfHwhbyYmIWlbImV4dGVuZHMiXSkpcmV0dXJuIG4odCxpLHIpfX1mdW5jdGlvbiBuKHQsbixvKXtyZXR1cm4gYS51cGdyYWRlJiZjb25zb2xlLmdyb3VwKCJ1cGdyYWRlOiIsdC5sb2NhbE5hbWUpLG4uaXMmJnQuc2V0QXR0cmlidXRlKCJpcyIsbi5pcykscih0LG4pLHQuX191cGdyYWRlZF9fPSEwLGkodCksbyYmZS5hdHRhY2hlZCh0KSxlLnVwZ3JhZGVTdWJ0cmVlKHQsbyksYS51cGdyYWRlJiZjb25zb2xlLmdyb3VwRW5kKCksdH1mdW5jdGlvbiByKGUsdCl7T2JqZWN0Ll9fcHJvdG9fXz9lLl9fcHJvdG9fXz10LnByb3RvdHlwZToobyhlLHQucHJvdG90eXBlLHRbIm5hdGl2ZSJdKSxlLl9fcHJvdG9fXz10LnByb3RvdHlwZSl9ZnVuY3Rpb24gbyhlLHQsbil7Zm9yKHZhciByPXt9LG89dDtvIT09biYmbyE9PUhUTUxFbGVtZW50LnByb3RvdHlwZTspe2Zvcih2YXIgaSxhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG8pLHM9MDtpPWFbc107cysrKXJbaV18fChPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobyxpKSkscltpXT0xKTtvPU9iamVjdC5nZXRQcm90b3R5cGVPZihvKX19ZnVuY3Rpb24gaShlKXtlLmNyZWF0ZWRDYWxsYmFjayYmZS5jcmVhdGVkQ2FsbGJhY2soKX12YXIgYT1lLmZsYWdzO2UudXBncmFkZT10LGUudXBncmFkZVdpdGhEZWZpbml0aW9uPW4sZS5pbXBsZW1lbnRQcm90b3R5cGU9cn0pLHdpbmRvdy5DdXN0b21FbGVtZW50cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBjPXJ8fHt9O2lmKCF0KXRocm93IG5ldyBFcnJvcigiZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OiBmaXJzdCBhcmd1bWVudCBgbmFtZWAgbXVzdCBub3QgYmUgZW1wdHkiKTtpZih0LmluZGV4T2YoIi0iKTwwKXRocm93IG5ldyBFcnJvcigiZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OiBmaXJzdCBhcmd1bWVudCAoJ25hbWUnKSBtdXN0IGNvbnRhaW4gYSBkYXNoICgnLScpLiBBcmd1bWVudCBwcm92aWRlZCB3YXMgJyIrU3RyaW5nKHQpKyInLiIpO2lmKG8odCkpdGhyb3cgbmV3IEVycm9yKCJGYWlsZWQgdG8gZXhlY3V0ZSAncmVnaXN0ZXJFbGVtZW50JyBvbiAnRG9jdW1lbnQnOiBSZWdpc3RyYXRpb24gZmFpbGVkIGZvciB0eXBlICciK1N0cmluZyh0KSsiJy4gVGhlIHR5cGUgbmFtZSBpcyBpbnZhbGlkLiIpO2lmKGQodCkpdGhyb3cgbmV3IEVycm9yKCJEdXBsaWNhdGVEZWZpbml0aW9uRXJyb3I6IGEgdHlwZSB3aXRoIG5hbWUgJyIrU3RyaW5nKHQpKyInIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCIpO3JldHVybiBjLnByb3RvdHlwZXx8KGMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKSksYy5fX25hbWU9dC50b0xvd2VyQ2FzZSgpLGMubGlmZWN5Y2xlPWMubGlmZWN5Y2xlfHx7fSxjLmFuY2VzdHJ5PWkoY1siZXh0ZW5kcyJdKSxhKGMpLHMoYyksbihjLnByb3RvdHlwZSksdShjLl9fbmFtZSxjKSxjLmN0b3I9bChjKSxjLmN0b3IucHJvdG90eXBlPWMucHJvdG90eXBlLGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPWMuY3RvcixlLnJlYWR5JiZfKGRvY3VtZW50KSxjLmN0b3J9ZnVuY3Rpb24gbihlKXtpZighZS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQpewp2YXIgdD1lLnNldEF0dHJpYnV0ZTtlLnNldEF0dHJpYnV0ZT1mdW5jdGlvbihlLG4pe3IuY2FsbCh0aGlzLGUsbix0KX07dmFyIG49ZS5yZW1vdmVBdHRyaWJ1dGU7ZS5yZW1vdmVBdHRyaWJ1dGU9ZnVuY3Rpb24oZSl7ci5jYWxsKHRoaXMsZSxudWxsLG4pfSxlLnNldEF0dHJpYnV0ZS5fcG9seWZpbGxlZD0hMH19ZnVuY3Rpb24gcihlLHQsbil7ZT1lLnRvTG93ZXJDYXNlKCk7dmFyIHI9dGhpcy5nZXRBdHRyaWJ1dGUoZSk7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIG89dGhpcy5nZXRBdHRyaWJ1dGUoZSk7dGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2smJm8hPT1yJiZ0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhlLHIsbyl9ZnVuY3Rpb24gbyhlKXtmb3IodmFyIHQ9MDt0PEUubGVuZ3RoO3QrKylpZihlPT09RVt0XSlyZXR1cm4hMH1mdW5jdGlvbiBpKGUpe3ZhciB0PWQoZSk7cmV0dXJuIHQ/aSh0WyJleHRlbmRzIl0pLmNvbmNhdChbdF0pOltdfWZ1bmN0aW9uIGEoZSl7Zm9yKHZhciB0LG49ZVsiZXh0ZW5kcyJdLHI9MDt0PWUuYW5jZXN0cnlbcl07cisrKW49dC5pcyYmdC50YWc7ZS50YWc9bnx8ZS5fX25hbWUsbiYmKGUuaXM9ZS5fX25hbWUpfWZ1bmN0aW9uIHMoZSl7aWYoIU9iamVjdC5fX3Byb3RvX18pe3ZhciB0PUhUTUxFbGVtZW50LnByb3RvdHlwZTtpZihlLmlzKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUudGFnKTt0PU9iamVjdC5nZXRQcm90b3R5cGVPZihuKX1mb3IodmFyIHIsbz1lLnByb3RvdHlwZSxpPSExO287KW89PXQmJihpPSEwKSxyPU9iamVjdC5nZXRQcm90b3R5cGVPZihvKSxyJiYoby5fX3Byb3RvX189ciksbz1yO2l8fGNvbnNvbGUud2FybihlLnRhZysiIHByb3RvdHlwZSBub3QgZm91bmQgaW4gcHJvdG90eXBlIGNoYWluIGZvciAiK2UuaXMpLGVbIm5hdGl2ZSJdPXR9fWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGcoVChlLnRhZyksZSl9ZnVuY3Rpb24gZChlKXtyZXR1cm4gZT9MW2UudG9Mb3dlckNhc2UoKV06dm9pZCAwfWZ1bmN0aW9uIHUoZSx0KXtMW2VdPXR9ZnVuY3Rpb24gbChlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYyhlKX19ZnVuY3Rpb24gaChlLHQsbil7cmV0dXJuIGU9PT1NP3AodCxuKTpOKGUsdCl9ZnVuY3Rpb24gcChlLHQpe2UmJihlPWUudG9Mb3dlckNhc2UoKSksdCYmKHQ9dC50b0xvd2VyQ2FzZSgpKTt2YXIgbj1kKHR8fGUpO2lmKG4pe2lmKGU9PW4udGFnJiZ0PT1uLmlzKXJldHVybiBuZXcgbi5jdG9yO2lmKCF0JiYhbi5pcylyZXR1cm4gbmV3IG4uY3Rvcn12YXIgcjtyZXR1cm4gdD8ocj1wKGUpLHIuc2V0QXR0cmlidXRlKCJpcyIsdCkscik6KHI9VChlKSxlLmluZGV4T2YoIi0iKT49MCYmYihyLEhUTUxFbGVtZW50KSxyKX1mdW5jdGlvbiBmKGUsdCl7dmFyIG49ZVt0XTtlW3RdPWZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHcoZSksZX19dmFyIG0sdj1lLmlzSUUsXz1lLnVwZ3JhZGVEb2N1bWVudFRyZWUsdz1lLnVwZ3JhZGVBbGwsZz1lLnVwZ3JhZGVXaXRoRGVmaW5pdGlvbixiPWUuaW1wbGVtZW50UHJvdG90eXBlLHk9ZS51c2VOYXRpdmUsRT1bImFubm90YXRpb24teG1sIiwiY29sb3ItcHJvZmlsZSIsImZvbnQtZmFjZSIsImZvbnQtZmFjZS1zcmMiLCJmb250LWZhY2UtdXJpIiwiZm9udC1mYWNlLWZvcm1hdCIsImZvbnQtZmFjZS1uYW1lIiwibWlzc2luZy1nbHlwaCJdLEw9e30sTT0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsVD1kb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpLE49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TLmJpbmQoZG9jdW1lbnQpO209T2JqZWN0Ll9fcHJvdG9fX3x8eT9mdW5jdGlvbihlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgdH06ZnVuY3Rpb24oZSx0KXtpZihlIGluc3RhbmNlb2YgdClyZXR1cm4hMDtmb3IodmFyIG49ZTtuOyl7aWYobj09PXQucHJvdG90eXBlKXJldHVybiEwO249bi5fX3Byb3RvX199cmV0dXJuITF9LGYoTm9kZS5wcm90b3R5cGUsImNsb25lTm9kZSIpLGYoZG9jdW1lbnQsImltcG9ydE5vZGUiKSx2JiYhZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5pbXBvcnROb2RlO2RvY3VtZW50LmltcG9ydE5vZGU9ZnVuY3Rpb24oKXt2YXIgdD1lLmFwcGx5KGRvY3VtZW50LGFyZ3VtZW50cyk7aWYodC5ub2RlVHlwZT09dC5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7cmV0dXJuIG4uYXBwZW5kQ2hpbGQodCksbn1yZXR1cm4gdH19KCksZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50PXQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudD1wLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUz1oLGUucmVnaXN0cnk9TCxlWyJpbnN0YW5jZW9mIl09bSxlLnJlc2VydmVkVGFnTGlzdD1FLGUuZ2V0UmVnaXN0ZXJlZERlZmluaXRpb249ZCxkb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnR9KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7YSh3aW5kb3cud3JhcChkb2N1bWVudCkpLHdpbmRvdy5DdXN0b21FbGVtZW50cy5yZWFkeT0hMDt2YXIgZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMTYpfTtlKGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5DdXN0b21FbGVtZW50cy5yZWFkeVRpbWU9RGF0ZS5ub3coKSx3aW5kb3cuSFRNTEltcG9ydHMmJih3aW5kb3cuQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD13aW5kb3cuQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lLXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeVRpbWUpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJXZWJDb21wb25lbnRzUmVhZHkiLHtidWJibGVzOiEwfSkpfSl9KX12YXIgbj1lLnVzZU5hdGl2ZSxyPWUuaW5pdGlhbGl6ZU1vZHVsZXMsbz1lLmlzSUU7aWYobil7dmFyIGk9ZnVuY3Rpb24oKXt9O2Uud2F0Y2hTaGFkb3c9aSxlLnVwZ3JhZGU9aSxlLnVwZ3JhZGVBbGw9aSxlLnVwZ3JhZGVEb2N1bWVudFRyZWU9aSxlLnVwZ3JhZGVTdWJ0cmVlPWksZS50YWtlUmVjb3Jkcz1pLGVbImluc3RhbmNlb2YiXT1mdW5jdGlvbihlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgdH19ZWxzZSByKCk7dmFyIGE9ZS51cGdyYWRlRG9jdW1lbnRUcmVlLHM9ZS51cGdyYWRlRG9jdW1lbnQ7aWYod2luZG93LndyYXB8fCh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/KHdpbmRvdy53cmFwPXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQsd2luZG93LnVud3JhcD13aW5kb3cuU2hhZG93RE9NUG9seWZpbGwudW53cmFwSWZOZWVkZWQpOndpbmRvdy53cmFwPXdpbmRvdy51bndyYXA9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSx3aW5kb3cuSFRNTEltcG9ydHMmJih3aW5kb3cuSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2s9ZnVuY3Rpb24oZSl7ZVsiaW1wb3J0Il0mJnMod3JhcChlWyJpbXBvcnQiXSkpfSksbyYmImZ1bmN0aW9uIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkN1c3RvbUV2ZW50Iik7cmV0dXJuIG4uaW5pdEN1c3RvbUV2ZW50KGUsQm9vbGVhbih0LmJ1YmJsZXMpLEJvb2xlYW4odC5jYW5jZWxhYmxlKSx0LmRldGFpbCksbi5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJkZWZhdWx0UHJldmVudGVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9fSl9LG59LHdpbmRvdy5DdXN0b21FdmVudC5wcm90b3R5cGU9d2luZG93LkV2ZW50LnByb3RvdHlwZSksImNvbXBsZXRlIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fGUuZmxhZ3MuZWFnZXIpdCgpO2Vsc2UgaWYoImludGVyYWN0aXZlIiE9PWRvY3VtZW50LnJlYWR5U3RhdGV8fHdpbmRvdy5hdHRhY2hFdmVudHx8d2luZG93LkhUTUxJbXBvcnRzJiYhd2luZG93LkhUTUxJbXBvcnRzLnJlYWR5KXt2YXIgYz13aW5kb3cuSFRNTEltcG9ydHMmJiF3aW5kb3cuSFRNTEltcG9ydHMucmVhZHk/IkhUTUxJbXBvcnRzTG9hZGVkIjoiRE9NQ29udGVudExvYWRlZCI7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoYyx0KX1lbHNlIHQoKX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSwidW5kZWZpbmVkIj09dHlwZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQmJiFmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7c3dpdGNoKGUpe2Nhc2UiJiI6cmV0dXJuIiZhbXA7IjtjYXNlIjwiOnJldHVybiImbHQ7IjtjYXNlIj4iOnJldHVybiImZ3Q7IjtjYXNlIsKgIjpyZXR1cm4iJm5ic3A7In19ZnVuY3Rpb24gdCh0KXtyZXR1cm4gdC5yZXBsYWNlKGEsZSl9dmFyIG49InRlbXBsYXRlIixyPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgidGVtcGxhdGUiKSxvPSEwO0hUTUxUZW1wbGF0ZUVsZW1lbnQ9ZnVuY3Rpb24oKXt9LEhUTUxUZW1wbGF0ZUVsZW1lbnQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKSxIVE1MVGVtcGxhdGVFbGVtZW50LmRlY29yYXRlPWZ1bmN0aW9uKGUpe2UuY29udGVudHx8KGUuY29udGVudD1yLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7Zm9yKHZhciBuO249ZS5maXJzdENoaWxkOyllLmNvbnRlbnQuYXBwZW5kQ2hpbGQobik7aWYobyl0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsImlubmVySFRNTCIse2dldDpmdW5jdGlvbigpe2Zvcih2YXIgZT0iIixuPXRoaXMuY29udGVudC5maXJzdENoaWxkO247bj1uLm5leHRTaWJsaW5nKWUrPW4ub3V0ZXJIVE1MfHx0KG4uZGF0YSk7cmV0dXJuIGV9LHNldDpmdW5jdGlvbihlKXtmb3Ioci5ib2R5LmlubmVySFRNTD1lLEhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwKHIpO3RoaXMuY29udGVudC5maXJzdENoaWxkOyl0aGlzLmNvbnRlbnQucmVtb3ZlQ2hpbGQodGhpcy5jb250ZW50LmZpcnN0Q2hpbGQpO2Zvcig7ci5ib2R5LmZpcnN0Q2hpbGQ7KXRoaXMuY29udGVudC5hcHBlbmRDaGlsZChyLmJvZHkuZmlyc3RDaGlsZCl9LGNvbmZpZ3VyYWJsZTohMH0pfWNhdGNoKGkpe289ITF9fSxIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcD1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1lLnF1ZXJ5U2VsZWN0b3JBbGwobiksbz0wLGk9ci5sZW5ndGg7aT5vJiYodD1yW29dKTtvKyspSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZSh0KX0sd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGZ1bmN0aW9uKCl7SFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAoZG9jdW1lbnQpfSk7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudDtkb2N1bWVudC5jcmVhdGVFbGVtZW50PWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBlPWkuYXBwbHkoZG9jdW1lbnQsYXJndW1lbnRzKTtyZXR1cm4idGVtcGxhdGUiPT1lLmxvY2FsTmFtZSYmSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZShlKSxlfTt2YXIgYT0vWyZcdTAwQTA8Pl0vZ30oKSxmdW5jdGlvbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO3QudGV4dENvbnRlbnQ9ImJvZHkge3RyYW5zaXRpb246IG9wYWNpdHkgZWFzZS1pbiAwLjJzOyB9IFxuYm9keVt1bnJlc29sdmVkXSB7b3BhY2l0eTogMDsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsgfSBcbiI7dmFyIG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiaGVhZCIpO24uaW5zZXJ0QmVmb3JlKHQsbi5maXJzdENoaWxkKX0od2luZG93LldlYkNvbXBvbmVudHMpOw==">
        </script>
        <!-- }}} Web Components -->
        <!-- {{{ JsZip -->
        <script type="text/javascript" src="data:application/x-javascript;base64,LyohDQoNCkpTWmlwIC0gQSBKYXZhc2NyaXB0IGNsYXNzIGZvciBnZW5lcmF0aW5nIGFuZCByZWFkaW5nIHppcCBmaWxlcw0KPGh0dHA6Ly9zdHVhcnRrLmNvbS9qc3ppcD4NCg0KKGMpIDIwMDktMjAxNCBTdHVhcnQgS25pZ2h0bGV5IDxzdHVhcnQgW2F0XSBzdHVhcnRrLmNvbT4NCkR1YWwgbGljZW5jZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIG9yIEdQTHYzLiBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9TdHVrL2pzemlwL21hc3Rlci9MSUNFTlNFLm1hcmtkb3duLg0KDQpKU1ppcCB1c2VzIHRoZSBsaWJyYXJ5IHBha28gcmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIDoNCmh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvcGFrby9ibG9iL21hc3Rlci9MSUNFTlNFDQoqLw0KIWZ1bmN0aW9uKGEpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9YSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sYSk7ZWxzZXt2YXIgYjsidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz9iPXdpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9iPWdsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJihiPXNlbGYpLGIuSlNaaXA9YSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gYShiLGMsZCl7ZnVuY3Rpb24gZShnLGgpe2lmKCFjW2ddKXtpZighYltnXSl7dmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWgmJmkpcmV0dXJuIGkoZywhMCk7aWYoZilyZXR1cm4gZihnLCEwKTt0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitnKyInIil9dmFyIGo9Y1tnXT17ZXhwb3J0czp7fX07YltnXVswXS5jYWxsKGouZXhwb3J0cyxmdW5jdGlvbihhKXt2YXIgYz1iW2ddWzFdW2FdO3JldHVybiBlKGM/YzphKX0saixqLmV4cG9ydHMsYSxiLGMsZCl9cmV0dXJuIGNbZ10uZXhwb3J0c31mb3IodmFyIGY9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsZz0wO2c8ZC5sZW5ndGg7ZysrKWUoZFtnXSk7cmV0dXJuIGV9KHsxOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO3ZhciBkPSJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSI7Yy5lbmNvZGU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZSxmLGcsaCxpLGo9IiIsaz0wO2s8YS5sZW5ndGg7KWI9YS5jaGFyQ29kZUF0KGsrKyksYz1hLmNoYXJDb2RlQXQoaysrKSxlPWEuY2hhckNvZGVBdChrKyspLGY9Yj4+MixnPSgzJmIpPDw0fGM+PjQsaD0oMTUmYyk8PDJ8ZT4+NixpPTYzJmUsaXNOYU4oYyk/aD1pPTY0OmlzTmFOKGUpJiYoaT02NCksaj1qK2QuY2hhckF0KGYpK2QuY2hhckF0KGcpK2QuY2hhckF0KGgpK2QuY2hhckF0KGkpO3JldHVybiBqfSxjLmRlY29kZT1mdW5jdGlvbihhKXt2YXIgYixjLGUsZixnLGgsaSxqPSIiLGs9MDtmb3IoYT1hLnJlcGxhY2UoL1teQS1aYS16MC05XCtcL1w9XS9nLCIiKTtrPGEubGVuZ3RoOylmPWQuaW5kZXhPZihhLmNoYXJBdChrKyspKSxnPWQuaW5kZXhPZihhLmNoYXJBdChrKyspKSxoPWQuaW5kZXhPZihhLmNoYXJBdChrKyspKSxpPWQuaW5kZXhPZihhLmNoYXJBdChrKyspKSxiPWY8PDJ8Zz4+NCxjPSgxNSZnKTw8NHxoPj4yLGU9KDMmaCk8PDZ8aSxqKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGIpLDY0IT1oJiYoais9U3RyaW5nLmZyb21DaGFyQ29kZShjKSksNjQhPWkmJihqKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGUpKTtyZXR1cm4gan19LHt9XSwyOltmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBjKCl7dGhpcy5jb21wcmVzc2VkU2l6ZT0wLHRoaXMudW5jb21wcmVzc2VkU2l6ZT0wLHRoaXMuY3JjMzI9MCx0aGlzLmNvbXByZXNzaW9uTWV0aG9kPW51bGwsdGhpcy5jb21wcmVzc2VkQ29udGVudD1udWxsfWMucHJvdG90eXBlPXtnZXRDb250ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGdldENvbXByZXNzZWRDb250ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9fSxiLmV4cG9ydHM9Y30se31dLDM6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7Yy5TVE9SRT17bWFnaWM6Ilx4MDBceDAwIixjb21wcmVzczpmdW5jdGlvbihhKXtyZXR1cm4gYX0sdW5jb21wcmVzczpmdW5jdGlvbihhKXtyZXR1cm4gYX0sY29tcHJlc3NJbnB1dFR5cGU6bnVsbCx1bmNvbXByZXNzSW5wdXRUeXBlOm51bGx9LGMuREVGTEFURT1hKCIuL2ZsYXRlIil9LHsiLi9mbGF0ZSI6OH1dLDQ6W2Z1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPWEoIi4vdXRpbHMiKSxkPVswLDE5OTY5NTk4OTQsMzk5MzkxOTc4OCwyNTY3NTI0Nzk0LDEyNDYzNDEzNywxODg2MDU3NjE1LDM5MTU2MjE2ODUsMjY1NzM5MjAzNSwyNDkyNjgyNzQsMjA0NDUwODMyNCwzNzcyMTE1MjMwLDI1NDcxNzc4NjQsMTYyOTQxOTk1LDIxMjU1NjEwMjEsMzg4NzYwNzA0NywyNDI4NDQ0MDQ5LDQ5ODUzNjU0OCwxNzg5OTI3NjY2LDQwODkwMTY2NDgsMjIyNzA2MTIxNCw0NTA1NDg4NjEsMTg0MzI1ODYwMyw0MTA3NTgwNzUzLDIyMTE2Nzc2MzksMzI1ODgzOTkwLDE2ODQ3NzcxNTIsNDI1MTEyMjA0MiwyMzIxOTI2NjM2LDMzNTYzMzQ4NywxNjYxMzY1NDY1LDQxOTUzMDI3NTUsMjM2NjExNTMxNyw5OTcwNzMwOTYsMTI4MTk1Mzg4NiwzNTc5ODU1MzMyLDI3MjQ2ODgyNDIsMTAwNjg4ODE0NSwxMjU4NjA3Njg3LDM1MjQxMDE2MjksMjc2ODk0MjQ0Myw5MDEwOTc3MjIsMTExOTAwMDY4NCwzNjg2NTE3MjA2LDI4OTgwNjU3MjgsODUzMDQ0NDUxLDExNzIyNjYxMDEsMzcwNTAxNTc1OSwyODgyNjE2NjY1LDY1MTc2Nzk4MCwxMzczNTAzNTQ2LDMzNjk1NTQzMDQsMzIxODEwNDU5OCw1NjU1MDcyNTMsMTQ1NDYyMTczMSwzNDg1MTExNzA1LDMwOTk0MzYzMDMsNjcxMjY2OTc0LDE1OTQxOTgwMjQsMzMyMjczMDkzMCwyOTcwMzQ3ODEyLDc5NTgzNTUyNywxNDgzMjMwMjI1LDMyNDQzNjcyNzUsMzA2MDE0OTU2NSwxOTk0MTQ2MTkyLDMxMTU4NTM0LDI1NjM5MDc3NzIsNDAyMzcxNzkzMCwxOTA3NDU5NDY1LDExMjYzNzIxNSwyNjgwMTUzMjUzLDM5MDQ0MjcwNTksMjAxMzc3NjI5MCwyNTE3MjIwMzYsMjUxNzIxNTM3NCwzNzc1ODMwMDQwLDIxMzc2NTY3NjMsMTQxMzc2ODEzLDI0MzkyNzc3MTksMzg2NTI3MTI5NywxODAyMTk1NDQ0LDQ3Njg2NDg2NiwyMjM4MDAxMzY4LDQwNjY1MDg4NzgsMTgxMjM3MDkyNSw0NTMwOTI3MzEsMjE4MTYyNTAyNSw0MTExNDUxMjIzLDE3MDYwODg5MDIsMzE0MDQyNzA0LDIzNDQ1MzIyMDIsNDI0MDAxNzUzMiwxNjU4NjU4MjcxLDM2NjYxOTk3NywyMzYyNjcwMzIzLDQyMjQ5OTQ0MDUsMTMwMzUzNTk2MCw5ODQ5NjE0ODYsMjc0NzAwNzA5MiwzNTY5MDM3NTM4LDEyNTYxNzA4MTcsMTAzNzYwNDMxMSwyNzY1MjEwNzMzLDM1NTQwNzk5OTUsMTEzMTAxNDUwNiw4Nzk2Nzk5OTYsMjkwOTI0MzQ2MiwzNjYzNzcxODU2LDExNDExMjQ0NjcsODU1ODQyMjc3LDI4NTI4MDE2MzEsMzcwODY0ODY0OSwxMzQyNTMzOTQ4LDY1NDQ1OTMwNiwzMTg4Mzk2MDQ4LDMzNzMwMTUxNzQsMTQ2NjQ3OTkwOSw1NDQxNzk2MzUsMzExMDUyMzkxMywzNDYyNTIyMDE1LDE1OTE2NzEwNTQsNzAyMTM4Nzc2LDI5NjY0NjA0NTAsMzM1Mjc5OTQxMiwxNTA0OTE4ODA3LDc4MzU1MTg3MywzMDgyNjQwNDQzLDMyMzM0NDI5ODksMzk4ODI5MjM4NCwyNTk2MjU0NjQ2LDYyMzE3MDY4LDE5NTc4MTA4NDIsMzkzOTg0NTk0NSwyNjQ3ODE2MTExLDgxNDcwOTk3LDE5NDM4MDM1MjMsMzgxNDkxODkzMCwyNDg5NTk2ODA0LDIyNTI3NDQzMCwyMDUzNzkwMzc2LDM4MjYxNzU3NTUsMjQ2NjkwNjAxMywxNjc4MTY3NDMsMjA5NzY1MTM3Nyw0MDI3NTUyNTgwLDIyNjU0OTAzODYsNTAzNDQ0MDcyLDE3NjIwNTA4MTQsNDE1MDQxNzI0NSwyMTU0MTI5MzU1LDQyNjUyMjIyNSwxODUyNTA3ODc5LDQyNzUzMTM1MjYsMjMxMjMxNzkyMCwyODI3NTM2MjYsMTc0MjU1NTg1Miw0MTg5NzA4MTQzLDIzOTQ4Nzc5NDUsMzk3OTE3NzYzLDE2MjIxODM2MzcsMzYwNDM5MDg4OCwyNzE0ODY2NTU4LDk1MzcyOTczMiwxMzQwMDc2NjI2LDM1MTg3MTk5ODUsMjc5NzM2MDk5OSwxMDY4ODI4MzgxLDEyMTk2Mzg4NTksMzYyNDc0MTg1MCwyOTM2Njc1MTQ4LDkwNjE4NTQ2MiwxMDkwODEyNTEyLDM3NDc2NzIwMDMsMjgyNTM3OTY2OSw4MjkzMjkxMzUsMTE4MTMzNTE2MSwzNDEyMTc3ODA0LDMxNjA4MzQ4NDIsNjI4MDg1NDA4LDEzODI2MDUzNjYsMzQyMzM2OTEwOSwzMTM4MDc4NDY3LDU3MDU2MjIzMywxNDI2NDAwODE1LDMzMTczMTY1NDIsMjk5ODczMzYwOCw3MzMyMzk5NTQsMTU1NTI2MTk1NiwzMjY4OTM1NTkxLDMwNTAzNjA2MjUsNzUyNDU5NDAzLDE1NDEzMjAyMjEsMjYwNzA3MTkyMCwzOTY1OTczMDMwLDE5Njk5MjI5NzIsNDA3MzU0OTgsMjYxNzgzNzIyNSwzOTQzNTc3MTUxLDE5MTMwODc4NzcsODM5MDgzNzEsMjUxMjM0MTYzNCwzODAzNzQwNjkyLDIwNzUyMDg2MjIsMjEzMjYxMTEyLDI0NjMyNzI2MDMsMzg1NTk5MDI4NSwyMDk0ODU0MDcxLDE5ODk1ODg4MSwyMjYyMDI5MDEyLDQwNTcyNjA2MTAsMTc1OTM1OTk5Miw1MzQ0MTQxOTAsMjE3NjcxODU0MSw0MTM5MzI5MTE1LDE4NzM4MzYwMDEsNDE0NjY0NTY3LDIyODIyNDg5MzQsNDI3OTIwMDM2OCwxNzExNjg0NTU0LDI4NTI4MTExNiwyNDA1ODAxNzI3LDQxNjcyMTY3NDUsMTYzNDQ2Nzc5NSwzNzYyMjk3MDEsMjY4NTA2Nzg5NiwzNjA4MDA3NDA2LDEzMDg5MTg2MTIsOTU2NTQzOTM4LDI4MDg1NTUxMDUsMzQ5NTk1ODI2MywxMjMxNjM2MzAxLDEwNDc0MjcwMzUsMjkzMjk1OTgxOCwzNjU0NzAzODM2LDEwODgzNTkyNzAsOTM2OTE4ZTMsMjg0NzcxNDg5OSwzNzM2ODM3ODI5LDEyMDI5MDA4NjMsODE3MjMzODk3LDMxODMzNDIxMDgsMzQwMTIzNzEzMCwxNDA0Mjc3NTUyLDYxNTgxODE1MCwzMTM0MjA3NDkzLDM0NTM0MjEyMDMsMTQyMzg1NzQ0OSw2MDE0NTA0MzEsMzAwOTgzNzYxNCwzMjk0NzEwNDU2LDE1NjcxMDM3NDYsNzExOTI4NzI0LDMwMjA2Njg0NzEsMzI3MjM4MDA2NSwxNTEwMzM0MjM1LDc1NTE2NzExN107Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBhfHwhYS5sZW5ndGgpcmV0dXJuIDA7dmFyIGU9InN0cmluZyIhPT1jLmdldFR5cGVPZihhKTsidW5kZWZpbmVkIj09dHlwZW9mIGImJihiPTApO3ZhciBmPTAsZz0wLGg9MDtiPS0xXmI7Zm9yKHZhciBpPTAsaj1hLmxlbmd0aDtqPmk7aSsrKWg9ZT9hW2ldOmEuY2hhckNvZGVBdChpKSxnPTI1NSYoYl5oKSxmPWRbZ10sYj1iPj4+OF5mO3JldHVybi0xXmJ9fSx7Ii4vdXRpbHMiOjIxfV0sNTpbZnVuY3Rpb24oYSxiKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYygpe3RoaXMuZGF0YT1udWxsLHRoaXMubGVuZ3RoPTAsdGhpcy5pbmRleD0wfXZhciBkPWEoIi4vdXRpbHMiKTtjLnByb3RvdHlwZT17Y2hlY2tPZmZzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5jaGVja0luZGV4KHRoaXMuaW5kZXgrYSl9LGNoZWNrSW5kZXg6ZnVuY3Rpb24oYSl7aWYodGhpcy5sZW5ndGg8YXx8MD5hKXRocm93IG5ldyBFcnJvcigiRW5kIG9mIGRhdGEgcmVhY2hlZCAoZGF0YSBsZW5ndGggPSAiK3RoaXMubGVuZ3RoKyIsIGFza2VkIGluZGV4ID0gIithKyIpLiBDb3JydXB0ZWQgemlwID8iKX0sc2V0SW5kZXg6ZnVuY3Rpb24oYSl7dGhpcy5jaGVja0luZGV4KGEpLHRoaXMuaW5kZXg9YX0sc2tpcDpmdW5jdGlvbihhKXt0aGlzLnNldEluZGV4KHRoaXMuaW5kZXgrYSl9LGJ5dGVBdDpmdW5jdGlvbigpe30scmVhZEludDpmdW5jdGlvbihhKXt2YXIgYixjPTA7Zm9yKHRoaXMuY2hlY2tPZmZzZXQoYSksYj10aGlzLmluZGV4K2EtMTtiPj10aGlzLmluZGV4O2ItLSljPShjPDw4KSt0aGlzLmJ5dGVBdChiKTtyZXR1cm4gdGhpcy5pbmRleCs9YSxjfSxyZWFkU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBkLnRyYW5zZm9ybVRvKCJzdHJpbmciLHRoaXMucmVhZERhdGEoYSkpfSxyZWFkRGF0YTpmdW5jdGlvbigpe30sbGFzdEluZGV4T2ZTaWduYXR1cmU6ZnVuY3Rpb24oKXt9LHJlYWREYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWFkSW50KDQpO3JldHVybiBuZXcgRGF0ZSgoYT4+MjUmMTI3KSsxOTgwLChhPj4yMSYxNSktMSxhPj4xNiYzMSxhPj4xMSYzMSxhPj41JjYzLCgzMSZhKTw8MSl9fSxiLmV4cG9ydHM9Y30seyIuL3V0aWxzIjoyMX1dLDY6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7Yy5iYXNlNjQ9ITEsYy5iaW5hcnk9ITEsYy5kaXI9ITEsYy5jcmVhdGVGb2xkZXJzPSExLGMuZGF0ZT1udWxsLGMuY29tcHJlc3Npb249bnVsbCxjLmNvbW1lbnQ9bnVsbH0se31dLDc6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7dmFyIGQ9YSgiLi91dGlscyIpO2Muc3RyaW5nMmJpbmFyeT1mdW5jdGlvbihhKXtyZXR1cm4gZC5zdHJpbmcyYmluYXJ5KGEpfSxjLnN0cmluZzJVaW50OEFycmF5PWZ1bmN0aW9uKGEpe3JldHVybiBkLnRyYW5zZm9ybVRvKCJ1aW50OGFycmF5IixhKX0sYy51aW50OEFycmF5MlN0cmluZz1mdW5jdGlvbihhKXtyZXR1cm4gZC50cmFuc2Zvcm1Ubygic3RyaW5nIixhKX0sYy5zdHJpbmcyQmxvYj1mdW5jdGlvbihhKXt2YXIgYj1kLnRyYW5zZm9ybVRvKCJhcnJheWJ1ZmZlciIsYSk7cmV0dXJuIGQuYXJyYXlCdWZmZXIyQmxvYihiKX0sYy5hcnJheUJ1ZmZlcjJCbG9iPWZ1bmN0aW9uKGEpe3JldHVybiBkLmFycmF5QnVmZmVyMkJsb2IoYSl9LGMudHJhbnNmb3JtVG89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZC50cmFuc2Zvcm1UbyhhLGIpfSxjLmdldFR5cGVPZj1mdW5jdGlvbihhKXtyZXR1cm4gZC5nZXRUeXBlT2YoYSl9LGMuY2hlY2tTdXBwb3J0PWZ1bmN0aW9uKGEpe3JldHVybiBkLmNoZWNrU3VwcG9ydChhKX0sYy5NQVhfVkFMVUVfMTZCSVRTPWQuTUFYX1ZBTFVFXzE2QklUUyxjLk1BWF9WQUxVRV8zMkJJVFM9ZC5NQVhfVkFMVUVfMzJCSVRTLGMucHJldHR5PWZ1bmN0aW9uKGEpe3JldHVybiBkLnByZXR0eShhKX0sYy5maW5kQ29tcHJlc3Npb249ZnVuY3Rpb24oYSl7cmV0dXJuIGQuZmluZENvbXByZXNzaW9uKGEpfSxjLmlzUmVnRXhwPWZ1bmN0aW9uKGEpe3JldHVybiBkLmlzUmVnRXhwKGEpfX0seyIuL3V0aWxzIjoyMX1dLDg6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7dmFyIGQ9InVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OEFycmF5JiYidW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQxNkFycmF5JiYidW5kZWZpbmVkIiE9dHlwZW9mIFVpbnQzMkFycmF5LGU9YSgicGFrbyIpO2MudW5jb21wcmVzc0lucHV0VHlwZT1kPyJ1aW50OGFycmF5IjoiYXJyYXkiLGMuY29tcHJlc3NJbnB1dFR5cGU9ZD8idWludDhhcnJheSI6ImFycmF5IixjLm1hZ2ljPSJcYlx4MDAiLGMuY29tcHJlc3M9ZnVuY3Rpb24oYSl7cmV0dXJuIGUuZGVmbGF0ZVJhdyhhKX0sYy51bmNvbXByZXNzPWZ1bmN0aW9uKGEpe3JldHVybiBlLmluZmxhdGVSYXcoYSl9fSx7cGFrbzoyNH1dLDk6W2Z1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGMoYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGM/KHRoaXMuZmlsZXM9e30sdGhpcy5jb21tZW50PW51bGwsdGhpcy5yb290PSIiLGEmJnRoaXMubG9hZChhLGIpLHZvaWQodGhpcy5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBjO2Zvcih2YXIgYiBpbiB0aGlzKSJmdW5jdGlvbiIhPXR5cGVvZiB0aGlzW2JdJiYoYVtiXT10aGlzW2JdKTtyZXR1cm4gYX0pKTpuZXcgYyhhLGIpfXZhciBkPWEoIi4vYmFzZTY0Iik7Yy5wcm90b3R5cGU9YSgiLi9vYmplY3QiKSxjLnByb3RvdHlwZS5sb2FkPWEoIi4vbG9hZCIpLGMuc3VwcG9ydD1hKCIuL3N1cHBvcnQiKSxjLmRlZmF1bHRzPWEoIi4vZGVmYXVsdHMiKSxjLnV0aWxzPWEoIi4vZGVwcmVjYXRlZFB1YmxpY1V0aWxzIiksYy5iYXNlNjQ9e2VuY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gZC5lbmNvZGUoYSl9LGRlY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gZC5kZWNvZGUoYSl9fSxjLmNvbXByZXNzaW9ucz1hKCIuL2NvbXByZXNzaW9ucyIpLGIuZXhwb3J0cz1jfSx7Ii4vYmFzZTY0IjoxLCIuL2NvbXByZXNzaW9ucyI6MywiLi9kZWZhdWx0cyI6NiwiLi9kZXByZWNhdGVkUHVibGljVXRpbHMiOjcsIi4vbG9hZCI6MTAsIi4vb2JqZWN0IjoxMywiLi9zdXBwb3J0IjoxN31dLDEwOltmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYz1hKCIuL2Jhc2U2NCIpLGQ9YSgiLi96aXBFbnRyaWVzIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7dmFyIGUsZixnLGg7Zm9yKGI9Ynx8e30sYi5iYXNlNjQmJihhPWMuZGVjb2RlKGEpKSxmPW5ldyBkKGEsYiksZT1mLmZpbGVzLGc9MDtnPGUubGVuZ3RoO2crKyloPWVbZ10sdGhpcy5maWxlKGguZmlsZU5hbWUsaC5kZWNvbXByZXNzZWQse2JpbmFyeTohMCxvcHRpbWl6ZWRCaW5hcnlTdHJpbmc6ITAsZGF0ZTpoLmRhdGUsZGlyOmguZGlyLGNvbW1lbnQ6aC5maWxlQ29tbWVudC5sZW5ndGg/aC5maWxlQ29tbWVudDpudWxsLGNyZWF0ZUZvbGRlcnM6Yi5jcmVhdGVGb2xkZXJzfSk7cmV0dXJuIGYuemlwQ29tbWVudC5sZW5ndGgmJih0aGlzLmNvbW1lbnQ9Zi56aXBDb21tZW50KSx0aGlzfX0seyIuL2Jhc2U2NCI6MSwiLi96aXBFbnRyaWVzIjoyMn1dLDExOltmdW5jdGlvbihhLGIpeyhmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7Yi5leHBvcnRzPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIG5ldyBhKGIsYyl9LGIuZXhwb3J0cy50ZXN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLmlzQnVmZmVyKGIpfX0pLmNhbGwodGhpcywidW5kZWZpbmVkIiE9dHlwZW9mIEJ1ZmZlcj9CdWZmZXI6dm9pZCAwKX0se31dLDEyOltmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBjKGEpe3RoaXMuZGF0YT1hLHRoaXMubGVuZ3RoPXRoaXMuZGF0YS5sZW5ndGgsdGhpcy5pbmRleD0wfXZhciBkPWEoIi4vdWludDhBcnJheVJlYWRlciIpO2MucHJvdG90eXBlPW5ldyBkLGMucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGEpe3RoaXMuY2hlY2tPZmZzZXQoYSk7dmFyIGI9dGhpcy5kYXRhLnNsaWNlKHRoaXMuaW5kZXgsdGhpcy5pbmRleCthKTtyZXR1cm4gdGhpcy5pbmRleCs9YSxifSxiLmV4cG9ydHM9Y30seyIuL3VpbnQ4QXJyYXlSZWFkZXIiOjE4fV0sMTM6W2Z1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPWEoIi4vc3VwcG9ydCIpLGQ9YSgiLi91dGlscyIpLGU9YSgiLi9jcmMzMiIpLGY9YSgiLi9zaWduYXR1cmUiKSxnPWEoIi4vZGVmYXVsdHMiKSxoPWEoIi4vYmFzZTY0IiksaT1hKCIuL2NvbXByZXNzaW9ucyIpLGo9YSgiLi9jb21wcmVzc2VkT2JqZWN0Iiksaz1hKCIuL25vZGVCdWZmZXIiKSxsPWEoIi4vdXRmOCIpLG09YSgiLi9zdHJpbmdXcml0ZXIiKSxuPWEoIi4vdWludDhBcnJheVdyaXRlciIpLG89ZnVuY3Rpb24oYSl7aWYoYS5fZGF0YSBpbnN0YW5jZW9mIGomJihhLl9kYXRhPWEuX2RhdGEuZ2V0Q29udGVudCgpLGEub3B0aW9ucy5iaW5hcnk9ITAsYS5vcHRpb25zLmJhc2U2ND0hMSwidWludDhhcnJheSI9PT1kLmdldFR5cGVPZihhLl9kYXRhKSkpe3ZhciBiPWEuX2RhdGE7YS5fZGF0YT1uZXcgVWludDhBcnJheShiLmxlbmd0aCksMCE9PWIubGVuZ3RoJiZhLl9kYXRhLnNldChiLDApfXJldHVybiBhLl9kYXRhfSxwPWZ1bmN0aW9uKGEpe3ZhciBiPW8oYSksZT1kLmdldFR5cGVPZihiKTtyZXR1cm4ic3RyaW5nIj09PWU/IWEub3B0aW9ucy5iaW5hcnkmJmMubm9kZWJ1ZmZlcj9rKGIsInV0Zi04Iik6YS5hc0JpbmFyeSgpOmJ9LHE9ZnVuY3Rpb24oYSl7dmFyIGI9byh0aGlzKTtyZXR1cm4gbnVsbD09PWJ8fCJ1bmRlZmluZWQiPT10eXBlb2YgYj8iIjoodGhpcy5vcHRpb25zLmJhc2U2NCYmKGI9aC5kZWNvZGUoYikpLGI9YSYmdGhpcy5vcHRpb25zLmJpbmFyeT9BLnV0ZjhkZWNvZGUoYik6ZC50cmFuc2Zvcm1Ubygic3RyaW5nIixiKSxhfHx0aGlzLm9wdGlvbnMuYmluYXJ5fHwoYj1kLnRyYW5zZm9ybVRvKCJzdHJpbmciLEEudXRmOGVuY29kZShiKSkpLGIpfSxyPWZ1bmN0aW9uKGEsYixjKXt0aGlzLm5hbWU9YSx0aGlzLmRpcj1jLmRpcix0aGlzLmRhdGU9Yy5kYXRlLHRoaXMuY29tbWVudD1jLmNvbW1lbnQsdGhpcy5fZGF0YT1iLHRoaXMub3B0aW9ucz1jLHRoaXMuX2luaXRpYWxNZXRhZGF0YT17ZGlyOmMuZGlyLGRhdGU6Yy5kYXRlfX07ci5wcm90b3R5cGU9e2FzVGV4dDpmdW5jdGlvbigpe3JldHVybiBxLmNhbGwodGhpcywhMCl9LGFzQmluYXJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHEuY2FsbCh0aGlzLCExKX0sYXNOb2RlQnVmZmVyOmZ1bmN0aW9uKCl7dmFyIGE9cCh0aGlzKTtyZXR1cm4gZC50cmFuc2Zvcm1Ubygibm9kZWJ1ZmZlciIsYSl9LGFzVWludDhBcnJheTpmdW5jdGlvbigpe3ZhciBhPXAodGhpcyk7cmV0dXJuIGQudHJhbnNmb3JtVG8oInVpbnQ4YXJyYXkiLGEpfSxhc0FycmF5QnVmZmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNVaW50OEFycmF5KCkuYnVmZmVyfX07dmFyIHM9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPSIiO2ZvcihjPTA7Yj5jO2MrKylkKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZhKSxhPj4+PTg7cmV0dXJuIGR9LHQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGM9e307Zm9yKGE9MDthPGFyZ3VtZW50cy5sZW5ndGg7YSsrKWZvcihiIGluIGFyZ3VtZW50c1thXSlhcmd1bWVudHNbYV0uaGFzT3duUHJvcGVydHkoYikmJiJ1bmRlZmluZWQiPT10eXBlb2YgY1tiXSYmKGNbYl09YXJndW1lbnRzW2FdW2JdKTtyZXR1cm4gY30sdT1mdW5jdGlvbihhKXtyZXR1cm4gYT1hfHx7fSxhLmJhc2U2NCE9PSEwfHxudWxsIT09YS5iaW5hcnkmJnZvaWQgMCE9PWEuYmluYXJ5fHwoYS5iaW5hcnk9ITApLGE9dChhLGcpLGEuZGF0ZT1hLmRhdGV8fG5ldyBEYXRlLG51bGwhPT1hLmNvbXByZXNzaW9uJiYoYS5jb21wcmVzc2lvbj1hLmNvbXByZXNzaW9uLnRvVXBwZXJDYXNlKCkpLGF9LHY9ZnVuY3Rpb24oYSxiLGMpe3ZhciBlLGY9ZC5nZXRUeXBlT2YoYik7aWYoYz11KGMpLGMuY3JlYXRlRm9sZGVycyYmKGU9dyhhKSkmJnguY2FsbCh0aGlzLGUsITApLGMuZGlyfHxudWxsPT09Ynx8InVuZGVmaW5lZCI9PXR5cGVvZiBiKWMuYmFzZTY0PSExLGMuYmluYXJ5PSExLGI9bnVsbDtlbHNlIGlmKCJzdHJpbmciPT09ZiljLmJpbmFyeSYmIWMuYmFzZTY0JiZjLm9wdGltaXplZEJpbmFyeVN0cmluZyE9PSEwJiYoYj1kLnN0cmluZzJiaW5hcnkoYikpO2Vsc2V7aWYoYy5iYXNlNjQ9ITEsYy5iaW5hcnk9ITAsIShmfHxiIGluc3RhbmNlb2YgaikpdGhyb3cgbmV3IEVycm9yKCJUaGUgZGF0YSBvZiAnIithKyInIGlzIGluIGFuIHVuc3VwcG9ydGVkIGZvcm1hdCAhIik7ImFycmF5YnVmZmVyIj09PWYmJihiPWQudHJhbnNmb3JtVG8oInVpbnQ4YXJyYXkiLGIpKX12YXIgZz1uZXcgcihhLGIsYyk7cmV0dXJuIHRoaXMuZmlsZXNbYV09ZyxnfSx3PWZ1bmN0aW9uKGEpeyIvIj09YS5zbGljZSgtMSkmJihhPWEuc3Vic3RyaW5nKDAsYS5sZW5ndGgtMSkpO3ZhciBiPWEubGFzdEluZGV4T2YoIi8iKTtyZXR1cm4gYj4wP2Euc3Vic3RyaW5nKDAsYik6IiJ9LHg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4iLyIhPWEuc2xpY2UoLTEpJiYoYSs9Ii8iKSxiPSJ1bmRlZmluZWQiIT10eXBlb2YgYj9iOiExLHRoaXMuZmlsZXNbYV18fHYuY2FsbCh0aGlzLGEsbnVsbCx7ZGlyOiEwLGNyZWF0ZUZvbGRlcnM6Yn0pLHRoaXMuZmlsZXNbYV19LHk9ZnVuY3Rpb24oYSxiKXt2YXIgYyxmPW5ldyBqO3JldHVybiBhLl9kYXRhIGluc3RhbmNlb2Ygaj8oZi51bmNvbXByZXNzZWRTaXplPWEuX2RhdGEudW5jb21wcmVzc2VkU2l6ZSxmLmNyYzMyPWEuX2RhdGEuY3JjMzIsMD09PWYudW5jb21wcmVzc2VkU2l6ZXx8YS5kaXI/KGI9aS5TVE9SRSxmLmNvbXByZXNzZWRDb250ZW50PSIiLGYuY3JjMzI9MCk6YS5fZGF0YS5jb21wcmVzc2lvbk1ldGhvZD09PWIubWFnaWM/Zi5jb21wcmVzc2VkQ29udGVudD1hLl9kYXRhLmdldENvbXByZXNzZWRDb250ZW50KCk6KGM9YS5fZGF0YS5nZXRDb250ZW50KCksZi5jb21wcmVzc2VkQ29udGVudD1iLmNvbXByZXNzKGQudHJhbnNmb3JtVG8oYi5jb21wcmVzc0lucHV0VHlwZSxjKSkpKTooYz1wKGEpLCghY3x8MD09PWMubGVuZ3RofHxhLmRpcikmJihiPWkuU1RPUkUsYz0iIiksZi51bmNvbXByZXNzZWRTaXplPWMubGVuZ3RoLGYuY3JjMzI9ZShjKSxmLmNvbXByZXNzZWRDb250ZW50PWIuY29tcHJlc3MoZC50cmFuc2Zvcm1UbyhiLmNvbXByZXNzSW5wdXRUeXBlLGMpKSksZi5jb21wcmVzc2VkU2l6ZT1mLmNvbXByZXNzZWRDb250ZW50Lmxlbmd0aCxmLmNvbXByZXNzaW9uTWV0aG9kPWIubWFnaWMsZn0sej1mdW5jdGlvbihhLGIsYyxnKXt2YXIgaCxpLGosayxtPShjLmNvbXByZXNzZWRDb250ZW50LGQudHJhbnNmb3JtVG8oInN0cmluZyIsbC51dGY4ZW5jb2RlKGIubmFtZSkpKSxuPWIuY29tbWVudHx8IiIsbz1kLnRyYW5zZm9ybVRvKCJzdHJpbmciLGwudXRmOGVuY29kZShuKSkscD1tLmxlbmd0aCE9PWIubmFtZS5sZW5ndGgscT1vLmxlbmd0aCE9PW4ubGVuZ3RoLHI9Yi5vcHRpb25zLHQ9IiIsdT0iIix2PSIiO2o9Yi5faW5pdGlhbE1ldGFkYXRhLmRpciE9PWIuZGlyP2IuZGlyOnIuZGlyLGs9Yi5faW5pdGlhbE1ldGFkYXRhLmRhdGUhPT1iLmRhdGU/Yi5kYXRlOnIuZGF0ZSxoPWsuZ2V0SG91cnMoKSxoPDw9NixofD1rLmdldE1pbnV0ZXMoKSxoPDw9NSxofD1rLmdldFNlY29uZHMoKS8yLGk9ay5nZXRGdWxsWWVhcigpLTE5ODAsaTw8PTQsaXw9ay5nZXRNb250aCgpKzEsaTw8PTUsaXw9ay5nZXREYXRlKCkscCYmKHU9cygxLDEpK3MoZShtKSw0KSttLHQrPSJ1cCIrcyh1Lmxlbmd0aCwyKSt1KSxxJiYodj1zKDEsMSkrcyh0aGlzLmNyYzMyKG8pLDQpK28sdCs9InVjIitzKHYubGVuZ3RoLDIpK3YpO3ZhciB3PSIiO3crPSJcblx4MDAiLHcrPXB8fHE/Ilx4MDBcYiI6Ilx4MDBceDAwIix3Kz1jLmNvbXByZXNzaW9uTWV0aG9kLHcrPXMoaCwyKSx3Kz1zKGksMiksdys9cyhjLmNyYzMyLDQpLHcrPXMoYy5jb21wcmVzc2VkU2l6ZSw0KSx3Kz1zKGMudW5jb21wcmVzc2VkU2l6ZSw0KSx3Kz1zKG0ubGVuZ3RoLDIpLHcrPXModC5sZW5ndGgsMik7dmFyIHg9Zi5MT0NBTF9GSUxFX0hFQURFUit3K20rdCx5PWYuQ0VOVFJBTF9GSUxFX0hFQURFUisiFFx4MDAiK3crcyhvLmxlbmd0aCwyKSsiXHgwMFx4MDBceDAwXHgwMCIrKGo9PT0hMD8iEFx4MDBceDAwXHgwMCI6Ilx4MDBceDAwXHgwMFx4MDAiKStzKGcsNCkrbSt0K287cmV0dXJue2ZpbGVSZWNvcmQ6eCxkaXJSZWNvcmQ6eSxjb21wcmVzc2VkT2JqZWN0OmN9fSxBPXtsb2FkOmZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKCJMb2FkIG1ldGhvZCBpcyBub3QgZGVmaW5lZC4gSXMgdGhlIGZpbGUganN6aXAtbG9hZC5qcyBpbmNsdWRlZCA/Iil9LGZpbHRlcjpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmPVtdO2ZvcihiIGluIHRoaXMuZmlsZXMpdGhpcy5maWxlcy5oYXNPd25Qcm9wZXJ0eShiKSYmKGQ9dGhpcy5maWxlc1tiXSxlPW5ldyByKGQubmFtZSxkLl9kYXRhLHQoZC5vcHRpb25zKSksYz1iLnNsaWNlKHRoaXMucm9vdC5sZW5ndGgsYi5sZW5ndGgpLGIuc2xpY2UoMCx0aGlzLnJvb3QubGVuZ3RoKT09PXRoaXMucm9vdCYmYShjLGUpJiZmLnB1c2goZSkpO3JldHVybiBmfSxmaWxlOmZ1bmN0aW9uKGEsYixjKXtpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoZC5pc1JlZ0V4cChhKSl7dmFyIGU9YTtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oYSxiKXtyZXR1cm4hYi5kaXImJmUudGVzdChhKX0pfXJldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbihiLGMpe3JldHVybiFjLmRpciYmYj09PWF9KVswXXx8bnVsbH1yZXR1cm4gYT10aGlzLnJvb3QrYSx2LmNhbGwodGhpcyxhLGIsYyksdGhpc30sZm9sZGVyOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiB0aGlzO2lmKGQuaXNSZWdFeHAoYSkpcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGMuZGlyJiZhLnRlc3QoYil9KTt2YXIgYj10aGlzLnJvb3QrYSxjPXguY2FsbCh0aGlzLGIpLGU9dGhpcy5jbG9uZSgpO3JldHVybiBlLnJvb3Q9Yy5uYW1lLGV9LHJlbW92ZTpmdW5jdGlvbihhKXthPXRoaXMucm9vdCthO3ZhciBiPXRoaXMuZmlsZXNbYV07aWYoYnx8KCIvIiE9YS5zbGljZSgtMSkmJihhKz0iLyIpLGI9dGhpcy5maWxlc1thXSksYiYmIWIuZGlyKWRlbGV0ZSB0aGlzLmZpbGVzW2FdO2Vsc2UgZm9yKHZhciBjPXRoaXMuZmlsdGVyKGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGMubmFtZS5zbGljZSgwLGEubGVuZ3RoKT09PWF9KSxkPTA7ZDxjLmxlbmd0aDtkKyspZGVsZXRlIHRoaXMuZmlsZXNbY1tkXS5uYW1lXTtyZXR1cm4gdGhpc30sZ2VuZXJhdGU6ZnVuY3Rpb24oYSl7YT10KGF8fHt9LHtiYXNlNjQ6ITAsY29tcHJlc3Npb246IlNUT1JFIix0eXBlOiJiYXNlNjQiLGNvbW1lbnQ6bnVsbH0pLGQuY2hlY2tTdXBwb3J0KGEudHlwZSk7dmFyIGIsYyxlPVtdLGc9MCxqPTAsaz1kLnRyYW5zZm9ybVRvKCJzdHJpbmciLHRoaXMudXRmOGVuY29kZShhLmNvbW1lbnR8fHRoaXMuY29tbWVudHx8IiIpKTtmb3IodmFyIGwgaW4gdGhpcy5maWxlcylpZih0aGlzLmZpbGVzLmhhc093blByb3BlcnR5KGwpKXt2YXIgbz10aGlzLmZpbGVzW2xdLHA9by5vcHRpb25zLmNvbXByZXNzaW9ufHxhLmNvbXByZXNzaW9uLnRvVXBwZXJDYXNlKCkscT1pW3BdO2lmKCFxKXRocm93IG5ldyBFcnJvcihwKyIgaXMgbm90IGEgdmFsaWQgY29tcHJlc3Npb24gbWV0aG9kICEiKTt2YXIgcj15LmNhbGwodGhpcyxvLHEpLHU9ei5jYWxsKHRoaXMsbCxvLHIsZyk7Zys9dS5maWxlUmVjb3JkLmxlbmd0aCtyLmNvbXByZXNzZWRTaXplLGorPXUuZGlyUmVjb3JkLmxlbmd0aCxlLnB1c2godSl9dmFyIHY9IiI7dj1mLkNFTlRSQUxfRElSRUNUT1JZX0VORCsiXHgwMFx4MDBceDAwXHgwMCIrcyhlLmxlbmd0aCwyKStzKGUubGVuZ3RoLDIpK3Moaiw0KStzKGcsNCkrcyhrLmxlbmd0aCwyKStrO3ZhciB3PWEudHlwZS50b0xvd2VyQ2FzZSgpO2ZvcihiPSJ1aW50OGFycmF5Ij09PXd8fCJhcnJheWJ1ZmZlciI9PT13fHwiYmxvYiI9PT13fHwibm9kZWJ1ZmZlciI9PT13P25ldyBuKGcrait2Lmxlbmd0aCk6bmV3IG0oZytqK3YubGVuZ3RoKSxjPTA7YzxlLmxlbmd0aDtjKyspYi5hcHBlbmQoZVtjXS5maWxlUmVjb3JkKSxiLmFwcGVuZChlW2NdLmNvbXByZXNzZWRPYmplY3QuY29tcHJlc3NlZENvbnRlbnQpO2ZvcihjPTA7YzxlLmxlbmd0aDtjKyspYi5hcHBlbmQoZVtjXS5kaXJSZWNvcmQpO2IuYXBwZW5kKHYpO3ZhciB4PWIuZmluYWxpemUoKTtzd2l0Y2goYS50eXBlLnRvTG93ZXJDYXNlKCkpe2Nhc2UidWludDhhcnJheSI6Y2FzZSJhcnJheWJ1ZmZlciI6Y2FzZSJub2RlYnVmZmVyIjpyZXR1cm4gZC50cmFuc2Zvcm1UbyhhLnR5cGUudG9Mb3dlckNhc2UoKSx4KTtjYXNlImJsb2IiOnJldHVybiBkLmFycmF5QnVmZmVyMkJsb2IoZC50cmFuc2Zvcm1UbygiYXJyYXlidWZmZXIiLHgpKTtjYXNlImJhc2U2NCI6cmV0dXJuIGEuYmFzZTY0P2guZW5jb2RlKHgpOng7ZGVmYXVsdDpyZXR1cm4geH19LGNyYzMyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGUoYSxiKX0sdXRmOGVuY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gZC50cmFuc2Zvcm1Ubygic3RyaW5nIixsLnV0ZjhlbmNvZGUoYSkpfSx1dGY4ZGVjb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBsLnV0ZjhkZWNvZGUoYSl9fTtiLmV4cG9ydHM9QX0seyIuL2Jhc2U2NCI6MSwiLi9jb21wcmVzc2VkT2JqZWN0IjoyLCIuL2NvbXByZXNzaW9ucyI6MywiLi9jcmMzMiI6NCwiLi9kZWZhdWx0cyI6NiwiLi9ub2RlQnVmZmVyIjoxMSwiLi9zaWduYXR1cmUiOjE0LCIuL3N0cmluZ1dyaXRlciI6MTYsIi4vc3VwcG9ydCI6MTcsIi4vdWludDhBcnJheVdyaXRlciI6MTksIi4vdXRmOCI6MjAsIi4vdXRpbHMiOjIxfV0sMTQ6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7Yy5MT0NBTF9GSUxFX0hFQURFUj0iUEsDBCIsYy5DRU5UUkFMX0ZJTEVfSEVBREVSPSJQSwECIixjLkNFTlRSQUxfRElSRUNUT1JZX0VORD0iUEsFBiIsYy5aSVA2NF9DRU5UUkFMX0RJUkVDVE9SWV9MT0NBVE9SPSJQSwYHIixjLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0VORD0iUEsGBiIsYy5EQVRBX0RFU0NSSVBUT1I9IlBLB1xiIn0se31dLDE1OltmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBjKGEsYil7dGhpcy5kYXRhPWEsYnx8KHRoaXMuZGF0YT1lLnN0cmluZzJiaW5hcnkodGhpcy5kYXRhKSksdGhpcy5sZW5ndGg9dGhpcy5kYXRhLmxlbmd0aCx0aGlzLmluZGV4PTB9dmFyIGQ9YSgiLi9kYXRhUmVhZGVyIiksZT1hKCIuL3V0aWxzIik7Yy5wcm90b3R5cGU9bmV3IGQsYy5wcm90b3R5cGUuYnl0ZUF0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuY2hhckNvZGVBdChhKX0sYy5wcm90b3R5cGUubGFzdEluZGV4T2ZTaWduYXR1cmU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZGF0YS5sYXN0SW5kZXhPZihhKX0sYy5wcm90b3R5cGUucmVhZERhdGE9ZnVuY3Rpb24oYSl7dGhpcy5jaGVja09mZnNldChhKTt2YXIgYj10aGlzLmRhdGEuc2xpY2UodGhpcy5pbmRleCx0aGlzLmluZGV4K2EpO3JldHVybiB0aGlzLmluZGV4Kz1hLGJ9LGIuZXhwb3J0cz1jfSx7Ii4vZGF0YVJlYWRlciI6NSwiLi91dGlscyI6MjF9XSwxNjpbZnVuY3Rpb24oYSxiKXsidXNlIHN0cmljdCI7dmFyIGM9YSgiLi91dGlscyIpLGQ9ZnVuY3Rpb24oKXt0aGlzLmRhdGE9W119O2QucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oYSl7YT1jLnRyYW5zZm9ybVRvKCJzdHJpbmciLGEpLHRoaXMuZGF0YS5wdXNoKGEpfSxmaW5hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuam9pbigiIil9fSxiLmV4cG9ydHM9ZH0seyIuL3V0aWxzIjoyMX1dLDE3OltmdW5jdGlvbihhLGIsYyl7KGZ1bmN0aW9uKGEpeyJ1c2Ugc3RyaWN0IjtpZihjLmJhc2U2ND0hMCxjLmFycmF5PSEwLGMuc3RyaW5nPSEwLGMuYXJyYXlidWZmZXI9InVuZGVmaW5lZCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmInVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OEFycmF5LGMubm9kZWJ1ZmZlcj0idW5kZWZpbmVkIiE9dHlwZW9mIGEsYy51aW50OGFycmF5PSJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhBcnJheSwidW5kZWZpbmVkIj09dHlwZW9mIEFycmF5QnVmZmVyKWMuYmxvYj0hMTtlbHNle3ZhciBiPW5ldyBBcnJheUJ1ZmZlcigwKTt0cnl7Yy5ibG9iPTA9PT1uZXcgQmxvYihbYl0se3R5cGU6ImFwcGxpY2F0aW9uL3ppcCJ9KS5zaXplfWNhdGNoKGQpe3RyeXt2YXIgZT13aW5kb3cuQmxvYkJ1aWxkZXJ8fHdpbmRvdy5XZWJLaXRCbG9iQnVpbGRlcnx8d2luZG93Lk1vekJsb2JCdWlsZGVyfHx3aW5kb3cuTVNCbG9iQnVpbGRlcixmPW5ldyBlO2YuYXBwZW5kKGIpLGMuYmxvYj0wPT09Zi5nZXRCbG9iKCJhcHBsaWNhdGlvbi96aXAiKS5zaXplfWNhdGNoKGQpe2MuYmxvYj0hMX19fX0pLmNhbGwodGhpcywidW5kZWZpbmVkIiE9dHlwZW9mIEJ1ZmZlcj9CdWZmZXI6dm9pZCAwKX0se31dLDE4OltmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBjKGEpe2EmJih0aGlzLmRhdGE9YSx0aGlzLmxlbmd0aD10aGlzLmRhdGEubGVuZ3RoLHRoaXMuaW5kZXg9MCl9dmFyIGQ9YSgiLi9kYXRhUmVhZGVyIik7Yy5wcm90b3R5cGU9bmV3IGQsYy5wcm90b3R5cGUuYnl0ZUF0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGFbYV19LGMucHJvdG90eXBlLmxhc3RJbmRleE9mU2lnbmF0dXJlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmNoYXJDb2RlQXQoMCksYz1hLmNoYXJDb2RlQXQoMSksZD1hLmNoYXJDb2RlQXQoMiksZT1hLmNoYXJDb2RlQXQoMyksZj10aGlzLmxlbmd0aC00O2Y+PTA7LS1mKWlmKHRoaXMuZGF0YVtmXT09PWImJnRoaXMuZGF0YVtmKzFdPT09YyYmdGhpcy5kYXRhW2YrMl09PT1kJiZ0aGlzLmRhdGFbZiszXT09PWUpcmV0dXJuIGY7cmV0dXJuLTF9LGMucHJvdG90eXBlLnJlYWREYXRhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuY2hlY2tPZmZzZXQoYSksMD09PWEpcmV0dXJuIG5ldyBVaW50OEFycmF5KDApO3ZhciBiPXRoaXMuZGF0YS5zdWJhcnJheSh0aGlzLmluZGV4LHRoaXMuaW5kZXgrYSk7cmV0dXJuIHRoaXMuaW5kZXgrPWEsYn0sYi5leHBvcnRzPWN9LHsiLi9kYXRhUmVhZGVyIjo1fV0sMTk6W2Z1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO3ZhciBjPWEoIi4vdXRpbHMiKSxkPWZ1bmN0aW9uKGEpe3RoaXMuZGF0YT1uZXcgVWludDhBcnJheShhKSx0aGlzLmluZGV4PTB9O2QucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oYSl7MCE9PWEubGVuZ3RoJiYoYT1jLnRyYW5zZm9ybVRvKCJ1aW50OGFycmF5IixhKSx0aGlzLmRhdGEuc2V0KGEsdGhpcy5pbmRleCksdGhpcy5pbmRleCs9YS5sZW5ndGgpfSxmaW5hbGl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9fSxiLmV4cG9ydHM9ZH0seyIuL3V0aWxzIjoyMX1dLDIwOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Zvcih2YXIgZD1hKCIuL3V0aWxzIiksZT1hKCIuL3N1cHBvcnQiKSxmPWEoIi4vbm9kZUJ1ZmZlciIpLGc9bmV3IEFycmF5KDI1NiksaD0wOzI1Nj5oO2grKylnW2hdPWg+PTI1Mj82Omg+PTI0OD81Omg+PTI0MD80Omg+PTIyND8zOmg+PTE5Mj8yOjE7Z1syNTRdPWdbMjU0XT0xO3ZhciBpPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxmLGcsaD1hLmxlbmd0aCxpPTA7Zm9yKGY9MDtoPmY7ZisrKWM9YS5jaGFyQ29kZUF0KGYpLDU1Mjk2PT09KDY0NTEyJmMpJiZoPmYrMSYmKGQ9YS5jaGFyQ29kZUF0KGYrMSksNTYzMjA9PT0oNjQ1MTImZCkmJihjPTY1NTM2KyhjLTU1Mjk2PDwxMCkrKGQtNTYzMjApLGYrKykpLGkrPTEyOD5jPzE6MjA0OD5jPzI6NjU1MzY+Yz8zOjQ7Zm9yKGI9ZS51aW50OGFycmF5P25ldyBVaW50OEFycmF5KGkpOm5ldyBBcnJheShpKSxnPTAsZj0wO2k+ZztmKyspYz1hLmNoYXJDb2RlQXQoZiksNTUyOTY9PT0oNjQ1MTImYykmJmg+ZisxJiYoZD1hLmNoYXJDb2RlQXQoZisxKSw1NjMyMD09PSg2NDUxMiZkKSYmKGM9NjU1MzYrKGMtNTUyOTY8PDEwKSsoZC01NjMyMCksZisrKSksMTI4PmM/YltnKytdPWM6MjA0OD5jPyhiW2crK109MTkyfGM+Pj42LGJbZysrXT0xMjh8NjMmYyk6NjU1MzY+Yz8oYltnKytdPTIyNHxjPj4+MTIsYltnKytdPTEyOHxjPj4+NiY2MyxiW2crK109MTI4fDYzJmMpOihiW2crK109MjQwfGM+Pj4xOCxiW2crK109MTI4fGM+Pj4xMiY2MyxiW2crK109MTI4fGM+Pj42JjYzLGJbZysrXT0xMjh8NjMmYyk7cmV0dXJuIGJ9LGo9ZnVuY3Rpb24oYSxiKXt2YXIgYztmb3IoYj1ifHxhLmxlbmd0aCxiPmEubGVuZ3RoJiYoYj1hLmxlbmd0aCksYz1iLTE7Yz49MCYmMTI4PT09KDE5MiZhW2NdKTspYy0tO3JldHVybiAwPmM/YjowPT09Yz9iOmMrZ1thW2NdXT5iP2M6Yn0saz1mdW5jdGlvbihhKXt2YXIgYixjLGUsZixoPWEubGVuZ3RoLGk9bmV3IEFycmF5KDIqaCk7Zm9yKGM9MCxiPTA7aD5iOylpZihlPWFbYisrXSwxMjg+ZSlpW2MrK109ZTtlbHNlIGlmKGY9Z1tlXSxmPjQpaVtjKytdPTY1NTMzLGIrPWYtMTtlbHNle2ZvcihlJj0yPT09Zj8zMTozPT09Zj8xNTo3O2Y+MSYmaD5iOyllPWU8PDZ8NjMmYVtiKytdLGYtLTtmPjE/aVtjKytdPTY1NTMzOjY1NTM2PmU/aVtjKytdPWU6KGUtPTY1NTM2LGlbYysrXT01NTI5NnxlPj4xMCYxMDIzLGlbYysrXT01NjMyMHwxMDIzJmUpfXJldHVybiBpLmxlbmd0aCE9PWMmJihpLnN1YmFycmF5P2k9aS5zdWJhcnJheSgwLGMpOmkubGVuZ3RoPWMpLGQuYXBwbHlGcm9tQ2hhckNvZGUoaSl9O2MudXRmOGVuY29kZT1mdW5jdGlvbihhKXtyZXR1cm4gZS5ub2RlYnVmZmVyP2YoYSwidXRmLTgiKTppKGEpfSxjLnV0ZjhkZWNvZGU9ZnVuY3Rpb24oYSl7aWYoZS5ub2RlYnVmZmVyKXJldHVybiBkLnRyYW5zZm9ybVRvKCJub2RlYnVmZmVyIixhKS50b1N0cmluZygidXRmLTgiKTthPWQudHJhbnNmb3JtVG8oZS51aW50OGFycmF5PyJ1aW50OGFycmF5IjoiYXJyYXkiLGEpO2Zvcih2YXIgYj1bXSxjPTAsZj1hLmxlbmd0aCxnPTY1NTM2O2Y+Yzspe3ZhciBoPWooYSxNYXRoLm1pbihjK2csZikpO2IucHVzaChlLnVpbnQ4YXJyYXk/ayhhLnN1YmFycmF5KGMsaCkpOmsoYS5zbGljZShjLGgpKSksYz1ofXJldHVybiBiLmpvaW4oIiIpfX0seyIuL25vZGVCdWZmZXIiOjExLCIuL3N1cHBvcnQiOjE3LCIuL3V0aWxzIjoyMX1dLDIxOltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGF9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7KytjKWJbY109MjU1JmEuY2hhckNvZGVBdChjKTtyZXR1cm4gYn1mdW5jdGlvbiBmKGEpe3ZhciBiPTY1NTM2LGQ9W10sZT1hLmxlbmd0aCxmPWMuZ2V0VHlwZU9mKGEpLGc9MCxoPSEwO3RyeXtzd2l0Y2goZil7Y2FzZSJ1aW50OGFycmF5IjpTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMCkpO2JyZWFrO2Nhc2Uibm9kZWJ1ZmZlciI6U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGooMCkpfX1jYXRjaChpKXtoPSExfWlmKCFoKXtmb3IodmFyIGs9IiIsbD0wO2w8YS5sZW5ndGg7bCsrKWsrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtsXSk7cmV0dXJuIGt9Zm9yKDtlPmcmJmI+MTspdHJ5e2QucHVzaCgiYXJyYXkiPT09Znx8Im5vZGVidWZmZXIiPT09Zj9TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsYS5zbGljZShnLE1hdGgubWluKGcrYixlKSkpOlN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxhLnN1YmFycmF5KGcsTWF0aC5taW4oZytiLGUpKSkpLGcrPWJ9Y2F0Y2goaSl7Yj1NYXRoLmZsb29yKGIvMil9cmV0dXJuIGQuam9pbigiIil9ZnVuY3Rpb24gZyhhLGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWJbY109YVtjXTtyZXR1cm4gYn12YXIgaD1hKCIuL3N1cHBvcnQiKSxpPWEoIi4vY29tcHJlc3Npb25zIiksaj1hKCIuL25vZGVCdWZmZXIiKTtjLnN0cmluZzJiaW5hcnk9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPSIiLGM9MDtjPGEubGVuZ3RoO2MrKyliKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZhLmNoYXJDb2RlQXQoYykpO3JldHVybiBifSxjLmFycmF5QnVmZmVyMkJsb2I9ZnVuY3Rpb24oYSl7Yy5jaGVja1N1cHBvcnQoImJsb2IiKTt0cnl7cmV0dXJuIG5ldyBCbG9iKFthXSx7dHlwZToiYXBwbGljYXRpb24vemlwIn0pfWNhdGNoKGIpe3RyeXt2YXIgZD13aW5kb3cuQmxvYkJ1aWxkZXJ8fHdpbmRvdy5XZWJLaXRCbG9iQnVpbGRlcnx8d2luZG93Lk1vekJsb2JCdWlsZGVyfHx3aW5kb3cuTVNCbG9iQnVpbGRlcixlPW5ldyBkO3JldHVybiBlLmFwcGVuZChhKSxlLmdldEJsb2IoImFwcGxpY2F0aW9uL3ppcCIpfWNhdGNoKGIpe3Rocm93IG5ldyBFcnJvcigiQnVnIDogY2FuJ3QgY29uc3RydWN0IHRoZSBCbG9iLiIpfX19LGMuYXBwbHlGcm9tQ2hhckNvZGU9Zjt2YXIgaz17fTtrLnN0cmluZz17c3RyaW5nOmQsYXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSxuZXcgQXJyYXkoYS5sZW5ndGgpKX0sYXJyYXlidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGsuc3RyaW5nLnVpbnQ4YXJyYXkoYSkuYnVmZmVyfSx1aW50OGFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBlKGEsbmV3IFVpbnQ4QXJyYXkoYS5sZW5ndGgpKX0sbm9kZWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gZShhLGooYS5sZW5ndGgpKX19LGsuYXJyYXk9e3N0cmluZzpmLGFycmF5OmQsYXJyYXlidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBVaW50OEFycmF5KGEpLmJ1ZmZlcn0sdWludDhhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9LG5vZGVidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGooYSl9fSxrLmFycmF5YnVmZmVyPXtzdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIGYobmV3IFVpbnQ4QXJyYXkoYSkpfSxhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gZyhuZXcgVWludDhBcnJheShhKSxuZXcgQXJyYXkoYS5ieXRlTGVuZ3RoKSl9LGFycmF5YnVmZmVyOmQsdWludDhhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9LG5vZGVidWZmZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGoobmV3IFVpbnQ4QXJyYXkoYSkpfX0say51aW50OGFycmF5PXtzdHJpbmc6ZixhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gZyhhLG5ldyBBcnJheShhLmxlbmd0aCkpfSxhcnJheWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5idWZmZXJ9LHVpbnQ4YXJyYXk6ZCxub2RlYnVmZmVyOmZ1bmN0aW9uKGEpe3JldHVybiBqKGEpfX0say5ub2RlYnVmZmVyPXtzdHJpbmc6ZixhcnJheTpmdW5jdGlvbihhKXtyZXR1cm4gZyhhLG5ldyBBcnJheShhLmxlbmd0aCkpfSxhcnJheWJ1ZmZlcjpmdW5jdGlvbihhKXtyZXR1cm4gay5ub2RlYnVmZmVyLnVpbnQ4YXJyYXkoYSkuYnVmZmVyfSx1aW50OGFycmF5OmZ1bmN0aW9uKGEpe3JldHVybiBnKGEsbmV3IFVpbnQ4QXJyYXkoYS5sZW5ndGgpKX0sbm9kZWJ1ZmZlcjpkfSxjLnRyYW5zZm9ybVRvPWZ1bmN0aW9uKGEsYil7aWYoYnx8KGI9IiIpLCFhKXJldHVybiBiO2MuY2hlY2tTdXBwb3J0KGEpO3ZhciBkPWMuZ2V0VHlwZU9mKGIpLGU9a1tkXVthXShiKTtyZXR1cm4gZX0sYy5nZXRUeXBlT2Y9ZnVuY3Rpb24oYSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBhPyJzdHJpbmciOiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSk/ImFycmF5IjpoLm5vZGVidWZmZXImJmoudGVzdChhKT8ibm9kZWJ1ZmZlciI6aC51aW50OGFycmF5JiZhIGluc3RhbmNlb2YgVWludDhBcnJheT8idWludDhhcnJheSI6aC5hcnJheWJ1ZmZlciYmYSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyPyJhcnJheWJ1ZmZlciI6dm9pZCAwfSxjLmNoZWNrU3VwcG9ydD1mdW5jdGlvbihhKXt2YXIgYj1oW2EudG9Mb3dlckNhc2UoKV07aWYoIWIpdGhyb3cgbmV3IEVycm9yKGErIiBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3NlciIpfSxjLk1BWF9WQUxVRV8xNkJJVFM9NjU1MzUsYy5NQVhfVkFMVUVfMzJCSVRTPS0xLGMucHJldHR5PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD0iIjtmb3IoYz0wO2M8KGF8fCIiKS5sZW5ndGg7YysrKWI9YS5jaGFyQ29kZUF0KGMpLGQrPSJcXHgiKygxNj5iPyIwIjoiIikrYi50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtyZXR1cm4gZH0sYy5maW5kQ29tcHJlc3Npb249ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGkpaWYoaS5oYXNPd25Qcm9wZXJ0eShiKSYmaVtiXS5tYWdpYz09PWEpcmV0dXJuIGlbYl07cmV0dXJuIG51bGx9LGMuaXNSZWdFeHA9ZnVuY3Rpb24oYSl7cmV0dXJuIltvYmplY3QgUmVnRXhwXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9fSx7Ii4vY29tcHJlc3Npb25zIjozLCIuL25vZGVCdWZmZXIiOjExLCIuL3N1cHBvcnQiOjE3fV0sMjI6W2Z1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGMoYSxiKXt0aGlzLmZpbGVzPVtdLHRoaXMubG9hZE9wdGlvbnM9YixhJiZ0aGlzLmxvYWQoYSl9dmFyIGQ9YSgiLi9zdHJpbmdSZWFkZXIiKSxlPWEoIi4vbm9kZUJ1ZmZlclJlYWRlciIpLGY9YSgiLi91aW50OEFycmF5UmVhZGVyIiksZz1hKCIuL3V0aWxzIiksaD1hKCIuL3NpZ25hdHVyZSIpLGk9YSgiLi96aXBFbnRyeSIpLGo9YSgiLi9zdXBwb3J0Iiksaz1hKCIuL29iamVjdCIpO2MucHJvdG90eXBlPXtjaGVja1NpZ25hdHVyZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJlYWRlci5yZWFkU3RyaW5nKDQpO2lmKGIhPT1hKXRocm93IG5ldyBFcnJvcigiQ29ycnVwdGVkIHppcCBvciBidWcgOiB1bmV4cGVjdGVkIHNpZ25hdHVyZSAoIitnLnByZXR0eShiKSsiLCBleHBlY3RlZCAiK2cucHJldHR5KGEpKyIpIil9LHJlYWRCbG9ja0VuZE9mQ2VudHJhbDpmdW5jdGlvbigpe3RoaXMuZGlza051bWJlcj10aGlzLnJlYWRlci5yZWFkSW50KDIpLHRoaXMuZGlza1dpdGhDZW50cmFsRGlyU3RhcnQ9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzT25UaGlzRGlzaz10aGlzLnJlYWRlci5yZWFkSW50KDIpLHRoaXMuY2VudHJhbERpclJlY29yZHM9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmNlbnRyYWxEaXJTaXplPXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5jZW50cmFsRGlyT2Zmc2V0PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy56aXBDb21tZW50TGVuZ3RoPXRoaXMucmVhZGVyLnJlYWRJbnQoMiksdGhpcy56aXBDb21tZW50PXRoaXMucmVhZGVyLnJlYWRTdHJpbmcodGhpcy56aXBDb21tZW50TGVuZ3RoKSx0aGlzLnppcENvbW1lbnQ9ay51dGY4ZGVjb2RlKHRoaXMuemlwQ29tbWVudCl9LHJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsOmZ1bmN0aW9uKCl7dGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemU9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLnZlcnNpb25NYWRlQnk9dGhpcy5yZWFkZXIucmVhZFN0cmluZygyKSx0aGlzLnZlcnNpb25OZWVkZWQ9dGhpcy5yZWFkZXIucmVhZEludCgyKSx0aGlzLmRpc2tOdW1iZXI9dGhpcy5yZWFkZXIucmVhZEludCg0KSx0aGlzLmRpc2tXaXRoQ2VudHJhbERpclN0YXJ0PXRoaXMucmVhZGVyLnJlYWRJbnQoNCksdGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLmNlbnRyYWxEaXJSZWNvcmRzPXRoaXMucmVhZGVyLnJlYWRJbnQoOCksdGhpcy5jZW50cmFsRGlyU2l6ZT10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuY2VudHJhbERpck9mZnNldD10aGlzLnJlYWRlci5yZWFkSW50KDgpLHRoaXMuemlwNjRFeHRlbnNpYmxlRGF0YT17fTtmb3IodmFyIGEsYixjLGQ9dGhpcy56aXA2NEVuZE9mQ2VudHJhbFNpemUtNDQsZT0wO2Q+ZTspYT10aGlzLnJlYWRlci5yZWFkSW50KDIpLGI9dGhpcy5yZWFkZXIucmVhZEludCg0KSxjPXRoaXMucmVhZGVyLnJlYWRTdHJpbmcoYiksdGhpcy56aXA2NEV4dGVuc2libGVEYXRhW2FdPXtpZDphLGxlbmd0aDpiLHZhbHVlOmN9fSxyZWFkQmxvY2taaXA2NEVuZE9mQ2VudHJhbExvY2F0b3I6ZnVuY3Rpb24oKXtpZih0aGlzLmRpc2tXaXRoWmlwNjRDZW50cmFsRGlyU3RhcnQ9dGhpcy5yZWFkZXIucmVhZEludCg0KSx0aGlzLnJlbGF0aXZlT2Zmc2V0RW5kT2ZaaXA2NENlbnRyYWxEaXI9dGhpcy5yZWFkZXIucmVhZEludCg4KSx0aGlzLmRpc2tzQ291bnQ9dGhpcy5yZWFkZXIucmVhZEludCg0KSx0aGlzLmRpc2tzQ291bnQ+MSl0aHJvdyBuZXcgRXJyb3IoIk11bHRpLXZvbHVtZXMgemlwIGFyZSBub3Qgc3VwcG9ydGVkIil9LHJlYWRMb2NhbEZpbGVzOmZ1bmN0aW9uKCl7dmFyIGEsYjtmb3IoYT0wO2E8dGhpcy5maWxlcy5sZW5ndGg7YSsrKWI9dGhpcy5maWxlc1thXSx0aGlzLnJlYWRlci5zZXRJbmRleChiLmxvY2FsSGVhZGVyT2Zmc2V0KSx0aGlzLmNoZWNrU2lnbmF0dXJlKGguTE9DQUxfRklMRV9IRUFERVIpLGIucmVhZExvY2FsUGFydCh0aGlzLnJlYWRlciksYi5oYW5kbGVVVEY4KCl9LHJlYWRDZW50cmFsRGlyOmZ1bmN0aW9uKCl7dmFyIGE7Zm9yKHRoaXMucmVhZGVyLnNldEluZGV4KHRoaXMuY2VudHJhbERpck9mZnNldCk7dGhpcy5yZWFkZXIucmVhZFN0cmluZyg0KT09PWguQ0VOVFJBTF9GSUxFX0hFQURFUjspYT1uZXcgaSh7emlwNjQ6dGhpcy56aXA2NH0sdGhpcy5sb2FkT3B0aW9ucyksYS5yZWFkQ2VudHJhbFBhcnQodGhpcy5yZWFkZXIpLHRoaXMuZmlsZXMucHVzaChhKX0scmVhZEVuZE9mQ2VudHJhbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVhZGVyLmxhc3RJbmRleE9mU2lnbmF0dXJlKGguQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKTtpZigtMT09PWEpdGhyb3cgbmV3IEVycm9yKCJDb3JydXB0ZWQgemlwIDogY2FuJ3QgZmluZCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnkiKTtpZih0aGlzLnJlYWRlci5zZXRJbmRleChhKSx0aGlzLmNoZWNrU2lnbmF0dXJlKGguQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKSx0aGlzLnJlYWRCbG9ja0VuZE9mQ2VudHJhbCgpLHRoaXMuZGlza051bWJlcj09PWcuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5kaXNrV2l0aENlbnRyYWxEaXJTdGFydD09PWcuTUFYX1ZBTFVFXzE2QklUU3x8dGhpcy5jZW50cmFsRGlyUmVjb3Jkc09uVGhpc0Rpc2s9PT1nLk1BWF9WQUxVRV8xNkJJVFN8fHRoaXMuY2VudHJhbERpclJlY29yZHM9PT1nLk1BWF9WQUxVRV8xNkJJVFN8fHRoaXMuY2VudHJhbERpclNpemU9PT1nLk1BWF9WQUxVRV8zMkJJVFN8fHRoaXMuY2VudHJhbERpck9mZnNldD09PWcuTUFYX1ZBTFVFXzMyQklUUyl7aWYodGhpcy56aXA2ND0hMCxhPXRoaXMucmVhZGVyLmxhc3RJbmRleE9mU2lnbmF0dXJlKGguWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfTE9DQVRPUiksLTE9PT1hKXRocm93IG5ldyBFcnJvcigiQ29ycnVwdGVkIHppcCA6IGNhbid0IGZpbmQgdGhlIFpJUDY0IGVuZCBvZiBjZW50cmFsIGRpcmVjdG9yeSBsb2NhdG9yIik7dGhpcy5yZWFkZXIuc2V0SW5kZXgoYSksdGhpcy5jaGVja1NpZ25hdHVyZShoLlpJUDY0X0NFTlRSQUxfRElSRUNUT1JZX0xPQ0FUT1IpLHRoaXMucmVhZEJsb2NrWmlwNjRFbmRPZkNlbnRyYWxMb2NhdG9yKCksdGhpcy5yZWFkZXIuc2V0SW5kZXgodGhpcy5yZWxhdGl2ZU9mZnNldEVuZE9mWmlwNjRDZW50cmFsRGlyKSx0aGlzLmNoZWNrU2lnbmF0dXJlKGguWklQNjRfQ0VOVFJBTF9ESVJFQ1RPUllfRU5EKSx0aGlzLnJlYWRCbG9ja1ppcDY0RW5kT2ZDZW50cmFsKCl9fSxwcmVwYXJlUmVhZGVyOmZ1bmN0aW9uKGEpe3ZhciBiPWcuZ2V0VHlwZU9mKGEpO3RoaXMucmVhZGVyPSJzdHJpbmciIT09Ynx8ai51aW50OGFycmF5PyJub2RlYnVmZmVyIj09PWI/bmV3IGUoYSk6bmV3IGYoZy50cmFuc2Zvcm1UbygidWludDhhcnJheSIsYSkpOm5ldyBkKGEsdGhpcy5sb2FkT3B0aW9ucy5vcHRpbWl6ZWRCaW5hcnlTdHJpbmcpfSxsb2FkOmZ1bmN0aW9uKGEpe3RoaXMucHJlcGFyZVJlYWRlcihhKSx0aGlzLnJlYWRFbmRPZkNlbnRyYWwoKSx0aGlzLnJlYWRDZW50cmFsRGlyKCksdGhpcy5yZWFkTG9jYWxGaWxlcygpfX0sYi5leHBvcnRzPWN9LHsiLi9ub2RlQnVmZmVyUmVhZGVyIjoxMiwiLi9vYmplY3QiOjEzLCIuL3NpZ25hdHVyZSI6MTQsIi4vc3RyaW5nUmVhZGVyIjoxNSwiLi9zdXBwb3J0IjoxNywiLi91aW50OEFycmF5UmVhZGVyIjoxOCwiLi91dGlscyI6MjEsIi4vemlwRW50cnkiOjIzfV0sMjM6W2Z1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGMoYSxiKXt0aGlzLm9wdGlvbnM9YSx0aGlzLmxvYWRPcHRpb25zPWJ9dmFyIGQ9YSgiLi9zdHJpbmdSZWFkZXIiKSxlPWEoIi4vdXRpbHMiKSxmPWEoIi4vY29tcHJlc3NlZE9iamVjdCIpLGc9YSgiLi9vYmplY3QiKTtjLnByb3RvdHlwZT17aXNFbmNyeXB0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gMT09PSgxJnRoaXMuYml0RmxhZyl9LHVzZVVURjg6ZnVuY3Rpb24oKXtyZXR1cm4gMjA0OD09PSgyMDQ4JnRoaXMuYml0RmxhZyl9LHByZXBhcmVDb21wcmVzc2VkQ29udGVudDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9YS5pbmRleDthLnNldEluZGV4KGIpO3ZhciBlPWEucmVhZERhdGEoYyk7cmV0dXJuIGEuc2V0SW5kZXgoZCksZX19LHByZXBhcmVDb250ZW50OmZ1bmN0aW9uKGEsYixjLGQsZil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9ZS50cmFuc2Zvcm1UbyhkLnVuY29tcHJlc3NJbnB1dFR5cGUsdGhpcy5nZXRDb21wcmVzc2VkQ29udGVudCgpKSxiPWQudW5jb21wcmVzcyhhKTtpZihiLmxlbmd0aCE9PWYpdGhyb3cgbmV3IEVycm9yKCJCdWcgOiB1bmNvbXByZXNzZWQgZGF0YSBzaXplIG1pc21hdGNoIik7cmV0dXJuIGJ9fSxyZWFkTG9jYWxQYXJ0OmZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoYS5za2lwKDIyKSx0aGlzLmZpbGVOYW1lTGVuZ3RoPWEucmVhZEludCgyKSxjPWEucmVhZEludCgyKSx0aGlzLmZpbGVOYW1lPWEucmVhZFN0cmluZyh0aGlzLmZpbGVOYW1lTGVuZ3RoKSxhLnNraXAoYyksLTE9PXRoaXMuY29tcHJlc3NlZFNpemV8fC0xPT10aGlzLnVuY29tcHJlc3NlZFNpemUpdGhyb3cgbmV3IEVycm9yKCJCdWcgb3IgY29ycnVwdGVkIHppcCA6IGRpZG4ndCBnZXQgZW5vdWdoIGluZm9ybWF0aW9ucyBmcm9tIHRoZSBjZW50cmFsIGRpcmVjdG9yeSAoY29tcHJlc3NlZFNpemUgPT0gLTEgfHwgdW5jb21wcmVzc2VkU2l6ZSA9PSAtMSkiKTtpZihiPWUuZmluZENvbXByZXNzaW9uKHRoaXMuY29tcHJlc3Npb25NZXRob2QpLG51bGw9PT1iKXRocm93IG5ldyBFcnJvcigiQ29ycnVwdGVkIHppcCA6IGNvbXByZXNzaW9uICIrZS5wcmV0dHkodGhpcy5jb21wcmVzc2lvbk1ldGhvZCkrIiB1bmtub3duIChpbm5lciBmaWxlIDogIit0aGlzLmZpbGVOYW1lKyIpIik7aWYodGhpcy5kZWNvbXByZXNzZWQ9bmV3IGYsdGhpcy5kZWNvbXByZXNzZWQuY29tcHJlc3NlZFNpemU9dGhpcy5jb21wcmVzc2VkU2l6ZSx0aGlzLmRlY29tcHJlc3NlZC51bmNvbXByZXNzZWRTaXplPXRoaXMudW5jb21wcmVzc2VkU2l6ZSx0aGlzLmRlY29tcHJlc3NlZC5jcmMzMj10aGlzLmNyYzMyLHRoaXMuZGVjb21wcmVzc2VkLmNvbXByZXNzaW9uTWV0aG9kPXRoaXMuY29tcHJlc3Npb25NZXRob2QsdGhpcy5kZWNvbXByZXNzZWQuZ2V0Q29tcHJlc3NlZENvbnRlbnQ9dGhpcy5wcmVwYXJlQ29tcHJlc3NlZENvbnRlbnQoYSxhLmluZGV4LHRoaXMuY29tcHJlc3NlZFNpemUsYiksdGhpcy5kZWNvbXByZXNzZWQuZ2V0Q29udGVudD10aGlzLnByZXBhcmVDb250ZW50KGEsYS5pbmRleCx0aGlzLmNvbXByZXNzZWRTaXplLGIsdGhpcy51bmNvbXByZXNzZWRTaXplKSx0aGlzLmxvYWRPcHRpb25zLmNoZWNrQ1JDMzImJih0aGlzLmRlY29tcHJlc3NlZD1lLnRyYW5zZm9ybVRvKCJzdHJpbmciLHRoaXMuZGVjb21wcmVzc2VkLmdldENvbnRlbnQoKSksZy5jcmMzMih0aGlzLmRlY29tcHJlc3NlZCkhPT10aGlzLmNyYzMyKSl0aHJvdyBuZXcgRXJyb3IoIkNvcnJ1cHRlZCB6aXAgOiBDUkMzMiBtaXNtYXRjaCIpfSxyZWFkQ2VudHJhbFBhcnQ6ZnVuY3Rpb24oYSl7aWYodGhpcy52ZXJzaW9uTWFkZUJ5PWEucmVhZFN0cmluZygyKSx0aGlzLnZlcnNpb25OZWVkZWQ9YS5yZWFkSW50KDIpLHRoaXMuYml0RmxhZz1hLnJlYWRJbnQoMiksdGhpcy5jb21wcmVzc2lvbk1ldGhvZD1hLnJlYWRTdHJpbmcoMiksdGhpcy5kYXRlPWEucmVhZERhdGUoKSx0aGlzLmNyYzMyPWEucmVhZEludCg0KSx0aGlzLmNvbXByZXNzZWRTaXplPWEucmVhZEludCg0KSx0aGlzLnVuY29tcHJlc3NlZFNpemU9YS5yZWFkSW50KDQpLHRoaXMuZmlsZU5hbWVMZW5ndGg9YS5yZWFkSW50KDIpLHRoaXMuZXh0cmFGaWVsZHNMZW5ndGg9YS5yZWFkSW50KDIpLHRoaXMuZmlsZUNvbW1lbnRMZW5ndGg9YS5yZWFkSW50KDIpLHRoaXMuZGlza051bWJlclN0YXJ0PWEucmVhZEludCgyKSx0aGlzLmludGVybmFsRmlsZUF0dHJpYnV0ZXM9YS5yZWFkSW50KDIpLHRoaXMuZXh0ZXJuYWxGaWxlQXR0cmlidXRlcz1hLnJlYWRJbnQoNCksdGhpcy5sb2NhbEhlYWRlck9mZnNldD1hLnJlYWRJbnQoNCksdGhpcy5pc0VuY3J5cHRlZCgpKXRocm93IG5ldyBFcnJvcigiRW5jcnlwdGVkIHppcCBhcmUgbm90IHN1cHBvcnRlZCIpO3RoaXMuZmlsZU5hbWU9YS5yZWFkU3RyaW5nKHRoaXMuZmlsZU5hbWVMZW5ndGgpLHRoaXMucmVhZEV4dHJhRmllbGRzKGEpLHRoaXMucGFyc2VaSVA2NEV4dHJhRmllbGQoYSksdGhpcy5maWxlQ29tbWVudD1hLnJlYWRTdHJpbmcodGhpcy5maWxlQ29tbWVudExlbmd0aCksdGhpcy5kaXI9MTYmdGhpcy5leHRlcm5hbEZpbGVBdHRyaWJ1dGVzPyEwOiExfSxwYXJzZVpJUDY0RXh0cmFGaWVsZDpmdW5jdGlvbigpe2lmKHRoaXMuZXh0cmFGaWVsZHNbMV0pe3ZhciBhPW5ldyBkKHRoaXMuZXh0cmFGaWVsZHNbMV0udmFsdWUpO3RoaXMudW5jb21wcmVzc2VkU2l6ZT09PWUuTUFYX1ZBTFVFXzMyQklUUyYmKHRoaXMudW5jb21wcmVzc2VkU2l6ZT1hLnJlYWRJbnQoOCkpLHRoaXMuY29tcHJlc3NlZFNpemU9PT1lLk1BWF9WQUxVRV8zMkJJVFMmJih0aGlzLmNvbXByZXNzZWRTaXplPWEucmVhZEludCg4KSksdGhpcy5sb2NhbEhlYWRlck9mZnNldD09PWUuTUFYX1ZBTFVFXzMyQklUUyYmKHRoaXMubG9jYWxIZWFkZXJPZmZzZXQ9YS5yZWFkSW50KDgpKSx0aGlzLmRpc2tOdW1iZXJTdGFydD09PWUuTUFYX1ZBTFVFXzMyQklUUyYmKHRoaXMuZGlza051bWJlclN0YXJ0PWEucmVhZEludCg0KSl9fSxyZWFkRXh0cmFGaWVsZHM6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9YS5pbmRleDtmb3IodGhpcy5leHRyYUZpZWxkcz10aGlzLmV4dHJhRmllbGRzfHx7fTthLmluZGV4PGUrdGhpcy5leHRyYUZpZWxkc0xlbmd0aDspYj1hLnJlYWRJbnQoMiksYz1hLnJlYWRJbnQoMiksZD1hLnJlYWRTdHJpbmcoYyksdGhpcy5leHRyYUZpZWxkc1tiXT17aWQ6YixsZW5ndGg6Yyx2YWx1ZTpkfX0saGFuZGxlVVRGODpmdW5jdGlvbigpe2lmKHRoaXMudXNlVVRGOCgpKXRoaXMuZmlsZU5hbWU9Zy51dGY4ZGVjb2RlKHRoaXMuZmlsZU5hbWUpLHRoaXMuZmlsZUNvbW1lbnQ9Zy51dGY4ZGVjb2RlKHRoaXMuZmlsZUNvbW1lbnQpO2Vsc2V7dmFyIGE9dGhpcy5maW5kRXh0cmFGaWVsZFVuaWNvZGVQYXRoKCk7bnVsbCE9PWEmJih0aGlzLmZpbGVOYW1lPWEpO3ZhciBiPXRoaXMuZmluZEV4dHJhRmllbGRVbmljb2RlQ29tbWVudCgpO251bGwhPT1iJiYodGhpcy5maWxlQ29tbWVudD1iKX19LGZpbmRFeHRyYUZpZWxkVW5pY29kZVBhdGg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmV4dHJhRmllbGRzWzI4Nzg5XTtpZihhKXt2YXIgYj1uZXcgZChhLnZhbHVlKTtyZXR1cm4gMSE9PWIucmVhZEludCgxKT9udWxsOmcuY3JjMzIodGhpcy5maWxlTmFtZSkhPT1iLnJlYWRJbnQoNCk/bnVsbDpnLnV0ZjhkZWNvZGUoYi5yZWFkU3RyaW5nKGEubGVuZ3RoLTUpKX1yZXR1cm4gbnVsbH0sZmluZEV4dHJhRmllbGRVbmljb2RlQ29tbWVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZXh0cmFGaWVsZHNbMjU0NjFdO2lmKGEpe3ZhciBiPW5ldyBkKGEudmFsdWUpO3JldHVybiAxIT09Yi5yZWFkSW50KDEpP251bGw6Zy5jcmMzMih0aGlzLmZpbGVDb21tZW50KSE9PWIucmVhZEludCg0KT9udWxsOmcudXRmOGRlY29kZShiLnJlYWRTdHJpbmcoYS5sZW5ndGgtNSkpfXJldHVybiBudWxsfX0sYi5leHBvcnRzPWN9LHsiLi9jb21wcmVzc2VkT2JqZWN0IjoyLCIuL29iamVjdCI6MTMsIi4vc3RyaW5nUmVhZGVyIjoxNSwiLi91dGlscyI6MjF9XSwyNDpbZnVuY3Rpb24oYSxiKXsidXNlIHN0cmljdCI7dmFyIGM9YSgiLi9saWIvdXRpbHMvY29tbW9uIikuYXNzaWduLGQ9YSgiLi9saWIvZGVmbGF0ZSIpLGU9YSgiLi9saWIvaW5mbGF0ZSIpLGY9YSgiLi9saWIvemxpYi9jb25zdGFudHMiKSxnPXt9O2MoZyxkLGUsZiksYi5leHBvcnRzPWd9LHsiLi9saWIvZGVmbGF0ZSI6MjUsIi4vbGliL2luZmxhdGUiOjI2LCIuL2xpYi91dGlscy9jb21tb24iOjI3LCIuL2xpYi96bGliL2NvbnN0YW50cyI6MzB9XSwyNTpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEsYil7dmFyIGM9bmV3IHMoYik7aWYoYy5wdXNoKGEsITApLGMuZXJyKXRocm93IGMubXNnO3JldHVybiBjLnJlc3VsdH1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGI9Ynx8e30sYi5yYXc9ITAsZChhLGIpfWZ1bmN0aW9uIGYoYSxiKXtyZXR1cm4gYj1ifHx7fSxiLmd6aXA9ITAsZChhLGIpfXZhciBnPWEoIi4vemxpYi9kZWZsYXRlLmpzIiksaD1hKCIuL3V0aWxzL2NvbW1vbiIpLGk9YSgiLi91dGlscy9zdHJpbmdzIiksaj1hKCIuL3psaWIvbWVzc2FnZXMiKSxrPWEoIi4vemxpYi96c3RyZWFtIiksbD0wLG09NCxuPTAsbz0xLHA9LTEscT0wLHI9OCxzPWZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz1oLmFzc2lnbih7bGV2ZWw6cCxtZXRob2Q6cixjaHVua1NpemU6MTYzODQsd2luZG93Qml0czoxNSxtZW1MZXZlbDo4LHN0cmF0ZWd5OnEsdG86IiJ9LGF8fHt9KTt2YXIgYj10aGlzLm9wdGlvbnM7Yi5yYXcmJmIud2luZG93Qml0cz4wP2Iud2luZG93Qml0cz0tYi53aW5kb3dCaXRzOmIuZ3ppcCYmYi53aW5kb3dCaXRzPjAmJmIud2luZG93Qml0czwxNiYmKGIud2luZG93Qml0cys9MTYpLHRoaXMuZXJyPTAsdGhpcy5tc2c9IiIsdGhpcy5lbmRlZD0hMSx0aGlzLmNodW5rcz1bXSx0aGlzLnN0cm09bmV3IGssdGhpcy5zdHJtLmF2YWlsX291dD0wO3ZhciBjPWcuZGVmbGF0ZUluaXQyKHRoaXMuc3RybSxiLmxldmVsLGIubWV0aG9kLGIud2luZG93Qml0cyxiLm1lbUxldmVsLGIuc3RyYXRlZ3kpO2lmKGMhPT1uKXRocm93IG5ldyBFcnJvcihqW2NdKTtiLmhlYWRlciYmZy5kZWZsYXRlU2V0SGVhZGVyKHRoaXMuc3RybSxiLmhlYWRlcikNCn07cy5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZT10aGlzLnN0cm0sZj10aGlzLm9wdGlvbnMuY2h1bmtTaXplO2lmKHRoaXMuZW5kZWQpcmV0dXJuITE7ZD1iPT09fn5iP2I6Yj09PSEwP206bCxlLmlucHV0PSJzdHJpbmciPT10eXBlb2YgYT9pLnN0cmluZzJidWYoYSk6YSxlLm5leHRfaW49MCxlLmF2YWlsX2luPWUuaW5wdXQubGVuZ3RoO2Rve2lmKDA9PT1lLmF2YWlsX291dCYmKGUub3V0cHV0PW5ldyBoLkJ1ZjgoZiksZS5uZXh0X291dD0wLGUuYXZhaWxfb3V0PWYpLGM9Zy5kZWZsYXRlKGUsZCksYyE9PW8mJmMhPT1uKXJldHVybiB0aGlzLm9uRW5kKGMpLHRoaXMuZW5kZWQ9ITAsITE7KDA9PT1lLmF2YWlsX291dHx8MD09PWUuYXZhaWxfaW4mJmQ9PT1tKSYmdGhpcy5vbkRhdGEoInN0cmluZyI9PT10aGlzLm9wdGlvbnMudG8/aS5idWYyYmluc3RyaW5nKGguc2hyaW5rQnVmKGUub3V0cHV0LGUubmV4dF9vdXQpKTpoLnNocmlua0J1ZihlLm91dHB1dCxlLm5leHRfb3V0KSl9d2hpbGUoKGUuYXZhaWxfaW4+MHx8MD09PWUuYXZhaWxfb3V0KSYmYyE9PW8pO3JldHVybiBkPT09bT8oYz1nLmRlZmxhdGVFbmQodGhpcy5zdHJtKSx0aGlzLm9uRW5kKGMpLHRoaXMuZW5kZWQ9ITAsYz09PW4pOiEwfSxzLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24oYSl7dGhpcy5jaHVua3MucHVzaChhKX0scy5wcm90b3R5cGUub25FbmQ9ZnVuY3Rpb24oYSl7YT09PW4mJih0aGlzLnJlc3VsdD0ic3RyaW5nIj09PXRoaXMub3B0aW9ucy50bz90aGlzLmNodW5rcy5qb2luKCIiKTpoLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpKSx0aGlzLmNodW5rcz1bXSx0aGlzLmVycj1hLHRoaXMubXNnPXRoaXMuc3RybS5tc2d9LGMuRGVmbGF0ZT1zLGMuZGVmbGF0ZT1kLGMuZGVmbGF0ZVJhdz1lLGMuZ3ppcD1mfSx7Ii4vdXRpbHMvY29tbW9uIjoyNywiLi91dGlscy9zdHJpbmdzIjoyOCwiLi96bGliL2RlZmxhdGUuanMiOjMyLCIuL3psaWIvbWVzc2FnZXMiOjM3LCIuL3psaWIvenN0cmVhbSI6Mzl9XSwyNjpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEsYil7dmFyIGM9bmV3IG0oYik7aWYoYy5wdXNoKGEsITApLGMuZXJyKXRocm93IGMubXNnO3JldHVybiBjLnJlc3VsdH1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGI9Ynx8e30sYi5yYXc9ITAsZChhLGIpfXZhciBmPWEoIi4vemxpYi9pbmZsYXRlLmpzIiksZz1hKCIuL3V0aWxzL2NvbW1vbiIpLGg9YSgiLi91dGlscy9zdHJpbmdzIiksaT1hKCIuL3psaWIvY29uc3RhbnRzIiksaj1hKCIuL3psaWIvbWVzc2FnZXMiKSxrPWEoIi4vemxpYi96c3RyZWFtIiksbD1hKCIuL3psaWIvZ3poZWFkZXIiKSxtPWZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz1nLmFzc2lnbih7Y2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MCx0bzoiIn0sYXx8e30pO3ZhciBiPXRoaXMub3B0aW9ucztiLnJhdyYmYi53aW5kb3dCaXRzPj0wJiZiLndpbmRvd0JpdHM8MTYmJihiLndpbmRvd0JpdHM9LWIud2luZG93Qml0cywwPT09Yi53aW5kb3dCaXRzJiYoYi53aW5kb3dCaXRzPS0xNSkpLCEoYi53aW5kb3dCaXRzPj0wJiZiLndpbmRvd0JpdHM8MTYpfHxhJiZhLndpbmRvd0JpdHN8fChiLndpbmRvd0JpdHMrPTMyKSxiLndpbmRvd0JpdHM+MTUmJmIud2luZG93Qml0czw0OCYmMD09PSgxNSZiLndpbmRvd0JpdHMpJiYoYi53aW5kb3dCaXRzfD0xNSksdGhpcy5lcnI9MCx0aGlzLm1zZz0iIix0aGlzLmVuZGVkPSExLHRoaXMuY2h1bmtzPVtdLHRoaXMuc3RybT1uZXcgayx0aGlzLnN0cm0uYXZhaWxfb3V0PTA7dmFyIGM9Zi5pbmZsYXRlSW5pdDIodGhpcy5zdHJtLGIud2luZG93Qml0cyk7aWYoYyE9PWkuWl9PSyl0aHJvdyBuZXcgRXJyb3IoaltjXSk7dGhpcy5oZWFkZXI9bmV3IGwsZi5pbmZsYXRlR2V0SGVhZGVyKHRoaXMuc3RybSx0aGlzLmhlYWRlcil9O20ucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsaixrLGw9dGhpcy5zdHJtLG09dGhpcy5vcHRpb25zLmNodW5rU2l6ZTtpZih0aGlzLmVuZGVkKXJldHVybiExO2Q9Yj09PX5+Yj9iOmI9PT0hMD9pLlpfRklOSVNIOmkuWl9OT19GTFVTSCxsLmlucHV0PSJzdHJpbmciPT10eXBlb2YgYT9oLmJpbnN0cmluZzJidWYoYSk6YSxsLm5leHRfaW49MCxsLmF2YWlsX2luPWwuaW5wdXQubGVuZ3RoO2Rve2lmKDA9PT1sLmF2YWlsX291dCYmKGwub3V0cHV0PW5ldyBnLkJ1ZjgobSksbC5uZXh0X291dD0wLGwuYXZhaWxfb3V0PW0pLGM9Zi5pbmZsYXRlKGwsaS5aX05PX0ZMVVNIKSxjIT09aS5aX1NUUkVBTV9FTkQmJmMhPT1pLlpfT0spcmV0dXJuIHRoaXMub25FbmQoYyksdGhpcy5lbmRlZD0hMCwhMTtsLm5leHRfb3V0JiYoMD09PWwuYXZhaWxfb3V0fHxjPT09aS5aX1NUUkVBTV9FTkR8fDA9PT1sLmF2YWlsX2luJiZkPT09aS5aX0ZJTklTSCkmJigic3RyaW5nIj09PXRoaXMub3B0aW9ucy50bz8oZT1oLnV0Zjhib3JkZXIobC5vdXRwdXQsbC5uZXh0X291dCksaj1sLm5leHRfb3V0LWUsaz1oLmJ1ZjJzdHJpbmcobC5vdXRwdXQsZSksbC5uZXh0X291dD1qLGwuYXZhaWxfb3V0PW0taixqJiZnLmFycmF5U2V0KGwub3V0cHV0LGwub3V0cHV0LGUsaiwwKSx0aGlzLm9uRGF0YShrKSk6dGhpcy5vbkRhdGEoZy5zaHJpbmtCdWYobC5vdXRwdXQsbC5uZXh0X291dCkpKX13aGlsZShsLmF2YWlsX2luPjAmJmMhPT1pLlpfU1RSRUFNX0VORCk7cmV0dXJuIGM9PT1pLlpfU1RSRUFNX0VORCYmKGQ9aS5aX0ZJTklTSCksZD09PWkuWl9GSU5JU0g/KGM9Zi5pbmZsYXRlRW5kKHRoaXMuc3RybSksdGhpcy5vbkVuZChjKSx0aGlzLmVuZGVkPSEwLGM9PT1pLlpfT0spOiEwfSxtLnByb3RvdHlwZS5vbkRhdGE9ZnVuY3Rpb24oYSl7dGhpcy5jaHVua3MucHVzaChhKX0sbS5wcm90b3R5cGUub25FbmQ9ZnVuY3Rpb24oYSl7YT09PWkuWl9PSyYmKHRoaXMucmVzdWx0PSJzdHJpbmciPT09dGhpcy5vcHRpb25zLnRvP3RoaXMuY2h1bmtzLmpvaW4oIiIpOmcuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcykpLHRoaXMuY2h1bmtzPVtdLHRoaXMuZXJyPWEsdGhpcy5tc2c9dGhpcy5zdHJtLm1zZ30sYy5JbmZsYXRlPW0sYy5pbmZsYXRlPWQsYy5pbmZsYXRlUmF3PWUsYy51bmd6aXA9ZH0seyIuL3V0aWxzL2NvbW1vbiI6MjcsIi4vdXRpbHMvc3RyaW5ncyI6MjgsIi4vemxpYi9jb25zdGFudHMiOjMwLCIuL3psaWIvZ3poZWFkZXIiOjMzLCIuL3psaWIvaW5mbGF0ZS5qcyI6MzUsIi4vemxpYi9tZXNzYWdlcyI6MzcsIi4vemxpYi96c3RyZWFtIjozOX1dLDI3OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO3ZhciBkPSJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhBcnJheSYmInVuZGVmaW5lZCIhPXR5cGVvZiBVaW50MTZBcnJheSYmInVuZGVmaW5lZCIhPXR5cGVvZiBJbnQzMkFycmF5O2MuYXNzaWduPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7Yi5sZW5ndGg7KXt2YXIgYz1iLnNoaWZ0KCk7aWYoYyl7aWYoIm9iamVjdCIhPXR5cGVvZiBjKXRocm93IG5ldyBUeXBlRXJyb3IoYysibXVzdCBiZSBub24tb2JqZWN0Iik7Zm9yKHZhciBkIGluIGMpYy5oYXNPd25Qcm9wZXJ0eShkKSYmKGFbZF09Y1tkXSl9fXJldHVybiBhfSxjLnNocmlua0J1Zj1mdW5jdGlvbihhLGIpe3JldHVybiBhLmxlbmd0aD09PWI/YTphLnN1YmFycmF5P2Euc3ViYXJyYXkoMCxiKTooYS5sZW5ndGg9YixhKX07dmFyIGU9e2FycmF5U2V0OmZ1bmN0aW9uKGEsYixjLGQsZSl7aWYoYi5zdWJhcnJheSYmYS5zdWJhcnJheSlyZXR1cm4gdm9pZCBhLnNldChiLnN1YmFycmF5KGMsYytkKSxlKTtmb3IodmFyIGY9MDtkPmY7ZisrKWFbZStmXT1iW2MrZl19LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnO2ZvcihkPTAsYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKylkKz1hW2JdLmxlbmd0aDtmb3IoZz1uZXcgVWludDhBcnJheShkKSxlPTAsYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKylmPWFbYl0sZy5zZXQoZixlKSxlKz1mLmxlbmd0aDtyZXR1cm4gZ319LGY9e2FycmF5U2V0OmZ1bmN0aW9uKGEsYixjLGQsZSl7Zm9yKHZhciBmPTA7ZD5mO2YrKylhW2UrZl09YltjK2ZdfSxmbGF0dGVuQ2h1bmtzOmZ1bmN0aW9uKGEpe3JldHVybltdLmNvbmNhdC5hcHBseShbXSxhKX19O2Muc2V0VHlwZWQ9ZnVuY3Rpb24oYSl7YT8oYy5CdWY4PVVpbnQ4QXJyYXksYy5CdWYxNj1VaW50MTZBcnJheSxjLkJ1ZjMyPUludDMyQXJyYXksYy5hc3NpZ24oYyxlKSk6KGMuQnVmOD1BcnJheSxjLkJ1ZjE2PUFycmF5LGMuQnVmMzI9QXJyYXksYy5hc3NpZ24oYyxmKSl9LGMuc2V0VHlwZWQoZCl9LHt9XSwyODpbZnVuY3Rpb24oYSxiLGMpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKGEsYil7aWYoNjU1Mzc+YiYmKGEuc3ViYXJyYXkmJmd8fCFhLnN1YmFycmF5JiZmKSlyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGUuc2hyaW5rQnVmKGEsYikpO2Zvcih2YXIgYz0iIixkPTA7Yj5kO2QrKyljKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGFbZF0pO3JldHVybiBjfXZhciBlPWEoIi4vY29tbW9uIiksZj0hMCxnPSEwO3RyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsWzBdKX1jYXRjaChoKXtmPSExfXRyeXtTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoMSkpfWNhdGNoKGgpe2c9ITF9Zm9yKHZhciBpPW5ldyBlLkJ1ZjgoMjU2KSxqPTA7MjU2Pmo7aisrKWlbal09aj49MjUyPzY6aj49MjQ4PzU6aj49MjQwPzQ6aj49MjI0PzM6aj49MTkyPzI6MTtpWzI1NF09aVsyNTRdPTEsYy5zdHJpbmcyYnVmPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxmLGcsaD1hLmxlbmd0aCxpPTA7Zm9yKGY9MDtoPmY7ZisrKWM9YS5jaGFyQ29kZUF0KGYpLDU1Mjk2PT09KDY0NTEyJmMpJiZoPmYrMSYmKGQ9YS5jaGFyQ29kZUF0KGYrMSksNTYzMjA9PT0oNjQ1MTImZCkmJihjPTY1NTM2KyhjLTU1Mjk2PDwxMCkrKGQtNTYzMjApLGYrKykpLGkrPTEyOD5jPzE6MjA0OD5jPzI6NjU1MzY+Yz8zOjQ7Zm9yKGI9bmV3IGUuQnVmOChpKSxnPTAsZj0wO2k+ZztmKyspYz1hLmNoYXJDb2RlQXQoZiksNTUyOTY9PT0oNjQ1MTImYykmJmg+ZisxJiYoZD1hLmNoYXJDb2RlQXQoZisxKSw1NjMyMD09PSg2NDUxMiZkKSYmKGM9NjU1MzYrKGMtNTUyOTY8PDEwKSsoZC01NjMyMCksZisrKSksMTI4PmM/YltnKytdPWM6MjA0OD5jPyhiW2crK109MTkyfGM+Pj42LGJbZysrXT0xMjh8NjMmYyk6NjU1MzY+Yz8oYltnKytdPTIyNHxjPj4+MTIsYltnKytdPTEyOHxjPj4+NiY2MyxiW2crK109MTI4fDYzJmMpOihiW2crK109MjQwfGM+Pj4xOCxiW2crK109MTI4fGM+Pj4xMiY2MyxiW2crK109MTI4fGM+Pj42JjYzLGJbZysrXT0xMjh8NjMmYyk7cmV0dXJuIGJ9LGMuYnVmMmJpbnN0cmluZz1mdW5jdGlvbihhKXtyZXR1cm4gZChhLGEubGVuZ3RoKX0sYy5iaW5zdHJpbmcyYnVmPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1uZXcgZS5CdWY4KGEubGVuZ3RoKSxjPTAsZD1iLmxlbmd0aDtkPmM7YysrKWJbY109YS5jaGFyQ29kZUF0KGMpO3JldHVybiBifSxjLmJ1ZjJzdHJpbmc9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoPWJ8fGEubGVuZ3RoLGo9bmV3IEFycmF5KDIqaCk7Zm9yKGU9MCxjPTA7aD5jOylpZihmPWFbYysrXSwxMjg+ZilqW2UrK109ZjtlbHNlIGlmKGc9aVtmXSxnPjQpaltlKytdPTY1NTMzLGMrPWctMTtlbHNle2ZvcihmJj0yPT09Zz8zMTozPT09Zz8xNTo3O2c+MSYmaD5jOylmPWY8PDZ8NjMmYVtjKytdLGctLTtnPjE/altlKytdPTY1NTMzOjY1NTM2PmY/altlKytdPWY6KGYtPTY1NTM2LGpbZSsrXT01NTI5NnxmPj4xMCYxMDIzLGpbZSsrXT01NjMyMHwxMDIzJmYpfXJldHVybiBkKGosZSl9LGMudXRmOGJvcmRlcj1mdW5jdGlvbihhLGIpe3ZhciBjO2ZvcihiPWJ8fGEubGVuZ3RoLGI+YS5sZW5ndGgmJihiPWEubGVuZ3RoKSxjPWItMTtjPj0wJiYxMjg9PT0oMTkyJmFbY10pOyljLS07cmV0dXJuIDA+Yz9iOjA9PT1jP2I6YytpW2FbY11dPmI/YzpifX0seyIuL2NvbW1vbiI6Mjd9XSwyOTpbZnVuY3Rpb24oYSxiKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gYyhhLGIsYyxkKXtmb3IodmFyIGU9NjU1MzUmYXwwLGY9YT4+PjE2JjY1NTM1fDAsZz0wOzAhPT1jOyl7Zz1jPjJlMz8yZTM6YyxjLT1nO2RvIGU9ZStiW2QrK118MCxmPWYrZXwwO3doaWxlKC0tZyk7ZSU9NjU1MjEsZiU9NjU1MjF9cmV0dXJuIGV8Zjw8MTZ8MH1iLmV4cG9ydHM9Y30se31dLDMwOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz17Wl9OT19GTFVTSDowLFpfUEFSVElBTF9GTFVTSDoxLFpfU1lOQ19GTFVTSDoyLFpfRlVMTF9GTFVTSDozLFpfRklOSVNIOjQsWl9CTE9DSzo1LFpfVFJFRVM6NixaX09LOjAsWl9TVFJFQU1fRU5EOjEsWl9ORUVEX0RJQ1Q6MixaX0VSUk5POi0xLFpfU1RSRUFNX0VSUk9SOi0yLFpfREFUQV9FUlJPUjotMyxaX0JVRl9FUlJPUjotNSxaX05PX0NPTVBSRVNTSU9OOjAsWl9CRVNUX1NQRUVEOjEsWl9CRVNUX0NPTVBSRVNTSU9OOjksWl9ERUZBVUxUX0NPTVBSRVNTSU9OOi0xLFpfRklMVEVSRUQ6MSxaX0hVRkZNQU5fT05MWToyLFpfUkxFOjMsWl9GSVhFRDo0LFpfREVGQVVMVF9TVFJBVEVHWTowLFpfQklOQVJZOjAsWl9URVhUOjEsWl9VTktOT1dOOjIsWl9ERUZMQVRFRDo4fX0se31dLDMxOltmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBjKCl7Zm9yKHZhciBhLGI9W10sYz0wOzI1Nj5jO2MrKyl7YT1jO2Zvcih2YXIgZD0wOzg+ZDtkKyspYT0xJmE/Mzk4ODI5MjM4NF5hPj4+MTphPj4+MTtiW2NdPWF9cmV0dXJuIGJ9ZnVuY3Rpb24gZChhLGIsYyxkKXt2YXIgZj1lLGc9ZCtjO2E9LTFeYTtmb3IodmFyIGg9ZDtnPmg7aCsrKWE9YT4+PjheZlsyNTUmKGFeYltoXSldO3JldHVybi0xXmF9dmFyIGU9YygpO2IuZXhwb3J0cz1kfSx7fV0sMzI6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhLGIpe3JldHVybiBhLm1zZz1HW2JdLGJ9ZnVuY3Rpb24gZShhKXtyZXR1cm4oYTw8MSktKGE+ND85OjApfWZ1bmN0aW9uIGYoYSl7Zm9yKHZhciBiPWEubGVuZ3RoOy0tYj49MDspYVtiXT0wfWZ1bmN0aW9uIGcoYSl7dmFyIGI9YS5zdGF0ZSxjPWIucGVuZGluZztjPmEuYXZhaWxfb3V0JiYoYz1hLmF2YWlsX291dCksMCE9PWMmJihDLmFycmF5U2V0KGEub3V0cHV0LGIucGVuZGluZ19idWYsYi5wZW5kaW5nX291dCxjLGEubmV4dF9vdXQpLGEubmV4dF9vdXQrPWMsYi5wZW5kaW5nX291dCs9YyxhLnRvdGFsX291dCs9YyxhLmF2YWlsX291dC09YyxiLnBlbmRpbmctPWMsMD09PWIucGVuZGluZyYmKGIucGVuZGluZ19vdXQ9MCkpfWZ1bmN0aW9uIGgoYSxiKXtELl90cl9mbHVzaF9ibG9jayhhLGEuYmxvY2tfc3RhcnQ+PTA/YS5ibG9ja19zdGFydDotMSxhLnN0cnN0YXJ0LWEuYmxvY2tfc3RhcnQsYiksYS5ibG9ja19zdGFydD1hLnN0cnN0YXJ0LGcoYS5zdHJtKX1mdW5jdGlvbiBpKGEsYil7YS5wZW5kaW5nX2J1ZlthLnBlbmRpbmcrK109Yn1mdW5jdGlvbiBqKGEsYil7YS5wZW5kaW5nX2J1ZlthLnBlbmRpbmcrK109Yj4+PjgmMjU1LGEucGVuZGluZ19idWZbYS5wZW5kaW5nKytdPTI1NSZifWZ1bmN0aW9uIGsoYSxiLGMsZCl7dmFyIGU9YS5hdmFpbF9pbjtyZXR1cm4gZT5kJiYoZT1kKSwwPT09ZT8wOihhLmF2YWlsX2luLT1lLEMuYXJyYXlTZXQoYixhLmlucHV0LGEubmV4dF9pbixlLGMpLDE9PT1hLnN0YXRlLndyYXA/YS5hZGxlcj1FKGEuYWRsZXIsYixlLGMpOjI9PT1hLnN0YXRlLndyYXAmJihhLmFkbGVyPUYoYS5hZGxlcixiLGUsYykpLGEubmV4dF9pbis9ZSxhLnRvdGFsX2luKz1lLGUpfWZ1bmN0aW9uIGwoYSxiKXt2YXIgYyxkLGU9YS5tYXhfY2hhaW5fbGVuZ3RoLGY9YS5zdHJzdGFydCxnPWEucHJldl9sZW5ndGgsaD1hLm5pY2VfbWF0Y2gsaT1hLnN0cnN0YXJ0PmEud19zaXplLWpiP2Euc3Ryc3RhcnQtKGEud19zaXplLWpiKTowLGo9YS53aW5kb3csaz1hLndfbWFzayxsPWEucHJldixtPWEuc3Ryc3RhcnQraWIsbj1qW2YrZy0xXSxvPWpbZitnXTthLnByZXZfbGVuZ3RoPj1hLmdvb2RfbWF0Y2gmJihlPj49MiksaD5hLmxvb2thaGVhZCYmKGg9YS5sb29rYWhlYWQpO2RvIGlmKGM9YixqW2MrZ109PT1vJiZqW2MrZy0xXT09PW4mJmpbY109PT1qW2ZdJiZqWysrY109PT1qW2YrMV0pe2YrPTIsYysrO2RvO3doaWxlKGpbKytmXT09PWpbKytjXSYmalsrK2ZdPT09alsrK2NdJiZqWysrZl09PT1qWysrY10mJmpbKytmXT09PWpbKytjXSYmalsrK2ZdPT09alsrK2NdJiZqWysrZl09PT1qWysrY10mJmpbKytmXT09PWpbKytjXSYmalsrK2ZdPT09alsrK2NdJiZtPmYpO2lmKGQ9aWItKG0tZiksZj1tLWliLGQ+Zyl7aWYoYS5tYXRjaF9zdGFydD1iLGc9ZCxkPj1oKWJyZWFrO249altmK2ctMV0sbz1qW2YrZ119fXdoaWxlKChiPWxbYiZrXSk+aSYmMCE9PS0tZSk7cmV0dXJuIGc8PWEubG9va2FoZWFkP2c6YS5sb29rYWhlYWR9ZnVuY3Rpb24gbShhKXt2YXIgYixjLGQsZSxmLGc9YS53X3NpemU7ZG97aWYoZT1hLndpbmRvd19zaXplLWEubG9va2FoZWFkLWEuc3Ryc3RhcnQsYS5zdHJzdGFydD49ZysoZy1qYikpe0MuYXJyYXlTZXQoYS53aW5kb3csYS53aW5kb3csZyxnLDApLGEubWF0Y2hfc3RhcnQtPWcsYS5zdHJzdGFydC09ZyxhLmJsb2NrX3N0YXJ0LT1nLGM9YS5oYXNoX3NpemUsYj1jO2RvIGQ9YS5oZWFkWy0tYl0sYS5oZWFkW2JdPWQ+PWc/ZC1nOjA7d2hpbGUoLS1jKTtjPWcsYj1jO2RvIGQ9YS5wcmV2Wy0tYl0sYS5wcmV2W2JdPWQ+PWc/ZC1nOjA7d2hpbGUoLS1jKTtlKz1nfWlmKDA9PT1hLnN0cm0uYXZhaWxfaW4pYnJlYWs7aWYoYz1rKGEuc3RybSxhLndpbmRvdyxhLnN0cnN0YXJ0K2EubG9va2FoZWFkLGUpLGEubG9va2FoZWFkKz1jLGEubG9va2FoZWFkK2EuaW5zZXJ0Pj1oYilmb3IoZj1hLnN0cnN0YXJ0LWEuaW5zZXJ0LGEuaW5zX2g9YS53aW5kb3dbZl0sYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2YrMV0pJmEuaGFzaF9tYXNrO2EuaW5zZXJ0JiYoYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2YraGItMV0pJmEuaGFzaF9tYXNrLGEucHJldltmJmEud19tYXNrXT1hLmhlYWRbYS5pbnNfaF0sYS5oZWFkW2EuaW5zX2hdPWYsZisrLGEuaW5zZXJ0LS0sIShhLmxvb2thaGVhZCthLmluc2VydDxoYikpOyk7fXdoaWxlKGEubG9va2FoZWFkPGpiJiYwIT09YS5zdHJtLmF2YWlsX2luKX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9NjU1MzU7Zm9yKGM+YS5wZW5kaW5nX2J1Zl9zaXplLTUmJihjPWEucGVuZGluZ19idWZfc2l6ZS01KTs7KXtpZihhLmxvb2thaGVhZDw9MSl7aWYobShhKSwwPT09YS5sb29rYWhlYWQmJmI9PT1IKXJldHVybiBzYjtpZigwPT09YS5sb29rYWhlYWQpYnJlYWt9YS5zdHJzdGFydCs9YS5sb29rYWhlYWQsYS5sb29rYWhlYWQ9MDt2YXIgZD1hLmJsb2NrX3N0YXJ0K2M7aWYoKDA9PT1hLnN0cnN0YXJ0fHxhLnN0cnN0YXJ0Pj1kKSYmKGEubG9va2FoZWFkPWEuc3Ryc3RhcnQtZCxhLnN0cnN0YXJ0PWQsaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIHNiO2lmKGEuc3Ryc3RhcnQtYS5ibG9ja19zdGFydD49YS53X3NpemUtamImJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gc2J9cmV0dXJuIGEuaW5zZXJ0PTAsYj09PUs/KGgoYSwhMCksMD09PWEuc3RybS5hdmFpbF9vdXQ/dWI6dmIpOmEuc3Ryc3RhcnQ+YS5ibG9ja19zdGFydCYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpP3NiOnNifWZ1bmN0aW9uIG8oYSxiKXtmb3IodmFyIGMsZDs7KXtpZihhLmxvb2thaGVhZDxqYil7aWYobShhKSxhLmxvb2thaGVhZDxqYiYmYj09PUgpcmV0dXJuIHNiO2lmKDA9PT1hLmxvb2thaGVhZClicmVha31pZihjPTAsYS5sb29rYWhlYWQ+PWhiJiYoYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2Euc3Ryc3RhcnQraGItMV0pJmEuaGFzaF9tYXNrLGM9YS5wcmV2W2Euc3Ryc3RhcnQmYS53X21hc2tdPWEuaGVhZFthLmluc19oXSxhLmhlYWRbYS5pbnNfaF09YS5zdHJzdGFydCksMCE9PWMmJmEuc3Ryc3RhcnQtYzw9YS53X3NpemUtamImJihhLm1hdGNoX2xlbmd0aD1sKGEsYykpLGEubWF0Y2hfbGVuZ3RoPj1oYilpZihkPUQuX3RyX3RhbGx5KGEsYS5zdHJzdGFydC1hLm1hdGNoX3N0YXJ0LGEubWF0Y2hfbGVuZ3RoLWhiKSxhLmxvb2thaGVhZC09YS5tYXRjaF9sZW5ndGgsYS5tYXRjaF9sZW5ndGg8PWEubWF4X2xhenlfbWF0Y2gmJmEubG9va2FoZWFkPj1oYil7YS5tYXRjaF9sZW5ndGgtLTtkbyBhLnN0cnN0YXJ0KyssYS5pbnNfaD0oYS5pbnNfaDw8YS5oYXNoX3NoaWZ0XmEud2luZG93W2Euc3Ryc3RhcnQraGItMV0pJmEuaGFzaF9tYXNrLGM9YS5wcmV2W2Euc3Ryc3RhcnQmYS53X21hc2tdPWEuaGVhZFthLmluc19oXSxhLmhlYWRbYS5pbnNfaF09YS5zdHJzdGFydDt3aGlsZSgwIT09LS1hLm1hdGNoX2xlbmd0aCk7YS5zdHJzdGFydCsrfWVsc2UgYS5zdHJzdGFydCs9YS5tYXRjaF9sZW5ndGgsYS5tYXRjaF9sZW5ndGg9MCxhLmluc19oPWEud2luZG93W2Euc3Ryc3RhcnRdLGEuaW5zX2g9KGEuaW5zX2g8PGEuaGFzaF9zaGlmdF5hLndpbmRvd1thLnN0cnN0YXJ0KzFdKSZhLmhhc2hfbWFzaztlbHNlIGQ9RC5fdHJfdGFsbHkoYSwwLGEud2luZG93W2Euc3Ryc3RhcnRdKSxhLmxvb2thaGVhZC0tLGEuc3Ryc3RhcnQrKztpZihkJiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCkpcmV0dXJuIHNifXJldHVybiBhLmluc2VydD1hLnN0cnN0YXJ0PGhiLTE/YS5zdHJzdGFydDpoYi0xLGI9PT1LPyhoKGEsITApLDA9PT1hLnN0cm0uYXZhaWxfb3V0P3ViOnZiKTphLmxhc3RfbGl0JiYoaChhLCExKSwwPT09YS5zdHJtLmF2YWlsX291dCk/c2I6dGJ9ZnVuY3Rpb24gcChhLGIpe2Zvcih2YXIgYyxkLGU7Oyl7aWYoYS5sb29rYWhlYWQ8amIpe2lmKG0oYSksYS5sb29rYWhlYWQ8amImJmI9PT1IKXJldHVybiBzYjtpZigwPT09YS5sb29rYWhlYWQpYnJlYWt9aWYoYz0wLGEubG9va2FoZWFkPj1oYiYmKGEuaW5zX2g9KGEuaW5zX2g8PGEuaGFzaF9zaGlmdF5hLndpbmRvd1thLnN0cnN0YXJ0K2hiLTFdKSZhLmhhc2hfbWFzayxjPWEucHJldlthLnN0cnN0YXJ0JmEud19tYXNrXT1hLmhlYWRbYS5pbnNfaF0sYS5oZWFkW2EuaW5zX2hdPWEuc3Ryc3RhcnQpLGEucHJldl9sZW5ndGg9YS5tYXRjaF9sZW5ndGgsYS5wcmV2X21hdGNoPWEubWF0Y2hfc3RhcnQsYS5tYXRjaF9sZW5ndGg9aGItMSwwIT09YyYmYS5wcmV2X2xlbmd0aDxhLm1heF9sYXp5X21hdGNoJiZhLnN0cnN0YXJ0LWM8PWEud19zaXplLWpiJiYoYS5tYXRjaF9sZW5ndGg9bChhLGMpLGEubWF0Y2hfbGVuZ3RoPD01JiYoYS5zdHJhdGVneT09PVN8fGEubWF0Y2hfbGVuZ3RoPT09aGImJmEuc3Ryc3RhcnQtYS5tYXRjaF9zdGFydD40MDk2KSYmKGEubWF0Y2hfbGVuZ3RoPWhiLTEpKSxhLnByZXZfbGVuZ3RoPj1oYiYmYS5tYXRjaF9sZW5ndGg8PWEucHJldl9sZW5ndGgpe2U9YS5zdHJzdGFydCthLmxvb2thaGVhZC1oYixkPUQuX3RyX3RhbGx5KGEsYS5zdHJzdGFydC0xLWEucHJldl9tYXRjaCxhLnByZXZfbGVuZ3RoLWhiKSxhLmxvb2thaGVhZC09YS5wcmV2X2xlbmd0aC0xLGEucHJldl9sZW5ndGgtPTI7ZG8rK2Euc3Ryc3RhcnQ8PWUmJihhLmluc19oPShhLmluc19oPDxhLmhhc2hfc2hpZnReYS53aW5kb3dbYS5zdHJzdGFydCtoYi0xXSkmYS5oYXNoX21hc2ssYz1hLnByZXZbYS5zdHJzdGFydCZhLndfbWFza109YS5oZWFkW2EuaW5zX2hdLGEuaGVhZFthLmluc19oXT1hLnN0cnN0YXJ0KTt3aGlsZSgwIT09LS1hLnByZXZfbGVuZ3RoKTtpZihhLm1hdGNoX2F2YWlsYWJsZT0wLGEubWF0Y2hfbGVuZ3RoPWhiLTEsYS5zdHJzdGFydCsrLGQmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gc2J9ZWxzZSBpZihhLm1hdGNoX2F2YWlsYWJsZSl7aWYoZD1ELl90cl90YWxseShhLDAsYS53aW5kb3dbYS5zdHJzdGFydC0xXSksZCYmaChhLCExKSxhLnN0cnN0YXJ0KyssYS5sb29rYWhlYWQtLSwwPT09YS5zdHJtLmF2YWlsX291dClyZXR1cm4gc2J9ZWxzZSBhLm1hdGNoX2F2YWlsYWJsZT0xLGEuc3Ryc3RhcnQrKyxhLmxvb2thaGVhZC0tfXJldHVybiBhLm1hdGNoX2F2YWlsYWJsZSYmKGQ9RC5fdHJfdGFsbHkoYSwwLGEud2luZG93W2Euc3Ryc3RhcnQtMV0pLGEubWF0Y2hfYXZhaWxhYmxlPTApLGEuaW5zZXJ0PWEuc3Ryc3RhcnQ8aGItMT9hLnN0cnN0YXJ0OmhiLTEsYj09PUs/KGgoYSwhMCksMD09PWEuc3RybS5hdmFpbF9vdXQ/dWI6dmIpOmEubGFzdF9saXQmJihoKGEsITEpLDA9PT1hLnN0cm0uYXZhaWxfb3V0KT9zYjp0Yn1mdW5jdGlvbiBxKGEsYil7Zm9yKHZhciBjLGQsZSxmLGc9YS53aW5kb3c7Oyl7aWYoYS5sb29rYWhlYWQ8PWliKXtpZihtKGEpLGEubG9va2FoZWFkPD1pYiYmYj09PUgpcmV0dXJuIHNiO2lmKDA9PT1hLmxvb2thaGVhZClicmVha31pZihhLm1hdGNoX2xlbmd0aD0wLGEubG9va2FoZWFkPj1oYiYmYS5zdHJzdGFydD4wJiYoZT1hLnN0cnN0YXJ0LTEsZD1nW2VdLGQ9PT1nWysrZV0mJmQ9PT1nWysrZV0mJmQ9PT1nWysrZV0pKXtmPWEuc3Ryc3RhcnQraWI7ZG87d2hpbGUoZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZD09PWdbKytlXSYmZj5lKTthLm1hdGNoX2xlbmd0aD1pYi0oZi1lKSxhLm1hdGNoX2xlbmd0aD5hLmxvb2thaGVhZCYmKGEubWF0Y2hfbGVuZ3RoPWEubG9va2FoZWFkKX1pZihhLm1hdGNoX2xlbmd0aD49aGI/KGM9RC5fdHJfdGFsbHkoYSwxLGEubWF0Y2hfbGVuZ3RoLWhiKSxhLmxvb2thaGVhZC09YS5tYXRjaF9sZW5ndGgsYS5zdHJzdGFydCs9YS5tYXRjaF9sZW5ndGgsYS5tYXRjaF9sZW5ndGg9MCk6KGM9RC5fdHJfdGFsbHkoYSwwLGEud2luZG93W2Euc3Ryc3RhcnRdKSxhLmxvb2thaGVhZC0tLGEuc3Ryc3RhcnQrKyksYyYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpKXJldHVybiBzYn1yZXR1cm4gYS5pbnNlcnQ9MCxiPT09Sz8oaChhLCEwKSwwPT09YS5zdHJtLmF2YWlsX291dD91Yjp2Yik6YS5sYXN0X2xpdCYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpP3NiOnRifWZ1bmN0aW9uIHIoYSxiKXtmb3IodmFyIGM7Oyl7aWYoMD09PWEubG9va2FoZWFkJiYobShhKSwwPT09YS5sb29rYWhlYWQpKXtpZihiPT09SClyZXR1cm4gc2I7YnJlYWt9aWYoYS5tYXRjaF9sZW5ndGg9MCxjPUQuX3RyX3RhbGx5KGEsMCxhLndpbmRvd1thLnN0cnN0YXJ0XSksYS5sb29rYWhlYWQtLSxhLnN0cnN0YXJ0KyssYyYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpKXJldHVybiBzYn1yZXR1cm4gYS5pbnNlcnQ9MCxiPT09Sz8oaChhLCEwKSwwPT09YS5zdHJtLmF2YWlsX291dD91Yjp2Yik6YS5sYXN0X2xpdCYmKGgoYSwhMSksMD09PWEuc3RybS5hdmFpbF9vdXQpP3NiOnRifWZ1bmN0aW9uIHMoYSl7YS53aW5kb3dfc2l6ZT0yKmEud19zaXplLGYoYS5oZWFkKSxhLm1heF9sYXp5X21hdGNoPUJbYS5sZXZlbF0ubWF4X2xhenksYS5nb29kX21hdGNoPUJbYS5sZXZlbF0uZ29vZF9sZW5ndGgsYS5uaWNlX21hdGNoPUJbYS5sZXZlbF0ubmljZV9sZW5ndGgsYS5tYXhfY2hhaW5fbGVuZ3RoPUJbYS5sZXZlbF0ubWF4X2NoYWluLGEuc3Ryc3RhcnQ9MCxhLmJsb2NrX3N0YXJ0PTAsYS5sb29rYWhlYWQ9MCxhLmluc2VydD0wLGEubWF0Y2hfbGVuZ3RoPWEucHJldl9sZW5ndGg9aGItMSxhLm1hdGNoX2F2YWlsYWJsZT0wLGEuaW5zX2g9MH1mdW5jdGlvbiB0KCl7dGhpcy5zdHJtPW51bGwsdGhpcy5zdGF0dXM9MCx0aGlzLnBlbmRpbmdfYnVmPW51bGwsdGhpcy5wZW5kaW5nX2J1Zl9zaXplPTAsdGhpcy5wZW5kaW5nX291dD0wLHRoaXMucGVuZGluZz0wLHRoaXMud3JhcD0wLHRoaXMuZ3poZWFkPW51bGwsdGhpcy5nemluZGV4PTAsdGhpcy5tZXRob2Q9WSx0aGlzLmxhc3RfZmx1c2g9LTEsdGhpcy53X3NpemU9MCx0aGlzLndfYml0cz0wLHRoaXMud19tYXNrPTAsdGhpcy53aW5kb3c9bnVsbCx0aGlzLndpbmRvd19zaXplPTAsdGhpcy5wcmV2PW51bGwsdGhpcy5oZWFkPW51bGwsdGhpcy5pbnNfaD0wLHRoaXMuaGFzaF9zaXplPTAsdGhpcy5oYXNoX2JpdHM9MCx0aGlzLmhhc2hfbWFzaz0wLHRoaXMuaGFzaF9zaGlmdD0wLHRoaXMuYmxvY2tfc3RhcnQ9MCx0aGlzLm1hdGNoX2xlbmd0aD0wLHRoaXMucHJldl9tYXRjaD0wLHRoaXMubWF0Y2hfYXZhaWxhYmxlPTAsdGhpcy5zdHJzdGFydD0wLHRoaXMubWF0Y2hfc3RhcnQ9MCx0aGlzLmxvb2thaGVhZD0wLHRoaXMucHJldl9sZW5ndGg9MCx0aGlzLm1heF9jaGFpbl9sZW5ndGg9MCx0aGlzLm1heF9sYXp5X21hdGNoPTAsdGhpcy5sZXZlbD0wLHRoaXMuc3RyYXRlZ3k9MCx0aGlzLmdvb2RfbWF0Y2g9MCx0aGlzLm5pY2VfbWF0Y2g9MCx0aGlzLmR5bl9sdHJlZT1uZXcgQy5CdWYxNigyKmZiKSx0aGlzLmR5bl9kdHJlZT1uZXcgQy5CdWYxNigyKigyKmRiKzEpKSx0aGlzLmJsX3RyZWU9bmV3IEMuQnVmMTYoMiooMiplYisxKSksZih0aGlzLmR5bl9sdHJlZSksZih0aGlzLmR5bl9kdHJlZSksZih0aGlzLmJsX3RyZWUpLHRoaXMubF9kZXNjPW51bGwsdGhpcy5kX2Rlc2M9bnVsbCx0aGlzLmJsX2Rlc2M9bnVsbCx0aGlzLmJsX2NvdW50PW5ldyBDLkJ1ZjE2KGdiKzEpLHRoaXMuaGVhcD1uZXcgQy5CdWYxNigyKmNiKzEpLGYodGhpcy5oZWFwKSx0aGlzLmhlYXBfbGVuPTAsdGhpcy5oZWFwX21heD0wLHRoaXMuZGVwdGg9bmV3IEMuQnVmMTYoMipjYisxKSxmKHRoaXMuZGVwdGgpLHRoaXMubF9idWY9MCx0aGlzLmxpdF9idWZzaXplPTAsdGhpcy5sYXN0X2xpdD0wLHRoaXMuZF9idWY9MCx0aGlzLm9wdF9sZW49MCx0aGlzLnN0YXRpY19sZW49MCx0aGlzLm1hdGNoZXM9MCx0aGlzLmluc2VydD0wLHRoaXMuYmlfYnVmPTAsdGhpcy5iaV92YWxpZD0wfWZ1bmN0aW9uIHUoYSl7dmFyIGI7cmV0dXJuIGEmJmEuc3RhdGU/KGEudG90YWxfaW49YS50b3RhbF9vdXQ9MCxhLmRhdGFfdHlwZT1YLGI9YS5zdGF0ZSxiLnBlbmRpbmc9MCxiLnBlbmRpbmdfb3V0PTAsYi53cmFwPDAmJihiLndyYXA9LWIud3JhcCksYi5zdGF0dXM9Yi53cmFwP2xiOnFiLGEuYWRsZXI9Mj09PWIud3JhcD8wOjEsYi5sYXN0X2ZsdXNoPUgsRC5fdHJfaW5pdChiKSxNKTpkKGEsTyl9ZnVuY3Rpb24gdihhKXt2YXIgYj11KGEpO3JldHVybiBiPT09TSYmcyhhLnN0YXRlKSxifWZ1bmN0aW9uIHcoYSxiKXtyZXR1cm4gYSYmYS5zdGF0ZT8yIT09YS5zdGF0ZS53cmFwP086KGEuc3RhdGUuZ3poZWFkPWIsTSk6T31mdW5jdGlvbiB4KGEsYixjLGUsZixnKXtpZighYSlyZXR1cm4gTzt2YXIgaD0xO2lmKGI9PT1SJiYoYj02KSwwPmU/KGg9MCxlPS1lKTplPjE1JiYoaD0yLGUtPTE2KSwxPmZ8fGY+Wnx8YyE9PVl8fDg+ZXx8ZT4xNXx8MD5ifHxiPjl8fDA+Z3x8Zz5WKXJldHVybiBkKGEsTyk7OD09PWUmJihlPTkpO3ZhciBpPW5ldyB0O3JldHVybiBhLnN0YXRlPWksaS5zdHJtPWEsaS53cmFwPWgsaS5nemhlYWQ9bnVsbCxpLndfYml0cz1lLGkud19zaXplPTE8PGkud19iaXRzLGkud19tYXNrPWkud19zaXplLTEsaS5oYXNoX2JpdHM9Zis3LGkuaGFzaF9zaXplPTE8PGkuaGFzaF9iaXRzLGkuaGFzaF9tYXNrPWkuaGFzaF9zaXplLTEsaS5oYXNoX3NoaWZ0PX5+KChpLmhhc2hfYml0cytoYi0xKS9oYiksaS53aW5kb3c9bmV3IEMuQnVmOCgyKmkud19zaXplKSxpLmhlYWQ9bmV3IEMuQnVmMTYoaS5oYXNoX3NpemUpLGkucHJldj1uZXcgQy5CdWYxNihpLndfc2l6ZSksaS5saXRfYnVmc2l6ZT0xPDxmKzYsaS5wZW5kaW5nX2J1Zl9zaXplPTQqaS5saXRfYnVmc2l6ZSxpLnBlbmRpbmdfYnVmPW5ldyBDLkJ1ZjgoaS5wZW5kaW5nX2J1Zl9zaXplKSxpLmRfYnVmPWkubGl0X2J1ZnNpemU+PjEsaS5sX2J1Zj0zKmkubGl0X2J1ZnNpemUsaS5sZXZlbD1iLGkuc3RyYXRlZ3k9ZyxpLm1ldGhvZD1jLHYoYSl9ZnVuY3Rpb24geShhLGIpe3JldHVybiB4KGEsYixZLCQsXyxXKX1mdW5jdGlvbiB6KGEsYil7dmFyIGMsaCxrLGw7aWYoIWF8fCFhLnN0YXRlfHxiPkx8fDA+YilyZXR1cm4gYT9kKGEsTyk6TztpZihoPWEuc3RhdGUsIWEub3V0cHV0fHwhYS5pbnB1dCYmMCE9PWEuYXZhaWxfaW58fGguc3RhdHVzPT09cmImJmIhPT1LKXJldHVybiBkKGEsMD09PWEuYXZhaWxfb3V0P1E6Tyk7aWYoaC5zdHJtPWEsYz1oLmxhc3RfZmx1c2gsaC5sYXN0X2ZsdXNoPWIsaC5zdGF0dXM9PT1sYilpZigyPT09aC53cmFwKWEuYWRsZXI9MCxpKGgsMzEpLGkoaCwxMzkpLGkoaCw4KSxoLmd6aGVhZD8oaShoLChoLmd6aGVhZC50ZXh0PzE6MCkrKGguZ3poZWFkLmhjcmM/MjowKSsoaC5nemhlYWQuZXh0cmE/NDowKSsoaC5nemhlYWQubmFtZT84OjApKyhoLmd6aGVhZC5jb21tZW50PzE2OjApKSxpKGgsMjU1JmguZ3poZWFkLnRpbWUpLGkoaCxoLmd6aGVhZC50aW1lPj44JjI1NSksaShoLGguZ3poZWFkLnRpbWU+PjE2JjI1NSksaShoLGguZ3poZWFkLnRpbWU+PjI0JjI1NSksaShoLDk9PT1oLmxldmVsPzI6aC5zdHJhdGVneT49VHx8aC5sZXZlbDwyPzQ6MCksaShoLDI1NSZoLmd6aGVhZC5vcyksaC5nemhlYWQuZXh0cmEmJmguZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGkoaCwyNTUmaC5nemhlYWQuZXh0cmEubGVuZ3RoKSxpKGgsaC5nemhlYWQuZXh0cmEubGVuZ3RoPj44JjI1NSkpLGguZ3poZWFkLmhjcmMmJihhLmFkbGVyPUYoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZywwKSksaC5nemluZGV4PTAsaC5zdGF0dXM9bWIpOihpKGgsMCksaShoLDApLGkoaCwwKSxpKGgsMCksaShoLDApLGkoaCw5PT09aC5sZXZlbD8yOmguc3RyYXRlZ3k+PVR8fGgubGV2ZWw8Mj80OjApLGkoaCx3YiksaC5zdGF0dXM9cWIpO2Vsc2V7dmFyIG09WSsoaC53X2JpdHMtODw8NCk8PDgsbj0tMTtuPWguc3RyYXRlZ3k+PVR8fGgubGV2ZWw8Mj8wOmgubGV2ZWw8Nj8xOjY9PT1oLmxldmVsPzI6MyxtfD1uPDw2LDAhPT1oLnN0cnN0YXJ0JiYobXw9a2IpLG0rPTMxLW0lMzEsaC5zdGF0dXM9cWIsaihoLG0pLDAhPT1oLnN0cnN0YXJ0JiYoaihoLGEuYWRsZXI+Pj4xNiksaihoLDY1NTM1JmEuYWRsZXIpKSxhLmFkbGVyPTF9aWYoaC5zdGF0dXM9PT1tYilpZihoLmd6aGVhZC5leHRyYSl7Zm9yKGs9aC5wZW5kaW5nO2guZ3ppbmRleDwoNjU1MzUmaC5nemhlYWQuZXh0cmEubGVuZ3RoKSYmKGgucGVuZGluZyE9PWgucGVuZGluZ19idWZfc2l6ZXx8KGguZ3poZWFkLmhjcmMmJmgucGVuZGluZz5rJiYoYS5hZGxlcj1GKGEuYWRsZXIsaC5wZW5kaW5nX2J1ZixoLnBlbmRpbmctayxrKSksZyhhKSxrPWgucGVuZGluZyxoLnBlbmRpbmchPT1oLnBlbmRpbmdfYnVmX3NpemUpKTspaShoLDI1NSZoLmd6aGVhZC5leHRyYVtoLmd6aW5kZXhdKSxoLmd6aW5kZXgrKztoLmd6aGVhZC5oY3JjJiZoLnBlbmRpbmc+ayYmKGEuYWRsZXI9RihhLmFkbGVyLGgucGVuZGluZ19idWYsaC5wZW5kaW5nLWssaykpLGguZ3ppbmRleD09PWguZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGguZ3ppbmRleD0wLGguc3RhdHVzPW5iKX1lbHNlIGguc3RhdHVzPW5iO2lmKGguc3RhdHVzPT09bmIpaWYoaC5nemhlYWQubmFtZSl7az1oLnBlbmRpbmc7ZG97aWYoaC5wZW5kaW5nPT09aC5wZW5kaW5nX2J1Zl9zaXplJiYoaC5nemhlYWQuaGNyYyYmaC5wZW5kaW5nPmsmJihhLmFkbGVyPUYoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZy1rLGspKSxnKGEpLGs9aC5wZW5kaW5nLGgucGVuZGluZz09PWgucGVuZGluZ19idWZfc2l6ZSkpe2w9MTticmVha31sPWguZ3ppbmRleDxoLmd6aGVhZC5uYW1lLmxlbmd0aD8yNTUmaC5nemhlYWQubmFtZS5jaGFyQ29kZUF0KGguZ3ppbmRleCsrKTowLGkoaCxsKX13aGlsZSgwIT09bCk7aC5nemhlYWQuaGNyYyYmaC5wZW5kaW5nPmsmJihhLmFkbGVyPUYoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZy1rLGspKSwwPT09bCYmKGguZ3ppbmRleD0wLGguc3RhdHVzPW9iKX1lbHNlIGguc3RhdHVzPW9iO2lmKGguc3RhdHVzPT09b2IpaWYoaC5nemhlYWQuY29tbWVudCl7az1oLnBlbmRpbmc7ZG97aWYoaC5wZW5kaW5nPT09aC5wZW5kaW5nX2J1Zl9zaXplJiYoaC5nemhlYWQuaGNyYyYmaC5wZW5kaW5nPmsmJihhLmFkbGVyPUYoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZy1rLGspKSxnKGEpLGs9aC5wZW5kaW5nLGgucGVuZGluZz09PWgucGVuZGluZ19idWZfc2l6ZSkpe2w9MTticmVha31sPWguZ3ppbmRleDxoLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmaC5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KGguZ3ppbmRleCsrKTowLGkoaCxsKX13aGlsZSgwIT09bCk7aC5nemhlYWQuaGNyYyYmaC5wZW5kaW5nPmsmJihhLmFkbGVyPUYoYS5hZGxlcixoLnBlbmRpbmdfYnVmLGgucGVuZGluZy1rLGspKSwwPT09bCYmKGguc3RhdHVzPXBiKX1lbHNlIGguc3RhdHVzPXBiO2lmKGguc3RhdHVzPT09cGImJihoLmd6aGVhZC5oY3JjPyhoLnBlbmRpbmcrMj5oLnBlbmRpbmdfYnVmX3NpemUmJmcoYSksaC5wZW5kaW5nKzI8PWgucGVuZGluZ19idWZfc2l6ZSYmKGkoaCwyNTUmYS5hZGxlciksaShoLGEuYWRsZXI+PjgmMjU1KSxhLmFkbGVyPTAsaC5zdGF0dXM9cWIpKTpoLnN0YXR1cz1xYiksMCE9PWgucGVuZGluZyl7aWYoZyhhKSwwPT09YS5hdmFpbF9vdXQpcmV0dXJuIGgubGFzdF9mbHVzaD0tMSxNfWVsc2UgaWYoMD09PWEuYXZhaWxfaW4mJmUoYik8PWUoYykmJmIhPT1LKXJldHVybiBkKGEsUSk7aWYoaC5zdGF0dXM9PT1yYiYmMCE9PWEuYXZhaWxfaW4pcmV0dXJuIGQoYSxRKTtpZigwIT09YS5hdmFpbF9pbnx8MCE9PWgubG9va2FoZWFkfHxiIT09SCYmaC5zdGF0dXMhPT1yYil7dmFyIG89aC5zdHJhdGVneT09PVQ/cihoLGIpOmguc3RyYXRlZ3k9PT1VP3EoaCxiKTpCW2gubGV2ZWxdLmZ1bmMoaCxiKTtpZigobz09PXVifHxvPT09dmIpJiYoaC5zdGF0dXM9cmIpLG89PT1zYnx8bz09PXViKXJldHVybiAwPT09YS5hdmFpbF9vdXQmJihoLmxhc3RfZmx1c2g9LTEpLE07aWYobz09PXRiJiYoYj09PUk/RC5fdHJfYWxpZ24oaCk6YiE9PUwmJihELl90cl9zdG9yZWRfYmxvY2soaCwwLDAsITEpLGI9PT1KJiYoZihoLmhlYWQpLDA9PT1oLmxvb2thaGVhZCYmKGguc3Ryc3RhcnQ9MCxoLmJsb2NrX3N0YXJ0PTAsaC5pbnNlcnQ9MCkpKSxnKGEpLDA9PT1hLmF2YWlsX291dCkpcmV0dXJuIGgubGFzdF9mbHVzaD0tMSxNfXJldHVybiBiIT09Sz9NOmgud3JhcDw9MD9OOigyPT09aC53cmFwPyhpKGgsMjU1JmEuYWRsZXIpLGkoaCxhLmFkbGVyPj44JjI1NSksaShoLGEuYWRsZXI+PjE2JjI1NSksaShoLGEuYWRsZXI+PjI0JjI1NSksaShoLDI1NSZhLnRvdGFsX2luKSxpKGgsYS50b3RhbF9pbj4+OCYyNTUpLGkoaCxhLnRvdGFsX2luPj4xNiYyNTUpLGkoaCxhLnRvdGFsX2luPj4yNCYyNTUpKTooaihoLGEuYWRsZXI+Pj4xNiksaihoLDY1NTM1JmEuYWRsZXIpKSxnKGEpLGgud3JhcD4wJiYoaC53cmFwPS1oLndyYXApLDAhPT1oLnBlbmRpbmc/TTpOKX1mdW5jdGlvbiBBKGEpe3ZhciBiO3JldHVybiBhJiZhLnN0YXRlPyhiPWEuc3RhdGUuc3RhdHVzLGIhPT1sYiYmYiE9PW1iJiZiIT09bmImJmIhPT1vYiYmYiE9PXBiJiZiIT09cWImJmIhPT1yYj9kKGEsTyk6KGEuc3RhdGU9bnVsbCxiPT09cWI/ZChhLFApOk0pKTpPfXZhciBCLEM9YSgiLi4vdXRpbHMvY29tbW9uIiksRD1hKCIuL3RyZWVzIiksRT1hKCIuL2FkbGVyMzIiKSxGPWEoIi4vY3JjMzIiKSxHPWEoIi4vbWVzc2FnZXMiKSxIPTAsST0xLEo9MyxLPTQsTD01LE09MCxOPTEsTz0tMixQPS0zLFE9LTUsUj0tMSxTPTEsVD0yLFU9MyxWPTQsVz0wLFg9MixZPTgsWj05LCQ9MTUsXz04LGFiPTI5LGJiPTI1NixjYj1iYisxK2FiLGRiPTMwLGViPTE5LGZiPTIqY2IrMSxnYj0xNSxoYj0zLGliPTI1OCxqYj1pYitoYisxLGtiPTMyLGxiPTQyLG1iPTY5LG5iPTczLG9iPTkxLHBiPTEwMyxxYj0xMTMscmI9NjY2LHNiPTEsdGI9Mix1Yj0zLHZiPTQsd2I9Myx4Yj1mdW5jdGlvbihhLGIsYyxkLGUpe3RoaXMuZ29vZF9sZW5ndGg9YSx0aGlzLm1heF9sYXp5PWIsdGhpcy5uaWNlX2xlbmd0aD1jLHRoaXMubWF4X2NoYWluPWQsdGhpcy5mdW5jPWV9O0I9W25ldyB4YigwLDAsMCwwLG4pLG5ldyB4Yig0LDQsOCw0LG8pLG5ldyB4Yig0LDUsMTYsOCxvKSxuZXcgeGIoNCw2LDMyLDMyLG8pLG5ldyB4Yig0LDQsMTYsMTYscCksbmV3IHhiKDgsMTYsMzIsMzIscCksbmV3IHhiKDgsMTYsMTI4LDEyOCxwKSxuZXcgeGIoOCwzMiwxMjgsMjU2LHApLG5ldyB4YigzMiwxMjgsMjU4LDEwMjQscCksbmV3IHhiKDMyLDI1OCwyNTgsNDA5NixwKV0sYy5kZWZsYXRlSW5pdD15LGMuZGVmbGF0ZUluaXQyPXgsYy5kZWZsYXRlUmVzZXQ9dixjLmRlZmxhdGVSZXNldEtlZXA9dSxjLmRlZmxhdGVTZXRIZWFkZXI9dyxjLmRlZmxhdGU9eixjLmRlZmxhdGVFbmQ9QSxjLmRlZmxhdGVJbmZvPSJwYWtvIGRlZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpIn0seyIuLi91dGlscy9jb21tb24iOjI3LCIuL2FkbGVyMzIiOjI5LCIuL2NyYzMyIjozMSwiLi9tZXNzYWdlcyI6MzcsIi4vdHJlZXMiOjM4fV0sMzM6W2Z1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGMoKXt0aGlzLnRleHQ9MCx0aGlzLnRpbWU9MCx0aGlzLnhmbGFncz0wLHRoaXMub3M9MCx0aGlzLmV4dHJhPW51bGwsdGhpcy5leHRyYV9sZW49MCx0aGlzLm5hbWU9IiIsdGhpcy5jb21tZW50PSIiLHRoaXMuaGNyYz0wLHRoaXMuZG9uZT0hMX1iLmV4cG9ydHM9Y30se31dLDM0OltmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0Ijt2YXIgYz0zMCxkPTEyO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3ZhciBlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHUsdix3LHgseSx6LEEsQixDO2U9YS5zdGF0ZSxmPWEubmV4dF9pbixCPWEuaW5wdXQsZz1mKyhhLmF2YWlsX2luLTUpLGg9YS5uZXh0X291dCxDPWEub3V0cHV0LGk9aC0oYi1hLmF2YWlsX291dCksaj1oKyhhLmF2YWlsX291dC0yNTcpLGs9ZS5kbWF4LGw9ZS53c2l6ZSxtPWUud2hhdmUsbj1lLnduZXh0LG89ZS53aW5kb3cscD1lLmhvbGQscT1lLmJpdHMscj1lLmxlbmNvZGUscz1lLmRpc3Rjb2RlLHQ9KDE8PGUubGVuYml0cyktMSx1PSgxPDxlLmRpc3RiaXRzKS0xO2E6ZG97MTU+cSYmKHArPUJbZisrXTw8cSxxKz04LHArPUJbZisrXTw8cSxxKz04KSx2PXJbcCZ0XTtiOmZvcig7Oyl7aWYodz12Pj4+MjQscD4+Pj13LHEtPXcsdz12Pj4+MTYmMjU1LDA9PT13KUNbaCsrXT02NTUzNSZ2O2Vsc2V7aWYoISgxNiZ3KSl7aWYoMD09PSg2NCZ3KSl7dj1yWyg2NTUzNSZ2KSsocCYoMTw8dyktMSldO2NvbnRpbnVlIGJ9aWYoMzImdyl7ZS5tb2RlPWQ7YnJlYWsgYX1hLm1zZz0iaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlIixlLm1vZGU9YzticmVhayBhfXg9NjU1MzUmdix3Jj0xNSx3JiYodz5xJiYocCs9QltmKytdPDxxLHErPTgpLHgrPXAmKDE8PHcpLTEscD4+Pj13LHEtPXcpLDE1PnEmJihwKz1CW2YrK108PHEscSs9OCxwKz1CW2YrK108PHEscSs9OCksdj1zW3AmdV07Yzpmb3IoOzspe2lmKHc9dj4+PjI0LHA+Pj49dyxxLT13LHc9dj4+PjE2JjI1NSwhKDE2JncpKXtpZigwPT09KDY0JncpKXt2PXNbKDY1NTM1JnYpKyhwJigxPDx3KS0xKV07Y29udGludWUgY31hLm1zZz0iaW52YWxpZCBkaXN0YW5jZSBjb2RlIixlLm1vZGU9YzticmVhayBhfWlmKHk9NjU1MzUmdix3Jj0xNSx3PnEmJihwKz1CW2YrK108PHEscSs9OCx3PnEmJihwKz1CW2YrK108PHEscSs9OCkpLHkrPXAmKDE8PHcpLTEseT5rKXthLm1zZz0iaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2siLGUubW9kZT1jO2JyZWFrIGF9aWYocD4+Pj13LHEtPXcsdz1oLWkseT53KXtpZih3PXktdyx3Pm0mJmUuc2FuZSl7YS5tc2c9ImludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrIixlLm1vZGU9YzticmVhayBhfWlmKHo9MCxBPW8sMD09PW4pe2lmKHorPWwtdyx4Pncpe3gtPXc7ZG8gQ1toKytdPW9beisrXTt3aGlsZSgtLXcpO3o9aC15LEE9Q319ZWxzZSBpZih3Pm4pe2lmKHorPWwrbi13LHctPW4seD53KXt4LT13O2RvIENbaCsrXT1vW3orK107d2hpbGUoLS13KTtpZih6PTAseD5uKXt3PW4seC09dztkbyBDW2grK109b1t6KytdO3doaWxlKC0tdyk7ej1oLXksQT1DfX19ZWxzZSBpZih6Kz1uLXcseD53KXt4LT13O2RvIENbaCsrXT1vW3orK107d2hpbGUoLS13KTt6PWgteSxBPUN9Zm9yKDt4PjI7KUNbaCsrXT1BW3orK10sQ1toKytdPUFbeisrXSxDW2grK109QVt6KytdLHgtPTM7eCYmKENbaCsrXT1BW3orK10seD4xJiYoQ1toKytdPUFbeisrXSkpfWVsc2V7ej1oLXk7ZG8gQ1toKytdPUNbeisrXSxDW2grK109Q1t6KytdLENbaCsrXT1DW3orK10seC09Mzt3aGlsZSh4PjIpO3gmJihDW2grK109Q1t6KytdLHg+MSYmKENbaCsrXT1DW3orK10pKX1icmVha319YnJlYWt9fXdoaWxlKGc+ZiYmaj5oKTt4PXE+PjMsZi09eCxxLT14PDwzLHAmPSgxPDxxKS0xLGEubmV4dF9pbj1mLGEubmV4dF9vdXQ9aCxhLmF2YWlsX2luPWc+Zj81KyhnLWYpOjUtKGYtZyksYS5hdmFpbF9vdXQ9aj5oPzI1Nysoai1oKToyNTctKGgtaiksZS5ob2xkPXAsZS5iaXRzPXF9fSx7fV0sMzU6W2Z1bmN0aW9uKGEsYixjKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZChhKXtyZXR1cm4oYT4+PjI0JjI1NSkrKGE+Pj44JjY1MjgwKSsoKDY1MjgwJmEpPDw4KSsoKDI1NSZhKTw8MjQpfWZ1bmN0aW9uIGUoKXt0aGlzLm1vZGU9MCx0aGlzLmxhc3Q9ITEsdGhpcy53cmFwPTAsdGhpcy5oYXZlZGljdD0hMSx0aGlzLmZsYWdzPTAsdGhpcy5kbWF4PTAsdGhpcy5jaGVjaz0wLHRoaXMudG90YWw9MCx0aGlzLmhlYWQ9bnVsbCx0aGlzLndiaXRzPTAsdGhpcy53c2l6ZT0wLHRoaXMud2hhdmU9MCx0aGlzLnduZXh0PTAsdGhpcy53aW5kb3c9bnVsbCx0aGlzLmhvbGQ9MCx0aGlzLmJpdHM9MCx0aGlzLmxlbmd0aD0wLHRoaXMub2Zmc2V0PTAsdGhpcy5leHRyYT0wLHRoaXMubGVuY29kZT1udWxsLHRoaXMuZGlzdGNvZGU9bnVsbCx0aGlzLmxlbmJpdHM9MCx0aGlzLmRpc3RiaXRzPTAsdGhpcy5uY29kZT0wLHRoaXMubmxlbj0wLHRoaXMubmRpc3Q9MCx0aGlzLmhhdmU9MCx0aGlzLm5leHQ9bnVsbCx0aGlzLmxlbnM9bmV3IHIuQnVmMTYoMzIwKSx0aGlzLndvcms9bmV3IHIuQnVmMTYoMjg4KSx0aGlzLmxlbmR5bj1udWxsLHRoaXMuZGlzdGR5bj1udWxsLHRoaXMuc2FuZT0wLHRoaXMuYmFjaz0wLHRoaXMud2FzPTB9ZnVuY3Rpb24gZihhKXt2YXIgYjtyZXR1cm4gYSYmYS5zdGF0ZT8oYj1hLnN0YXRlLGEudG90YWxfaW49YS50b3RhbF9vdXQ9Yi50b3RhbD0wLGEubXNnPSIiLGIud3JhcCYmKGEuYWRsZXI9MSZiLndyYXApLGIubW9kZT1LLGIubGFzdD0wLGIuaGF2ZWRpY3Q9MCxiLmRtYXg9MzI3NjgsYi5oZWFkPW51bGwsYi5ob2xkPTAsYi5iaXRzPTAsYi5sZW5jb2RlPWIubGVuZHluPW5ldyByLkJ1ZjMyKG9iKSxiLmRpc3Rjb2RlPWIuZGlzdGR5bj1uZXcgci5CdWYzMihwYiksYi5zYW5lPTEsYi5iYWNrPS0xLEMpOkZ9ZnVuY3Rpb24gZyhhKXt2YXIgYjtyZXR1cm4gYSYmYS5zdGF0ZT8oYj1hLnN0YXRlLGIud3NpemU9MCxiLndoYXZlPTAsYi53bmV4dD0wLGYoYSkpOkZ9ZnVuY3Rpb24gaChhLGIpe3ZhciBjLGQ7cmV0dXJuIGEmJmEuc3RhdGU/KGQ9YS5zdGF0ZSwwPmI/KGM9MCxiPS1iKTooYz0oYj4+NCkrMSw0OD5iJiYoYiY9MTUpKSxiJiYoOD5ifHxiPjE1KT9GOihudWxsIT09ZC53aW5kb3cmJmQud2JpdHMhPT1iJiYoZC53aW5kb3c9bnVsbCksZC53cmFwPWMsZC53Yml0cz1iLGcoYSkpKTpGfWZ1bmN0aW9uIGkoYSxiKXt2YXIgYyxkO3JldHVybiBhPyhkPW5ldyBlLGEuc3RhdGU9ZCxkLndpbmRvdz1udWxsLGM9aChhLGIpLGMhPT1DJiYoYS5zdGF0ZT1udWxsKSxjKTpGfWZ1bmN0aW9uIGooYSl7cmV0dXJuIGkoYSxyYil9ZnVuY3Rpb24gayhhKXtpZihzYil7dmFyIGI7Zm9yKHA9bmV3IHIuQnVmMzIoNTEyKSxxPW5ldyByLkJ1ZjMyKDMyKSxiPTA7MTQ0PmI7KWEubGVuc1tiKytdPTg7Zm9yKDsyNTY+YjspYS5sZW5zW2IrK109OTtmb3IoOzI4MD5iOylhLmxlbnNbYisrXT03O2Zvcig7Mjg4PmI7KWEubGVuc1tiKytdPTg7Zm9yKHYoeCxhLmxlbnMsMCwyODgscCwwLGEud29yayx7Yml0czo5fSksYj0wOzMyPmI7KWEubGVuc1tiKytdPTU7dih5LGEubGVucywwLDMyLHEsMCxhLndvcmsse2JpdHM6NX0pLHNiPSExfWEubGVuY29kZT1wLGEubGVuYml0cz05LGEuZGlzdGNvZGU9cSxhLmRpc3RiaXRzPTV9ZnVuY3Rpb24gbChhLGIsYyxkKXt2YXIgZSxmPWEuc3RhdGU7cmV0dXJuIG51bGw9PT1mLndpbmRvdyYmKGYud3NpemU9MTw8Zi53Yml0cyxmLnduZXh0PTAsZi53aGF2ZT0wLGYud2luZG93PW5ldyByLkJ1ZjgoZi53c2l6ZSkpLGQ+PWYud3NpemU/KHIuYXJyYXlTZXQoZi53aW5kb3csYixjLWYud3NpemUsZi53c2l6ZSwwKSxmLnduZXh0PTAsZi53aGF2ZT1mLndzaXplKTooZT1mLndzaXplLWYud25leHQsZT5kJiYoZT1kKSxyLmFycmF5U2V0KGYud2luZG93LGIsYy1kLGUsZi53bmV4dCksZC09ZSxkPyhyLmFycmF5U2V0KGYud2luZG93LGIsYy1kLGQsMCksZi53bmV4dD1kLGYud2hhdmU9Zi53c2l6ZSk6KGYud25leHQrPWUsZi53bmV4dD09PWYud3NpemUmJihmLnduZXh0PTApLGYud2hhdmU8Zi53c2l6ZSYmKGYud2hhdmUrPWUpKSksMH1mdW5jdGlvbiBtKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosbSxuLG8scCxxLG9iLHBiLHFiLHJiLHNiLHRiLHViLHZiLHdiLHhiLHliLHpiLEFiPTAsQmI9bmV3IHIuQnVmOCg0KSxDYj1bMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV07aWYoIWF8fCFhLnN0YXRlfHwhYS5vdXRwdXR8fCFhLmlucHV0JiYwIT09YS5hdmFpbF9pbilyZXR1cm4gRjtjPWEuc3RhdGUsYy5tb2RlPT09ViYmKGMubW9kZT1XKSxoPWEubmV4dF9vdXQsZj1hLm91dHB1dCxqPWEuYXZhaWxfb3V0LGc9YS5uZXh0X2luLGU9YS5pbnB1dCxpPWEuYXZhaWxfaW4sbT1jLmhvbGQsbj1jLmJpdHMsbz1pLHA9aix4Yj1DO2E6Zm9yKDs7KXN3aXRjaChjLm1vZGUpe2Nhc2UgSzppZigwPT09Yy53cmFwKXtjLm1vZGU9VzticmVha31mb3IoOzE2Pm47KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZigyJmMud3JhcCYmMzU2MTU9PT1tKXtjLmNoZWNrPTAsQmJbMF09MjU1Jm0sQmJbMV09bT4+PjgmMjU1LGMuY2hlY2s9dChjLmNoZWNrLEJiLDIsMCksbT0wLG49MCxjLm1vZGU9TDticmVha31pZihjLmZsYWdzPTAsYy5oZWFkJiYoYy5oZWFkLmRvbmU9ITEpLCEoMSZjLndyYXApfHwoKCgyNTUmbSk8PDgpKyhtPj44KSklMzEpe2EubXNnPSJpbmNvcnJlY3QgaGVhZGVyIGNoZWNrIixjLm1vZGU9bGI7YnJlYWt9aWYoKDE1Jm0pIT09Sil7YS5tc2c9InVua25vd24gY29tcHJlc3Npb24gbWV0aG9kIixjLm1vZGU9bGI7YnJlYWt9aWYobT4+Pj00LG4tPTQsd2I9KDE1Jm0pKzgsMD09PWMud2JpdHMpYy53Yml0cz13YjtlbHNlIGlmKHdiPmMud2JpdHMpe2EubXNnPSJpbnZhbGlkIHdpbmRvdyBzaXplIixjLm1vZGU9bGI7YnJlYWt9Yy5kbWF4PTE8PHdiLGEuYWRsZXI9Yy5jaGVjaz0xLGMubW9kZT01MTImbT9UOlYsbT0wLG49MDticmVhaztjYXNlIEw6Zm9yKDsxNj5uOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYoYy5mbGFncz1tLCgyNTUmYy5mbGFncykhPT1KKXthLm1zZz0idW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QiLGMubW9kZT1sYjticmVha31pZig1NzM0NCZjLmZsYWdzKXthLm1zZz0idW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0IixjLm1vZGU9bGI7YnJlYWt9Yy5oZWFkJiYoYy5oZWFkLnRleHQ9bT4+OCYxKSw1MTImYy5mbGFncyYmKEJiWzBdPTI1NSZtLEJiWzFdPW0+Pj44JjI1NSxjLmNoZWNrPXQoYy5jaGVjayxCYiwyLDApKSxtPTAsbj0wLGMubW9kZT1NO2Nhc2UgTTpmb3IoOzMyPm47KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1jLmhlYWQmJihjLmhlYWQudGltZT1tKSw1MTImYy5mbGFncyYmKEJiWzBdPTI1NSZtLEJiWzFdPW0+Pj44JjI1NSxCYlsyXT1tPj4+MTYmMjU1LEJiWzNdPW0+Pj4yNCYyNTUsYy5jaGVjaz10KGMuY2hlY2ssQmIsNCwwKSksbT0wLG49MCxjLm1vZGU9TjtjYXNlIE46Zm9yKDsxNj5uOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9Yy5oZWFkJiYoYy5oZWFkLnhmbGFncz0yNTUmbSxjLmhlYWQub3M9bT4+OCksNTEyJmMuZmxhZ3MmJihCYlswXT0yNTUmbSxCYlsxXT1tPj4+OCYyNTUsYy5jaGVjaz10KGMuY2hlY2ssQmIsMiwwKSksbT0wLG49MCxjLm1vZGU9TztjYXNlIE86aWYoMTAyNCZjLmZsYWdzKXtmb3IoOzE2Pm47KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1jLmxlbmd0aD1tLGMuaGVhZCYmKGMuaGVhZC5leHRyYV9sZW49bSksNTEyJmMuZmxhZ3MmJihCYlswXT0yNTUmbSxCYlsxXT1tPj4+OCYyNTUsYy5jaGVjaz10KGMuY2hlY2ssQmIsMiwwKSksbT0wLG49MH1lbHNlIGMuaGVhZCYmKGMuaGVhZC5leHRyYT1udWxsKTtjLm1vZGU9UDtjYXNlIFA6aWYoMTAyNCZjLmZsYWdzJiYocT1jLmxlbmd0aCxxPmkmJihxPWkpLHEmJihjLmhlYWQmJih3Yj1jLmhlYWQuZXh0cmFfbGVuLWMubGVuZ3RoLGMuaGVhZC5leHRyYXx8KGMuaGVhZC5leHRyYT1uZXcgQXJyYXkoYy5oZWFkLmV4dHJhX2xlbikpLHIuYXJyYXlTZXQoYy5oZWFkLmV4dHJhLGUsZyxxLHdiKSksNTEyJmMuZmxhZ3MmJihjLmNoZWNrPXQoYy5jaGVjayxlLHEsZykpLGktPXEsZys9cSxjLmxlbmd0aC09cSksYy5sZW5ndGgpKWJyZWFrIGE7Yy5sZW5ndGg9MCxjLm1vZGU9UTtjYXNlIFE6aWYoMjA0OCZjLmZsYWdzKXtpZigwPT09aSlicmVhayBhO3E9MDtkbyB3Yj1lW2crcSsrXSxjLmhlYWQmJndiJiZjLmxlbmd0aDw2NTUzNiYmKGMuaGVhZC5uYW1lKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHdiKSk7d2hpbGUod2ImJmk+cSk7aWYoNTEyJmMuZmxhZ3MmJihjLmNoZWNrPXQoYy5jaGVjayxlLHEsZykpLGktPXEsZys9cSx3YilicmVhayBhfWVsc2UgYy5oZWFkJiYoYy5oZWFkLm5hbWU9bnVsbCk7Yy5sZW5ndGg9MCxjLm1vZGU9UjtjYXNlIFI6aWYoNDA5NiZjLmZsYWdzKXtpZigwPT09aSlicmVhayBhO3E9MDtkbyB3Yj1lW2crcSsrXSxjLmhlYWQmJndiJiZjLmxlbmd0aDw2NTUzNiYmKGMuaGVhZC5jb21tZW50Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHdiKSk7d2hpbGUod2ImJmk+cSk7aWYoNTEyJmMuZmxhZ3MmJihjLmNoZWNrPXQoYy5jaGVjayxlLHEsZykpLGktPXEsZys9cSx3YilicmVhayBhfWVsc2UgYy5oZWFkJiYoYy5oZWFkLmNvbW1lbnQ9bnVsbCk7Yy5tb2RlPVM7Y2FzZSBTOmlmKDUxMiZjLmZsYWdzKXtmb3IoOzE2Pm47KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZihtIT09KDY1NTM1JmMuY2hlY2spKXthLm1zZz0iaGVhZGVyIGNyYyBtaXNtYXRjaCIsYy5tb2RlPWxiO2JyZWFrfW09MCxuPTB9Yy5oZWFkJiYoYy5oZWFkLmhjcmM9Yy5mbGFncz4+OSYxLGMuaGVhZC5kb25lPSEwKSxhLmFkbGVyPWMuY2hlY2s9MCxjLm1vZGU9VjticmVhaztjYXNlIFQ6Zm9yKDszMj5uOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9YS5hZGxlcj1jLmNoZWNrPWQobSksbT0wLG49MCxjLm1vZGU9VTtjYXNlIFU6aWYoMD09PWMuaGF2ZWRpY3QpcmV0dXJuIGEubmV4dF9vdXQ9aCxhLmF2YWlsX291dD1qLGEubmV4dF9pbj1nLGEuYXZhaWxfaW49aSxjLmhvbGQ9bSxjLmJpdHM9bixFO2EuYWRsZXI9Yy5jaGVjaz0xLGMubW9kZT1WO2Nhc2UgVjppZihiPT09QXx8Yj09PUIpYnJlYWsgYTtjYXNlIFc6aWYoYy5sYXN0KXttPj4+PTcmbixuLT03Jm4sYy5tb2RlPWliO2JyZWFrfWZvcig7Mz5uOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9c3dpdGNoKGMubGFzdD0xJm0sbT4+Pj0xLG4tPTEsMyZtKXtjYXNlIDA6Yy5tb2RlPVg7YnJlYWs7Y2FzZSAxOmlmKGsoYyksYy5tb2RlPWJiLGI9PT1CKXttPj4+PTIsbi09MjticmVhayBhfWJyZWFrO2Nhc2UgMjpjLm1vZGU9JDticmVhaztjYXNlIDM6YS5tc2c9ImludmFsaWQgYmxvY2sgdHlwZSIsYy5tb2RlPWxifW0+Pj49MixuLT0yO2JyZWFrO2Nhc2UgWDpmb3IobT4+Pj03Jm4sbi09NyZuOzMyPm47KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZigoNjU1MzUmbSkhPT0obT4+PjE2XjY1NTM1KSl7YS5tc2c9ImludmFsaWQgc3RvcmVkIGJsb2NrIGxlbmd0aHMiLGMubW9kZT1sYjticmVha31pZihjLmxlbmd0aD02NTUzNSZtLG09MCxuPTAsYy5tb2RlPVksYj09PUIpYnJlYWsgYTtjYXNlIFk6Yy5tb2RlPVo7Y2FzZSBaOmlmKHE9Yy5sZW5ndGgpe2lmKHE+aSYmKHE9aSkscT5qJiYocT1qKSwwPT09cSlicmVhayBhO3IuYXJyYXlTZXQoZixlLGcscSxoKSxpLT1xLGcrPXEsai09cSxoKz1xLGMubGVuZ3RoLT1xO2JyZWFrfWMubW9kZT1WO2JyZWFrO2Nhc2UgJDpmb3IoOzE0Pm47KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1pZihjLm5sZW49KDMxJm0pKzI1NyxtPj4+PTUsbi09NSxjLm5kaXN0PSgzMSZtKSsxLG0+Pj49NSxuLT01LGMubmNvZGU9KDE1Jm0pKzQsbT4+Pj00LG4tPTQsYy5ubGVuPjI4Nnx8Yy5uZGlzdD4zMCl7YS5tc2c9InRvbyBtYW55IGxlbmd0aCBvciBkaXN0YW5jZSBzeW1ib2xzIixjLm1vZGU9bGI7YnJlYWt9Yy5oYXZlPTAsYy5tb2RlPV87Y2FzZSBfOmZvcig7Yy5oYXZlPGMubmNvZGU7KXtmb3IoOzM+bjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWMubGVuc1tDYltjLmhhdmUrK11dPTcmbSxtPj4+PTMsbi09M31mb3IoO2MuaGF2ZTwxOTspYy5sZW5zW0NiW2MuaGF2ZSsrXV09MDtpZihjLmxlbmNvZGU9Yy5sZW5keW4sYy5sZW5iaXRzPTcseWI9e2JpdHM6Yy5sZW5iaXRzfSx4Yj12KHcsYy5sZW5zLDAsMTksYy5sZW5jb2RlLDAsYy53b3JrLHliKSxjLmxlbmJpdHM9eWIuYml0cyx4Yil7YS5tc2c9ImludmFsaWQgY29kZSBsZW5ndGhzIHNldCIsYy5tb2RlPWxiO2JyZWFrfWMuaGF2ZT0wLGMubW9kZT1hYjtjYXNlIGFiOmZvcig7Yy5oYXZlPGMubmxlbitjLm5kaXN0Oyl7Zm9yKDtBYj1jLmxlbmNvZGVbbSYoMTw8Yy5sZW5iaXRzKS0xXSxxYj1BYj4+PjI0LHJiPUFiPj4+MTYmMjU1LHNiPTY1NTM1JkFiLCEobj49cWIpOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYoMTY+c2IpbT4+Pj1xYixuLT1xYixjLmxlbnNbYy5oYXZlKytdPXNiO2Vsc2V7aWYoMTY9PT1zYil7Zm9yKHpiPXFiKzI7emI+bjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWlmKG0+Pj49cWIsbi09cWIsMD09PWMuaGF2ZSl7YS5tc2c9ImludmFsaWQgYml0IGxlbmd0aCByZXBlYXQiLGMubW9kZT1sYjticmVha313Yj1jLmxlbnNbYy5oYXZlLTFdLHE9MysoMyZtKSxtPj4+PTIsbi09Mn1lbHNlIGlmKDE3PT09c2Ipe2Zvcih6Yj1xYiszO3piPm47KXtpZigwPT09aSlicmVhayBhO2ktLSxtKz1lW2crK108PG4sbis9OH1tPj4+PXFiLG4tPXFiLHdiPTAscT0zKyg3Jm0pLG0+Pj49MyxuLT0zfWVsc2V7Zm9yKHpiPXFiKzc7emI+bjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fW0+Pj49cWIsbi09cWIsd2I9MCxxPTExKygxMjcmbSksbT4+Pj03LG4tPTd9aWYoYy5oYXZlK3E+Yy5ubGVuK2MubmRpc3Qpe2EubXNnPSJpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0IixjLm1vZGU9bGI7YnJlYWt9Zm9yKDtxLS07KWMubGVuc1tjLmhhdmUrK109d2J9fWlmKGMubW9kZT09PWxiKWJyZWFrO2lmKDA9PT1jLmxlbnNbMjU2XSl7YS5tc2c9ImludmFsaWQgY29kZSAtLSBtaXNzaW5nIGVuZC1vZi1ibG9jayIsYy5tb2RlPWxiO2JyZWFrfWlmKGMubGVuYml0cz05LHliPXtiaXRzOmMubGVuYml0c30seGI9dih4LGMubGVucywwLGMubmxlbixjLmxlbmNvZGUsMCxjLndvcmsseWIpLGMubGVuYml0cz15Yi5iaXRzLHhiKXthLm1zZz0iaW52YWxpZCBsaXRlcmFsL2xlbmd0aHMgc2V0IixjLm1vZGU9bGI7YnJlYWt9aWYoYy5kaXN0Yml0cz02LGMuZGlzdGNvZGU9Yy5kaXN0ZHluLHliPXtiaXRzOmMuZGlzdGJpdHN9LHhiPXYoeSxjLmxlbnMsYy5ubGVuLGMubmRpc3QsYy5kaXN0Y29kZSwwLGMud29yayx5YiksYy5kaXN0Yml0cz15Yi5iaXRzLHhiKXthLm1zZz0iaW52YWxpZCBkaXN0YW5jZXMgc2V0IixjLm1vZGU9bGI7YnJlYWt9aWYoYy5tb2RlPWJiLGI9PT1CKWJyZWFrIGE7Y2FzZSBiYjpjLm1vZGU9Y2I7Y2FzZSBjYjppZihpPj02JiZqPj0yNTgpe2EubmV4dF9vdXQ9aCxhLmF2YWlsX291dD1qLGEubmV4dF9pbj1nLGEuYXZhaWxfaW49aSxjLmhvbGQ9bSxjLmJpdHM9bix1KGEscCksaD1hLm5leHRfb3V0LGY9YS5vdXRwdXQsaj1hLmF2YWlsX291dCxnPWEubmV4dF9pbixlPWEuaW5wdXQsaT1hLmF2YWlsX2luLG09Yy5ob2xkLG49Yy5iaXRzLGMubW9kZT09PVYmJihjLmJhY2s9LTEpO2JyZWFrfWZvcihjLmJhY2s9MDtBYj1jLmxlbmNvZGVbbSYoMTw8Yy5sZW5iaXRzKS0xXSxxYj1BYj4+PjI0LHJiPUFiPj4+MTYmMjU1LHNiPTY1NTM1JkFiLCEobj49cWIpOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYocmImJjA9PT0oMjQwJnJiKSl7Zm9yKHRiPXFiLHViPXJiLHZiPXNiO0FiPWMubGVuY29kZVt2YisoKG0mKDE8PHRiK3ViKS0xKT4+dGIpXSxxYj1BYj4+PjI0LHJiPUFiPj4+MTYmMjU1LHNiPTY1NTM1JkFiLCEobj49dGIrcWIpOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9bT4+Pj10YixuLT10YixjLmJhY2srPXRifWlmKG0+Pj49cWIsbi09cWIsYy5iYWNrKz1xYixjLmxlbmd0aD1zYiwwPT09cmIpe2MubW9kZT1oYjticmVha31pZigzMiZyYil7Yy5iYWNrPS0xLGMubW9kZT1WO2JyZWFrfWlmKDY0JnJiKXthLm1zZz0iaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlIixjLm1vZGU9bGI7YnJlYWt9Yy5leHRyYT0xNSZyYixjLm1vZGU9ZGI7Y2FzZSBkYjppZihjLmV4dHJhKXtmb3IoemI9Yy5leHRyYTt6Yj5uOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9Yy5sZW5ndGgrPW0mKDE8PGMuZXh0cmEpLTEsbT4+Pj1jLmV4dHJhLG4tPWMuZXh0cmEsYy5iYWNrKz1jLmV4dHJhfWMud2FzPWMubGVuZ3RoLGMubW9kZT1lYjtjYXNlIGViOmZvcig7QWI9Yy5kaXN0Y29kZVttJigxPDxjLmRpc3RiaXRzKS0xXSxxYj1BYj4+PjI0LHJiPUFiPj4+MTYmMjU1LHNiPTY1NTM1JkFiLCEobj49cWIpOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYoMD09PSgyNDAmcmIpKXtmb3IodGI9cWIsdWI9cmIsdmI9c2I7QWI9Yy5kaXN0Y29kZVt2YisoKG0mKDE8PHRiK3ViKS0xKT4+dGIpXSxxYj1BYj4+PjI0LHJiPUFiPj4+MTYmMjU1LHNiPTY1NTM1JkFiLCEobj49dGIrcWIpOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9bT4+Pj10YixuLT10YixjLmJhY2srPXRifWlmKG0+Pj49cWIsbi09cWIsYy5iYWNrKz1xYiw2NCZyYil7YS5tc2c9ImludmFsaWQgZGlzdGFuY2UgY29kZSIsYy5tb2RlPWxiO2JyZWFrfWMub2Zmc2V0PXNiLGMuZXh0cmE9MTUmcmIsYy5tb2RlPWZiO2Nhc2UgZmI6aWYoYy5leHRyYSl7Zm9yKHpiPWMuZXh0cmE7emI+bjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG0rPWVbZysrXTw8bixuKz04fWMub2Zmc2V0Kz1tJigxPDxjLmV4dHJhKS0xLG0+Pj49Yy5leHRyYSxuLT1jLmV4dHJhLGMuYmFjays9Yy5leHRyYX1pZihjLm9mZnNldD5jLmRtYXgpe2EubXNnPSJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayIsYy5tb2RlPWxiO2JyZWFrfWMubW9kZT1nYjtjYXNlIGdiOmlmKDA9PT1qKWJyZWFrIGE7DQppZihxPXAtaixjLm9mZnNldD5xKXtpZihxPWMub2Zmc2V0LXEscT5jLndoYXZlJiZjLnNhbmUpe2EubXNnPSJpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayIsYy5tb2RlPWxiO2JyZWFrfXE+Yy53bmV4dD8ocS09Yy53bmV4dCxvYj1jLndzaXplLXEpOm9iPWMud25leHQtcSxxPmMubGVuZ3RoJiYocT1jLmxlbmd0aCkscGI9Yy53aW5kb3d9ZWxzZSBwYj1mLG9iPWgtYy5vZmZzZXQscT1jLmxlbmd0aDtxPmomJihxPWopLGotPXEsYy5sZW5ndGgtPXE7ZG8gZltoKytdPXBiW29iKytdO3doaWxlKC0tcSk7MD09PWMubGVuZ3RoJiYoYy5tb2RlPWNiKTticmVhaztjYXNlIGhiOmlmKDA9PT1qKWJyZWFrIGE7ZltoKytdPWMubGVuZ3RoLGotLSxjLm1vZGU9Y2I7YnJlYWs7Y2FzZSBpYjppZihjLndyYXApe2Zvcig7MzI+bjspe2lmKDA9PT1pKWJyZWFrIGE7aS0tLG18PWVbZysrXTw8bixuKz04fWlmKHAtPWosYS50b3RhbF9vdXQrPXAsYy50b3RhbCs9cCxwJiYoYS5hZGxlcj1jLmNoZWNrPWMuZmxhZ3M/dChjLmNoZWNrLGYscCxoLXApOnMoYy5jaGVjayxmLHAsaC1wKSkscD1qLChjLmZsYWdzP206ZChtKSkhPT1jLmNoZWNrKXthLm1zZz0iaW5jb3JyZWN0IGRhdGEgY2hlY2siLGMubW9kZT1sYjticmVha31tPTAsbj0wfWMubW9kZT1qYjtjYXNlIGpiOmlmKGMud3JhcCYmYy5mbGFncyl7Zm9yKDszMj5uOyl7aWYoMD09PWkpYnJlYWsgYTtpLS0sbSs9ZVtnKytdPDxuLG4rPTh9aWYobSE9PSg0Mjk0OTY3Mjk1JmMudG90YWwpKXthLm1zZz0iaW5jb3JyZWN0IGxlbmd0aCBjaGVjayIsYy5tb2RlPWxiO2JyZWFrfW09MCxuPTB9Yy5tb2RlPWtiO2Nhc2Uga2I6eGI9RDticmVhayBhO2Nhc2UgbGI6eGI9RzticmVhayBhO2Nhc2UgbWI6cmV0dXJuIEg7Y2FzZSBuYjpkZWZhdWx0OnJldHVybiBGfXJldHVybiBhLm5leHRfb3V0PWgsYS5hdmFpbF9vdXQ9aixhLm5leHRfaW49ZyxhLmF2YWlsX2luPWksYy5ob2xkPW0sYy5iaXRzPW4sKGMud3NpemV8fHAhPT1hLmF2YWlsX291dCYmYy5tb2RlPGxiJiYoYy5tb2RlPGlifHxiIT09eikpJiZsKGEsYS5vdXRwdXQsYS5uZXh0X291dCxwLWEuYXZhaWxfb3V0KT8oYy5tb2RlPW1iLEgpOihvLT1hLmF2YWlsX2luLHAtPWEuYXZhaWxfb3V0LGEudG90YWxfaW4rPW8sYS50b3RhbF9vdXQrPXAsYy50b3RhbCs9cCxjLndyYXAmJnAmJihhLmFkbGVyPWMuY2hlY2s9Yy5mbGFncz90KGMuY2hlY2ssZixwLGEubmV4dF9vdXQtcCk6cyhjLmNoZWNrLGYscCxhLm5leHRfb3V0LXApKSxhLmRhdGFfdHlwZT1jLmJpdHMrKGMubGFzdD82NDowKSsoYy5tb2RlPT09Vj8xMjg6MCkrKGMubW9kZT09PWJifHxjLm1vZGU9PT1ZPzI1NjowKSwoMD09PW8mJjA9PT1wfHxiPT09eikmJnhiPT09QyYmKHhiPUkpLHhiKX1mdW5jdGlvbiBuKGEpe2lmKCFhfHwhYS5zdGF0ZSlyZXR1cm4gRjt2YXIgYj1hLnN0YXRlO3JldHVybiBiLndpbmRvdyYmKGIud2luZG93PW51bGwpLGEuc3RhdGU9bnVsbCxDfWZ1bmN0aW9uIG8oYSxiKXt2YXIgYztyZXR1cm4gYSYmYS5zdGF0ZT8oYz1hLnN0YXRlLDA9PT0oMiZjLndyYXApP0Y6KGMuaGVhZD1iLGIuZG9uZT0hMSxDKSk6Rn12YXIgcCxxLHI9YSgiLi4vdXRpbHMvY29tbW9uIikscz1hKCIuL2FkbGVyMzIiKSx0PWEoIi4vY3JjMzIiKSx1PWEoIi4vaW5mZmFzdCIpLHY9YSgiLi9pbmZ0cmVlcyIpLHc9MCx4PTEseT0yLHo9NCxBPTUsQj02LEM9MCxEPTEsRT0yLEY9LTIsRz0tMyxIPS00LEk9LTUsSj04LEs9MSxMPTIsTT0zLE49NCxPPTUsUD02LFE9NyxSPTgsUz05LFQ9MTAsVT0xMSxWPTEyLFc9MTMsWD0xNCxZPTE1LFo9MTYsJD0xNyxfPTE4LGFiPTE5LGJiPTIwLGNiPTIxLGRiPTIyLGViPTIzLGZiPTI0LGdiPTI1LGhiPTI2LGliPTI3LGpiPTI4LGtiPTI5LGxiPTMwLG1iPTMxLG5iPTMyLG9iPTg1MixwYj01OTIscWI9MTUscmI9cWIsc2I9ITA7Yy5pbmZsYXRlUmVzZXQ9ZyxjLmluZmxhdGVSZXNldDI9aCxjLmluZmxhdGVSZXNldEtlZXA9ZixjLmluZmxhdGVJbml0PWosYy5pbmZsYXRlSW5pdDI9aSxjLmluZmxhdGU9bSxjLmluZmxhdGVFbmQ9bixjLmluZmxhdGVHZXRIZWFkZXI9byxjLmluZmxhdGVJbmZvPSJwYWtvIGluZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpIn0seyIuLi91dGlscy9jb21tb24iOjI3LCIuL2FkbGVyMzIiOjI5LCIuL2NyYzMyIjozMSwiLi9pbmZmYXN0IjozNCwiLi9pbmZ0cmVlcyI6MzZ9XSwzNjpbZnVuY3Rpb24oYSxiKXsidXNlIHN0cmljdCI7dmFyIGM9YSgiLi4vdXRpbHMvY29tbW9uIiksZD0xNSxlPTg1MixmPTU5MixnPTAsaD0xLGk9MixqPVszLDQsNSw2LDcsOCw5LDEwLDExLDEzLDE1LDE3LDE5LDIzLDI3LDMxLDM1LDQzLDUxLDU5LDY3LDgzLDk5LDExNSwxMzEsMTYzLDE5NSwyMjcsMjU4LDAsMF0saz1bMTYsMTYsMTYsMTYsMTYsMTYsMTYsMTYsMTcsMTcsMTcsMTcsMTgsMTgsMTgsMTgsMTksMTksMTksMTksMjAsMjAsMjAsMjAsMjEsMjEsMjEsMjEsMTYsNzIsNzhdLGw9WzEsMiwzLDQsNSw3LDksMTMsMTcsMjUsMzMsNDksNjUsOTcsMTI5LDE5MywyNTcsMzg1LDUxMyw3NjksMTAyNSwxNTM3LDIwNDksMzA3Myw0MDk3LDYxNDUsODE5MywxMjI4OSwxNjM4NSwyNDU3NywwLDBdLG09WzE2LDE2LDE2LDE2LDE3LDE3LDE4LDE4LDE5LDE5LDIwLDIwLDIxLDIxLDIyLDIyLDIzLDIzLDI0LDI0LDI1LDI1LDI2LDI2LDI3LDI3LDI4LDI4LDI5LDI5LDY0LDY0XTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLG4sbyxwLHEscixzKXt2YXIgdCx1LHYsdyx4LHkseixBLEIsQz1zLmJpdHMsRD0wLEU9MCxGPTAsRz0wLEg9MCxJPTAsSj0wLEs9MCxMPTAsTT0wLE49bnVsbCxPPTAsUD1uZXcgYy5CdWYxNihkKzEpLFE9bmV3IGMuQnVmMTYoZCsxKSxSPW51bGwsUz0wO2ZvcihEPTA7ZD49RDtEKyspUFtEXT0wO2ZvcihFPTA7bz5FO0UrKylQW2JbbitFXV0rKztmb3IoSD1DLEc9ZDtHPj0xJiYwPT09UFtHXTtHLS0pO2lmKEg+RyYmKEg9RyksMD09PUcpcmV0dXJuIHBbcSsrXT0yMDk3MTUyMCxwW3ErK109MjA5NzE1MjAscy5iaXRzPTEsMDtmb3IoRj0xO0c+RiYmMD09PVBbRl07RisrKTtmb3IoRj5IJiYoSD1GKSxLPTEsRD0xO2Q+PUQ7RCsrKWlmKEs8PD0xLEstPVBbRF0sMD5LKXJldHVybi0xO2lmKEs+MCYmKGE9PT1nfHwxIT09RykpcmV0dXJuLTE7Zm9yKFFbMV09MCxEPTE7ZD5EO0QrKylRW0QrMV09UVtEXStQW0RdO2ZvcihFPTA7bz5FO0UrKykwIT09YltuK0VdJiYocltRW2JbbitFXV0rK109RSk7aWYoYT09PWc/KE49Uj1yLHk9MTkpOmE9PT1oPyhOPWosTy09MjU3LFI9ayxTLT0yNTcseT0yNTYpOihOPWwsUj1tLHk9LTEpLE09MCxFPTAsRD1GLHg9cSxJPUgsSj0wLHY9LTEsTD0xPDxILHc9TC0xLGE9PT1oJiZMPmV8fGE9PT1pJiZMPmYpcmV0dXJuIDE7Zm9yKHZhciBUPTA7Oyl7VCsrLHo9RC1KLHJbRV08eT8oQT0wLEI9cltFXSk6cltFXT55PyhBPVJbUytyW0VdXSxCPU5bTytyW0VdXSk6KEE9OTYsQj0wKSx0PTE8PEQtSix1PTE8PEksRj11O2RvIHUtPXQscFt4KyhNPj5KKSt1XT16PDwyNHxBPDwxNnxCfDA7d2hpbGUoMCE9PXUpO2Zvcih0PTE8PEQtMTtNJnQ7KXQ+Pj0xO2lmKDAhPT10PyhNJj10LTEsTSs9dCk6TT0wLEUrKywwPT09LS1QW0RdKXtpZihEPT09RylicmVhaztEPWJbbityW0VdXX1pZihEPkgmJihNJncpIT09dil7Zm9yKDA9PT1KJiYoSj1IKSx4Kz1GLEk9RC1KLEs9MTw8STtHPkkrSiYmKEstPVBbSStKXSwhKDA+PUspKTspSSsrLEs8PD0xO2lmKEwrPTE8PEksYT09PWgmJkw+ZXx8YT09PWkmJkw+ZilyZXR1cm4gMTt2PU0mdyxwW3ZdPUg8PDI0fEk8PDE2fHgtcXwwfX1yZXR1cm4gMCE9PU0mJihwW3grTV09RC1KPDwyNHw2NDw8MTZ8MCkscy5iaXRzPUgsMH19LHsiLi4vdXRpbHMvY29tbW9uIjoyN31dLDM3OltmdW5jdGlvbihhLGIpeyJ1c2Ugc3RyaWN0IjtiLmV4cG9ydHM9ezI6Im5lZWQgZGljdGlvbmFyeSIsMToic3RyZWFtIGVuZCIsMDoiIiwiLTEiOiJmaWxlIGVycm9yIiwiLTIiOiJzdHJlYW0gZXJyb3IiLCItMyI6ImRhdGEgZXJyb3IiLCItNCI6Imluc3VmZmljaWVudCBtZW1vcnkiLCItNSI6ImJ1ZmZlciBlcnJvciIsIi02IjoiaW5jb21wYXRpYmxlIHZlcnNpb24ifX0se31dLDM4OltmdW5jdGlvbihhLGIsYyl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGQoYSl7Zm9yKHZhciBiPWEubGVuZ3RoOy0tYj49MDspYVtiXT0wfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDI1Nj5hP2diW2FdOmdiWzI1NisoYT4+PjcpXX1mdW5jdGlvbiBmKGEsYil7YS5wZW5kaW5nX2J1ZlthLnBlbmRpbmcrK109MjU1JmIsYS5wZW5kaW5nX2J1ZlthLnBlbmRpbmcrK109Yj4+PjgmMjU1fWZ1bmN0aW9uIGcoYSxiLGMpe2EuYmlfdmFsaWQ+Vi1jPyhhLmJpX2J1Znw9Yjw8YS5iaV92YWxpZCY2NTUzNSxmKGEsYS5iaV9idWYpLGEuYmlfYnVmPWI+PlYtYS5iaV92YWxpZCxhLmJpX3ZhbGlkKz1jLVYpOihhLmJpX2J1Znw9Yjw8YS5iaV92YWxpZCY2NTUzNSxhLmJpX3ZhbGlkKz1jKX1mdW5jdGlvbiBoKGEsYixjKXtnKGEsY1syKmJdLGNbMipiKzFdKX1mdW5jdGlvbiBpKGEsYil7dmFyIGM9MDtkbyBjfD0xJmEsYT4+Pj0xLGM8PD0xO3doaWxlKC0tYj4wKTtyZXR1cm4gYz4+PjF9ZnVuY3Rpb24gaihhKXsxNj09PWEuYmlfdmFsaWQ/KGYoYSxhLmJpX2J1ZiksYS5iaV9idWY9MCxhLmJpX3ZhbGlkPTApOmEuYmlfdmFsaWQ+PTgmJihhLnBlbmRpbmdfYnVmW2EucGVuZGluZysrXT0yNTUmYS5iaV9idWYsYS5iaV9idWY+Pj04LGEuYmlfdmFsaWQtPTgpfWZ1bmN0aW9uIGsoYSxiKXt2YXIgYyxkLGUsZixnLGgsaT1iLmR5bl90cmVlLGo9Yi5tYXhfY29kZSxrPWIuc3RhdF9kZXNjLnN0YXRpY190cmVlLGw9Yi5zdGF0X2Rlc2MuaGFzX3N0cmVlLG09Yi5zdGF0X2Rlc2MuZXh0cmFfYml0cyxuPWIuc3RhdF9kZXNjLmV4dHJhX2Jhc2Usbz1iLnN0YXRfZGVzYy5tYXhfbGVuZ3RoLHA9MDtmb3IoZj0wO1U+PWY7ZisrKWEuYmxfY291bnRbZl09MDtmb3IoaVsyKmEuaGVhcFthLmhlYXBfbWF4XSsxXT0wLGM9YS5oZWFwX21heCsxO1Q+YztjKyspZD1hLmhlYXBbY10sZj1pWzIqaVsyKmQrMV0rMV0rMSxmPm8mJihmPW8scCsrKSxpWzIqZCsxXT1mLGQ+anx8KGEuYmxfY291bnRbZl0rKyxnPTAsZD49biYmKGc9bVtkLW5dKSxoPWlbMipkXSxhLm9wdF9sZW4rPWgqKGYrZyksbCYmKGEuc3RhdGljX2xlbis9aCooa1syKmQrMV0rZykpKTtpZigwIT09cCl7ZG97Zm9yKGY9by0xOzA9PT1hLmJsX2NvdW50W2ZdOylmLS07YS5ibF9jb3VudFtmXS0tLGEuYmxfY291bnRbZisxXSs9MixhLmJsX2NvdW50W29dLS0scC09Mn13aGlsZShwPjApO2ZvcihmPW87MCE9PWY7Zi0tKWZvcihkPWEuYmxfY291bnRbZl07MCE9PWQ7KWU9YS5oZWFwWy0tY10sZT5qfHwoaVsyKmUrMV0hPT1mJiYoYS5vcHRfbGVuKz0oZi1pWzIqZSsxXSkqaVsyKmVdLGlbMiplKzFdPWYpLGQtLSl9fWZ1bmN0aW9uIGwoYSxiLGMpe3ZhciBkLGUsZj1uZXcgQXJyYXkoVSsxKSxnPTA7Zm9yKGQ9MTtVPj1kO2QrKylmW2RdPWc9ZytjW2QtMV08PDE7Zm9yKGU9MDtiPj1lO2UrKyl7dmFyIGg9YVsyKmUrMV07MCE9PWgmJihhWzIqZV09aShmW2hdKyssaCkpfX1mdW5jdGlvbiBtKCl7dmFyIGEsYixjLGQsZSxmPW5ldyBBcnJheShVKzEpO2ZvcihjPTAsZD0wO08tMT5kO2QrKylmb3IoaWJbZF09YyxhPTA7YTwxPDxfW2RdO2ErKyloYltjKytdPWQ7Zm9yKGhiW2MtMV09ZCxlPTAsZD0wOzE2PmQ7ZCsrKWZvcihqYltkXT1lLGE9MDthPDE8PGFiW2RdO2ErKylnYltlKytdPWQ7Zm9yKGU+Pj03O1I+ZDtkKyspZm9yKGpiW2RdPWU8PDcsYT0wO2E8MTw8YWJbZF0tNzthKyspZ2JbMjU2K2UrK109ZDtmb3IoYj0wO1U+PWI7YisrKWZbYl09MDtmb3IoYT0wOzE0Mz49YTspZWJbMiphKzFdPTgsYSsrLGZbOF0rKztmb3IoOzI1NT49YTspZWJbMiphKzFdPTksYSsrLGZbOV0rKztmb3IoOzI3OT49YTspZWJbMiphKzFdPTcsYSsrLGZbN10rKztmb3IoOzI4Nz49YTspZWJbMiphKzFdPTgsYSsrLGZbOF0rKztmb3IobChlYixRKzEsZiksYT0wO1I+YTthKyspZmJbMiphKzFdPTUsZmJbMiphXT1pKGEsNSk7a2I9bmV3IG5iKGViLF8sUCsxLFEsVSksbGI9bmV3IG5iKGZiLGFiLDAsUixVKSxtYj1uZXcgbmIobmV3IEFycmF5KDApLGJiLDAsUyxXKX1mdW5jdGlvbiBuKGEpe3ZhciBiO2ZvcihiPTA7UT5iO2IrKylhLmR5bl9sdHJlZVsyKmJdPTA7Zm9yKGI9MDtSPmI7YisrKWEuZHluX2R0cmVlWzIqYl09MDtmb3IoYj0wO1M+YjtiKyspYS5ibF90cmVlWzIqYl09MDthLmR5bl9sdHJlZVsyKlhdPTEsYS5vcHRfbGVuPWEuc3RhdGljX2xlbj0wLGEubGFzdF9saXQ9YS5tYXRjaGVzPTB9ZnVuY3Rpb24gbyhhKXthLmJpX3ZhbGlkPjg/ZihhLGEuYmlfYnVmKTphLmJpX3ZhbGlkPjAmJihhLnBlbmRpbmdfYnVmW2EucGVuZGluZysrXT1hLmJpX2J1ZiksYS5iaV9idWY9MCxhLmJpX3ZhbGlkPTB9ZnVuY3Rpb24gcChhLGIsYyxkKXtvKGEpLGQmJihmKGEsYyksZihhLH5jKSksRS5hcnJheVNldChhLnBlbmRpbmdfYnVmLGEud2luZG93LGIsYyxhLnBlbmRpbmcpLGEucGVuZGluZys9Y31mdW5jdGlvbiBxKGEsYixjLGQpe3ZhciBlPTIqYixmPTIqYztyZXR1cm4gYVtlXTxhW2ZdfHxhW2VdPT09YVtmXSYmZFtiXTw9ZFtjXX1mdW5jdGlvbiByKGEsYixjKXtmb3IodmFyIGQ9YS5oZWFwW2NdLGU9Yzw8MTtlPD1hLmhlYXBfbGVuJiYoZTxhLmhlYXBfbGVuJiZxKGIsYS5oZWFwW2UrMV0sYS5oZWFwW2VdLGEuZGVwdGgpJiZlKyssIXEoYixkLGEuaGVhcFtlXSxhLmRlcHRoKSk7KWEuaGVhcFtjXT1hLmhlYXBbZV0sYz1lLGU8PD0xO2EuaGVhcFtjXT1kfWZ1bmN0aW9uIHMoYSxiLGMpe3ZhciBkLGYsaSxqLGs9MDtpZigwIT09YS5sYXN0X2xpdClkbyBkPWEucGVuZGluZ19idWZbYS5kX2J1ZisyKmtdPDw4fGEucGVuZGluZ19idWZbYS5kX2J1ZisyKmsrMV0sZj1hLnBlbmRpbmdfYnVmW2EubF9idWYra10saysrLDA9PT1kP2goYSxmLGIpOihpPWhiW2ZdLGgoYSxpK1ArMSxiKSxqPV9baV0sMCE9PWomJihmLT1pYltpXSxnKGEsZixqKSksZC0tLGk9ZShkKSxoKGEsaSxjKSxqPWFiW2ldLDAhPT1qJiYoZC09amJbaV0sZyhhLGQsaikpKTt3aGlsZShrPGEubGFzdF9saXQpO2goYSxYLGIpfWZ1bmN0aW9uIHQoYSxiKXt2YXIgYyxkLGUsZj1iLmR5bl90cmVlLGc9Yi5zdGF0X2Rlc2Muc3RhdGljX3RyZWUsaD1iLnN0YXRfZGVzYy5oYXNfc3RyZWUsaT1iLnN0YXRfZGVzYy5lbGVtcyxqPS0xO2ZvcihhLmhlYXBfbGVuPTAsYS5oZWFwX21heD1ULGM9MDtpPmM7YysrKTAhPT1mWzIqY10/KGEuaGVhcFsrK2EuaGVhcF9sZW5dPWo9YyxhLmRlcHRoW2NdPTApOmZbMipjKzFdPTA7Zm9yKDthLmhlYXBfbGVuPDI7KWU9YS5oZWFwWysrYS5oZWFwX2xlbl09Mj5qPysrajowLGZbMiplXT0xLGEuZGVwdGhbZV09MCxhLm9wdF9sZW4tLSxoJiYoYS5zdGF0aWNfbGVuLT1nWzIqZSsxXSk7Zm9yKGIubWF4X2NvZGU9aixjPWEuaGVhcF9sZW4+PjE7Yz49MTtjLS0pcihhLGYsYyk7ZT1pO2RvIGM9YS5oZWFwWzFdLGEuaGVhcFsxXT1hLmhlYXBbYS5oZWFwX2xlbi0tXSxyKGEsZiwxKSxkPWEuaGVhcFsxXSxhLmhlYXBbLS1hLmhlYXBfbWF4XT1jLGEuaGVhcFstLWEuaGVhcF9tYXhdPWQsZlsyKmVdPWZbMipjXStmWzIqZF0sYS5kZXB0aFtlXT0oYS5kZXB0aFtjXT49YS5kZXB0aFtkXT9hLmRlcHRoW2NdOmEuZGVwdGhbZF0pKzEsZlsyKmMrMV09ZlsyKmQrMV09ZSxhLmhlYXBbMV09ZSsrLHIoYSxmLDEpO3doaWxlKGEuaGVhcF9sZW4+PTIpO2EuaGVhcFstLWEuaGVhcF9tYXhdPWEuaGVhcFsxXSxrKGEsYiksbChmLGosYS5ibF9jb3VudCl9ZnVuY3Rpb24gdShhLGIsYyl7dmFyIGQsZSxmPS0xLGc9YlsxXSxoPTAsaT03LGo9NDtmb3IoMD09PWcmJihpPTEzOCxqPTMpLGJbMiooYysxKSsxXT02NTUzNSxkPTA7Yz49ZDtkKyspZT1nLGc9YlsyKihkKzEpKzFdLCsraDxpJiZlPT09Z3x8KGo+aD9hLmJsX3RyZWVbMiplXSs9aDowIT09ZT8oZSE9PWYmJmEuYmxfdHJlZVsyKmVdKyssYS5ibF90cmVlWzIqWV0rKyk6MTA+PWg/YS5ibF90cmVlWzIqWl0rKzphLmJsX3RyZWVbMiokXSsrLGg9MCxmPWUsMD09PWc/KGk9MTM4LGo9Myk6ZT09PWc/KGk9NixqPTMpOihpPTcsaj00KSl9ZnVuY3Rpb24gdihhLGIsYyl7dmFyIGQsZSxmPS0xLGk9YlsxXSxqPTAsaz03LGw9NDtmb3IoMD09PWkmJihrPTEzOCxsPTMpLGQ9MDtjPj1kO2QrKylpZihlPWksaT1iWzIqKGQrMSkrMV0sISgrK2o8ayYmZT09PWkpKXtpZihsPmope2RvIGgoYSxlLGEuYmxfdHJlZSk7d2hpbGUoMCE9PS0tail9ZWxzZSAwIT09ZT8oZSE9PWYmJihoKGEsZSxhLmJsX3RyZWUpLGotLSksaChhLFksYS5ibF90cmVlKSxnKGEsai0zLDIpKToxMD49aj8oaChhLFosYS5ibF90cmVlKSxnKGEsai0zLDMpKTooaChhLCQsYS5ibF90cmVlKSxnKGEsai0xMSw3KSk7aj0wLGY9ZSwwPT09aT8oaz0xMzgsbD0zKTplPT09aT8oaz02LGw9Myk6KGs9NyxsPTQpfX1mdW5jdGlvbiB3KGEpe3ZhciBiO2Zvcih1KGEsYS5keW5fbHRyZWUsYS5sX2Rlc2MubWF4X2NvZGUpLHUoYSxhLmR5bl9kdHJlZSxhLmRfZGVzYy5tYXhfY29kZSksdChhLGEuYmxfZGVzYyksYj1TLTE7Yj49MyYmMD09PWEuYmxfdHJlZVsyKmNiW2JdKzFdO2ItLSk7cmV0dXJuIGEub3B0X2xlbis9MyooYisxKSs1KzUrNCxifWZ1bmN0aW9uIHgoYSxiLGMsZCl7dmFyIGU7Zm9yKGcoYSxiLTI1Nyw1KSxnKGEsYy0xLDUpLGcoYSxkLTQsNCksZT0wO2Q+ZTtlKyspZyhhLGEuYmxfdHJlZVsyKmNiW2VdKzFdLDMpO3YoYSxhLmR5bl9sdHJlZSxiLTEpLHYoYSxhLmR5bl9kdHJlZSxjLTEpfWZ1bmN0aW9uIHkoYSl7dmFyIGIsYz00MDkzNjI0NDQ3O2ZvcihiPTA7MzE+PWI7YisrLGM+Pj49MSlpZigxJmMmJjAhPT1hLmR5bl9sdHJlZVsyKmJdKXJldHVybiBHO2lmKDAhPT1hLmR5bl9sdHJlZVsxOF18fDAhPT1hLmR5bl9sdHJlZVsyMF18fDAhPT1hLmR5bl9sdHJlZVsyNl0pcmV0dXJuIEg7Zm9yKGI9MzI7UD5iO2IrKylpZigwIT09YS5keW5fbHRyZWVbMipiXSlyZXR1cm4gSDtyZXR1cm4gR31mdW5jdGlvbiB6KGEpe3BifHwobSgpLHBiPSEwKSxhLmxfZGVzYz1uZXcgb2IoYS5keW5fbHRyZWUsa2IpLGEuZF9kZXNjPW5ldyBvYihhLmR5bl9kdHJlZSxsYiksYS5ibF9kZXNjPW5ldyBvYihhLmJsX3RyZWUsbWIpLGEuYmlfYnVmPTAsYS5iaV92YWxpZD0wLG4oYSl9ZnVuY3Rpb24gQShhLGIsYyxkKXtnKGEsKEo8PDEpKyhkPzE6MCksMykscChhLGIsYywhMCl9ZnVuY3Rpb24gQihhKXtnKGEsSzw8MSwzKSxoKGEsWCxlYiksaihhKX1mdW5jdGlvbiBDKGEsYixjLGQpe3ZhciBlLGYsaD0wO2EubGV2ZWw+MD8oYS5zdHJtLmRhdGFfdHlwZT09PUkmJihhLnN0cm0uZGF0YV90eXBlPXkoYSkpLHQoYSxhLmxfZGVzYyksdChhLGEuZF9kZXNjKSxoPXcoYSksZT1hLm9wdF9sZW4rMys3Pj4+MyxmPWEuc3RhdGljX2xlbiszKzc+Pj4zLGU+PWYmJihlPWYpKTplPWY9Yys1LGU+PWMrNCYmLTEhPT1iP0EoYSxiLGMsZCk6YS5zdHJhdGVneT09PUZ8fGY9PT1lPyhnKGEsKEs8PDEpKyhkPzE6MCksMykscyhhLGViLGZiKSk6KGcoYSwoTDw8MSkrKGQ/MTowKSwzKSx4KGEsYS5sX2Rlc2MubWF4X2NvZGUrMSxhLmRfZGVzYy5tYXhfY29kZSsxLGgrMSkscyhhLGEuZHluX2x0cmVlLGEuZHluX2R0cmVlKSksbihhKSxkJiZvKGEpfWZ1bmN0aW9uIEQoYSxiLGMpe3JldHVybiBhLnBlbmRpbmdfYnVmW2EuZF9idWYrMiphLmxhc3RfbGl0XT1iPj4+OCYyNTUsYS5wZW5kaW5nX2J1ZlthLmRfYnVmKzIqYS5sYXN0X2xpdCsxXT0yNTUmYixhLnBlbmRpbmdfYnVmW2EubF9idWYrYS5sYXN0X2xpdF09MjU1JmMsYS5sYXN0X2xpdCsrLDA9PT1iP2EuZHluX2x0cmVlWzIqY10rKzooYS5tYXRjaGVzKyssYi0tLGEuZHluX2x0cmVlWzIqKGhiW2NdK1ArMSldKyssYS5keW5fZHRyZWVbMiplKGIpXSsrKSxhLmxhc3RfbGl0PT09YS5saXRfYnVmc2l6ZS0xfXZhciBFPWEoIi4uL3V0aWxzL2NvbW1vbiIpLEY9NCxHPTAsSD0xLEk9MixKPTAsSz0xLEw9MixNPTMsTj0yNTgsTz0yOSxQPTI1NixRPVArMStPLFI9MzAsUz0xOSxUPTIqUSsxLFU9MTUsVj0xNixXPTcsWD0yNTYsWT0xNixaPTE3LCQ9MTgsXz1bMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwXSxhYj1bMCwwLDAsMCwxLDEsMiwyLDMsMyw0LDQsNSw1LDYsNiw3LDcsOCw4LDksOSwxMCwxMCwxMSwxMSwxMiwxMiwxMywxM10sYmI9WzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMiwzLDddLGNiPVsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XSxkYj01MTIsZWI9bmV3IEFycmF5KDIqKFErMikpO2QoZWIpO3ZhciBmYj1uZXcgQXJyYXkoMipSKTtkKGZiKTt2YXIgZ2I9bmV3IEFycmF5KGRiKTtkKGdiKTt2YXIgaGI9bmV3IEFycmF5KE4tTSsxKTtkKGhiKTt2YXIgaWI9bmV3IEFycmF5KE8pO2QoaWIpO3ZhciBqYj1uZXcgQXJyYXkoUik7ZChqYik7dmFyIGtiLGxiLG1iLG5iPWZ1bmN0aW9uKGEsYixjLGQsZSl7dGhpcy5zdGF0aWNfdHJlZT1hLHRoaXMuZXh0cmFfYml0cz1iLHRoaXMuZXh0cmFfYmFzZT1jLHRoaXMuZWxlbXM9ZCx0aGlzLm1heF9sZW5ndGg9ZSx0aGlzLmhhc19zdHJlZT1hJiZhLmxlbmd0aH0sb2I9ZnVuY3Rpb24oYSxiKXt0aGlzLmR5bl90cmVlPWEsdGhpcy5tYXhfY29kZT0wLHRoaXMuc3RhdF9kZXNjPWJ9LHBiPSExO2MuX3RyX2luaXQ9eixjLl90cl9zdG9yZWRfYmxvY2s9QSxjLl90cl9mbHVzaF9ibG9jaz1DLGMuX3RyX3RhbGx5PUQsYy5fdHJfYWxpZ249Qn0seyIuLi91dGlscy9jb21tb24iOjI3fV0sMzk6W2Z1bmN0aW9uKGEsYil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIGMoKXt0aGlzLmlucHV0PW51bGwsdGhpcy5uZXh0X2luPTAsdGhpcy5hdmFpbF9pbj0wLHRoaXMudG90YWxfaW49MCx0aGlzLm91dHB1dD1udWxsLHRoaXMubmV4dF9vdXQ9MCx0aGlzLmF2YWlsX291dD0wLHRoaXMudG90YWxfb3V0PTAsdGhpcy5tc2c9IiIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfWIuZXhwb3J0cz1jfSx7fV19LHt9LFs5XSkoOSl9KTsNCg==">
        </script>
        <!-- }}} JsZip -->
        <!-- {{{ UML -->
        <script type="text/javascript">
(function(){

function _(tag,attrs) {
    var ns = ("xmlns" in (attrs || {}));
    var result = ns?
        document.createElementNS(attrs["xmlns"],tag):
        document.createElement(tag);
    if(attrs) {
        Object.keys(attrs).forEach(function(attr) {
            if(("xmlns" != attr) || ("svg" == tag)) {
                result.setAttribute(attr, attrs[attr]);
            }
        });
    }
    return result;
}

var slugify = (function() {
    var one  = '',
        two  = 'aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz';
    one += one.toUpperCase();
    two += two.toUpperCase();
    return function(o) {
        var txt = ""+(o || "");
        return txt.replace(/.{1}/g,function(c){
                var i = one.indexOf(c);
                return (i==-1)?c:two[i];
            })
            .replace(/[^\w-]/g, '-')
            .replace(/^-+/, '')
            .replace(/-+$/, '')
            .replace(/--+/g, '-')
            ;
    };
})();

function idOrNewId(element) {
    if(!(element.id)) {
        var base = slugify(element.name || element.textContent).toLowerCase();
        var n = 0;
        var id = base || ((base="_") + (++n));
        while(document.querySelector("#"+id)) {
            id = base+(++n);
        }
        element.setAttribute("id", id);
    }
    return element.id;
}

function draggableInParent(self,originalParent) {
    self.addEventListener("mousedown", function(event) {
        var parent = originalParent || self.diagram || self.parentNode;
        var foo = parent.startDrag;
        if(foo) {
            foo.bind(parent)(event, self);
            event.preventDefault();
        }
    });
};

function menu(event, items, callback, options) {
    options = options || {};
    items = (items || "...").split(/,+/g);
    var selector = _("div", {"class":"uml-floating-menu"});
    items.forEach(function(item) {
        var d = _("div", {"class":"uml-menu-item"});
        d.textContent = item;
        selector.appendChild(d);
    });
    selector.style.left = event.pageX+"px";
    selector.style.top = event.pageY+"px";
    var container = document.body;
    container.appendChild(selector);
    function singleclick(ev2) {
        if(ev2.target.parentNode == selector) {
            callback(ev2.target.textContent, 
                options.originalEvent?event:ev2);
        }
        selector.parentNode.removeChild(selector);
        container.removeEventListener("mousedown", singleclick);
    };
    container.addEventListener("mousedown", singleclick);
};

function elementsFromPoint(x,y) {
    var stack = [];
    var restores = [];
    var current = document.elementFromPoint(
            x-(document.body.scrollLeft || document.documentElement.scrollLeft),
            y-(document.body.scrollTop || document.documentElement.scrollTop)
        );
    while(current?(document.body != current):false) {
        stack.push(current);
        restores.push({
            element:current,
            value: current.style.getPropertyValue('pointer-events'),
            priority: current.style.getPropertyPriority('pointer-events'),
        });
		current.style.setProperty('pointer-events', 'none', 'important'); 
        current = document.elementFromPoint(
            x-(document.body.scrollLeft || document.documentElement.scrollLeft),
            y-(document.body.scrollTop || document.documentElement.scrollTop)
        );
    }
    restores.forEach(function(r) {
		r.element.style.setProperty('pointer-events', 
                r.value || '', r.priority); 
    });
    return stack;
}

var sizeGetters = {
    pageX:{
        get:function(){
            var result = 0;
            var node = this;
            while(node) {
                result += +(node.offsetLeft || 0);
                node = node.offsetParent;
            }
            return result;
        }
    },
    pageY:{
        get:function(){
            var result = 0;
            var node = this;
            while(node) {
                result += +(node.offsetTop || 0);
                node = node.offsetParent;
            }
            return result;
        }
    },
    width:{
        get:function(){
            var cs = getComputedStyle(this);
            var w = cs.width.replace(/px/,"");
            var l = cs.paddingLeft.replace(/px/,"");
            var r = cs.paddingRight.replace(/px/,"");
            return (+w)+(+l)+(+r);
        }
    },
    height:{
        get:function(){
            var cs = getComputedStyle(this);
            var w = cs.height.replace(/px/,"");
            var l = cs.paddingTop.replace(/px/,"");
            var r = cs.paddingBottom.replace(/px/,"");
            return (+w)+(+l)+(+r);
        }
    },
};

var UmlLinkPrototype = Object.create(HTMLDivElement.prototype,{
    svg:{get:function() {
        return this.querySelector("svg") ||
               this.appendChild(_("svg",{
                "xmlns": "http://www.w3.org/2000/svg", version:"1.1", 
                "xmlns:xlink": "http://www.w3.org/1999/xlink",
                "style":"display:block",
                }));
    }},
    defaultTitle:{value:""},
});
UmlLinkPrototype.update = function() {
    if(this.getAttribute("linktype") == "arrowed") {
        this.updateArrowed();
    } else if(this.getAttribute("linktype") == "dashed") {
        this.updateDashed();
    } else if(this.getAttribute("linktype") == "dashedarrow") {
        this.updateDashedArrow();
    } else if(this.getAttribute("linktype") == "dashedemptyarrow") {
        this.updateDashedEmptyArrow();
    } else if(this.getAttribute("linktype") == "emptyarrow") {
        this.updateEmptyArrow();
    } else if(this.getAttribute("linktype") == "diamond") {
        this.updateDiamond();
    } else if(this.getAttribute("linktype") == "diamondfull") {
        this.updateDiamondFull();
    } else {
        this.updateStraight();
    }
};
UmlLinkPrototype.updateStraight = function() {
    var from = this.getAttribute("from") || "0,0";
    var to =   this.getAttribute("to") || "0,0";
    var g = this.svg.querySelector("g") || this.svg.appendChild(
            _("g",{ "xmlns": "http://www.w3.org/2000/svg", }));
    var line = g.querySelector("line") || g.appendChild(
            _("line",{ "xmlns": "http://www.w3.org/2000/svg",
                    "stroke": "black",
                    "stroke-width": 1,
                    }));
    var ports = getPortsFor(from,to,this.parentNode);
    line.setAttribute("x1", ports.x1);
    line.setAttribute("y1", ports.y1);
    line.setAttribute("x2", ports.x2);
    line.setAttribute("y2", ports.y2);
    var p = this.parentNode;
    if(p) {
        this.svg.setAttribute("width", p.offsetWidth);
        this.svg.setAttribute("height", p.offsetHeight);
    }
};
UmlLinkPrototype.updateDashedArrow = function() {
    this.updateArrowed(true);
};
UmlLinkPrototype.updateDashedEmptyArrow = function() {
    this.updateArrowed(true,true);
};
UmlLinkPrototype.updateEmptyArrow = function() {
    this.updateArrowed(false,true);
};
UmlLinkPrototype.updateArrowed = function(dashed,empty) {
    var from = this.getAttribute("from") || "0,0";
    var to =   this.getAttribute("to") || "0,0";
    var defs = this.svg.querySelector("defs") || this.svg.appendChild(
            _("defs",{ "xmlns": "http://www.w3.org/2000/svg" }));
    var tpath = defs.querySelector("path") || defs.appendChild(
            _("path",{ "xmlns": "http://www.w3.org/2000/svg" }));
    var g = this.svg.querySelector("g") || this.svg.appendChild(
            _("g",{ "xmlns": "http://www.w3.org/2000/svg", }));
    var lineopts = { "xmlns": "http://www.w3.org/2000/svg",
                    "stroke": "black",
                    "stroke-width": 1,
                    };
    if(dashed) {
        lineopts["stroke-dasharray"] = "5,5";
    };
    var line = g.querySelector("line") || g.appendChild(
            _("line",lineopts));
    var path = g.querySelector("path") || g.appendChild(
            _("path",{ "xmlns": "http://www.w3.org/2000/svg",
                    "stroke": "black",
                    "stroke-width": 1,
                    "fill": empty?"none":"white",
                    }));

    var label = g.querySelector("text") || g.appendChild(
            _("text",{ "xmlns": "http://www.w3.org/2000/svg",
                    "fill": "black",
                    "font-family":"Tahoma,Arial,Helvetica,sans-serif",
                    "font-size":"10",
                    "text-anchor":"middle",
                    }));
    var pid = "#"+idOrNewId(tpath);
    var alongPath = label.querySelector("textPath") || label.appendChild(
            _("textPath",{ "xmlns": "http://www.w3.org/2000/svg",
                    "startOffset":"50%",
                }));

    var ports = getPortsFor(from,to,this.parentNode);
    line.setAttribute("x1", ports.x1);
    line.setAttribute("y1", ports.y1);
    line.setAttribute("x2", ports.x2);
    line.setAttribute("y2", ports.y2);

    if(ports.e2) {
        var x12 = ports.x1-ports.x2,
            y12 = ports.y1-ports.y2,
            l = Math.max(1, Math.sqrt(x12*x12+y12*y12)),
            ux = x12/l,
            uy = y12/l,
            L = 8,
            x3 = ports.x2+L*(2*ux+uy),
            x4 = ports.x2+L*(2*ux-uy),
            y3 = ports.y2+L*(2*uy-ux),
            y4 = ports.y2+L*(2*uy+ux)
            ;
        if(empty) {
            path.setAttribute("d", 
                             "M"+x3+" "+y3
                             +" L"+ports.x2+" "+ports.y2
                             +" L"+x4+" "+y4
                            );
        } else {
            path.setAttribute("d", "M"+ports.x2+" "+ports.y2
                             +" L"+x3+" "+y3
                             +" L"+x4+" "+y4
                             +" Z");
        }
    } else {
        path.setAttribute("d", "M0 0");
    }

    if(Math.min(ports.x1,ports.x2)==ports.x1) {
        tpath.setAttribute("d", "M "+ports.x1+" "+ports.y1
                  +" L "+ports.x2+" "+ports.y2);
    } else {
        tpath.setAttribute("d", "M "+ports.x2+" "+ports.y2
                  +" L "+ports.x1+" "+ports.y1);
    }

    var title = this.getAttribute("title") || this.defaultTitle;
    alongPath.textContent = title;
    alongPath.setAttributeNS("http://www.w3.org/1999/xlink",
            "href", pid);

    var p = this.parentNode;
    if(p) {
        this.svg.setAttribute("width", p.offsetWidth);
        this.svg.setAttribute("height", p.offsetHeight);
    }
};
UmlLinkPrototype.updateDashed = function() {
    var from = this.getAttribute("from") || "0,0";
    var to =   this.getAttribute("to") || "0,0";
    var defs = this.svg.querySelector("defs") || this.svg.appendChild(
            _("defs",{ "xmlns": "http://www.w3.org/2000/svg" }));
    var tpath = defs.querySelector("path") || defs.appendChild(
            _("path",{ "xmlns": "http://www.w3.org/2000/svg" }));
    var g = this.svg.querySelector("g") || this.svg.appendChild(
            _("g",{ "xmlns": "http://www.w3.org/2000/svg", }));
    var line = g.querySelector("line") || g.appendChild(
            _("line",{ "xmlns": "http://www.w3.org/2000/svg",
                    "stroke": "black",
                    "stroke-width": 1,
                    "stroke-dasharray": "5,5",
                    }));
    var path = g.querySelector("path") || g.appendChild(
            _("path",{ "xmlns": "http://www.w3.org/2000/svg",
                    "stroke": "black",
                    "stroke-width": 1,
                    "stroke-dasharray": "5,5",
                    "fill": "none",
                    }));
    var label = g.querySelector("text") || g.appendChild(
            _("text",{ "xmlns": "http://www.w3.org/2000/svg",
                    "fill": "black",
                    "font-family":"Tahoma,Arial,Helvetica,sans-serif",
                    "font-size":"10",
                    "text-anchor":"middle",
                    }));
    var pid = "#"+idOrNewId(tpath);
    var alongPath = label.querySelector("textPath") || label.appendChild(
            _("textPath",{ "xmlns": "http://www.w3.org/2000/svg",
                    "startOffset":"50%",
                }));
    var ports = getPortsFor(from,to,this.parentNode);
    line.setAttribute("x1", ports.x1);
    line.setAttribute("y1", ports.y1);
    line.setAttribute("x2", ports.x2);
    line.setAttribute("y2", ports.y2);

    if(ports.e2) {
        var x12 = ports.x1-ports.x2,
            y12 = ports.y1-ports.y2,
            l = Math.max(1, Math.sqrt(x12*x12+y12*y12)),
            ux = x12/l,
            uy = y12/l,
            L = 8,
            x3 = ports.x2+L*(2*ux+uy),
            x4 = ports.x2+L*(2*ux-uy),
            y3 = ports.y2+L*(2*uy-ux),
            y4 = ports.y2+L*(2*uy+ux)
            ;
        var d = "M"+x3+" "+y3
              +" L"+ports.x2+" "+ports.y2
              +" L"+x4+" "+y4;
        path.setAttribute("d", d);
    } else {
        path.setAttribute("d", "M0 0");
    }

    if(Math.min(ports.x1,ports.x2)==ports.x1) {
        tpath.setAttribute("d", "M "+ports.x1+" "+ports.y1
                  +" L "+ports.x2+" "+ports.y2);
    } else {
        tpath.setAttribute("d", "M "+ports.x2+" "+ports.y2
                  +" L "+ports.x1+" "+ports.y1);
    }
    var title = this.getAttribute("title") || this.defaultTitle;
    alongPath.textContent = title;
    alongPath.setAttributeNS("http://www.w3.org/1999/xlink",
            "href", pid);
    var p = this.parentNode;
    if(p) {
        this.svg.setAttribute("width", p.offsetWidth);
        this.svg.setAttribute("height", p.offsetHeight);
    }
};
UmlLinkPrototype.updateDiamondFull = function(full) {
    this.updateDiamond(true);
}
UmlLinkPrototype.updateDiamond = function(full) {
    var from = this.getAttribute("from") || "0,0";
    var to =   this.getAttribute("to") || "0,0";
    var defs = this.svg.querySelector("defs") || this.svg.appendChild(
            _("defs",{ "xmlns": "http://www.w3.org/2000/svg" }));
    var tpath = defs.querySelector("path") || defs.appendChild(
            _("path",{ "xmlns": "http://www.w3.org/2000/svg" }));
    var g = this.svg.querySelector("g") || this.svg.appendChild(
            _("g",{ "xmlns": "http://www.w3.org/2000/svg", }));
    var line = g.querySelector("line") || g.appendChild(
            _("line", { "xmlns": "http://www.w3.org/2000/svg",
                    "stroke": "black",
                    "stroke-width": 1,
                    }));
    var path = g.querySelector("path") || g.appendChild(
            _("path",{ "xmlns": "http://www.w3.org/2000/svg",
                    "stroke": "black",
                    "stroke-width": 1,
                    "fill": full?"black":"white",
                    }));
    var label = g.querySelector("text") || g.appendChild(
            _("text",{ "xmlns": "http://www.w3.org/2000/svg",
                    "fill": "black",
                    "font-family":"Tahoma,Arial,Helvetica,sans-serif",
                    "font-size":"10",
                    "text-anchor":"middle",
                    }));
    var pid = "#"+idOrNewId(tpath);
    var alongPath = label.querySelector("textPath") || label.appendChild(
            _("textPath",{ "xmlns": "http://www.w3.org/2000/svg",
                    "startOffset":"50%",
                }));
    var ports = getPortsFor(to,from,this.parentNode);
    line.setAttribute("x1", ports.x1);
    line.setAttribute("y1", ports.y1);
    line.setAttribute("x2", ports.x2);
    line.setAttribute("y2", ports.y2);

    if(ports.e2) {
        var x12 = ports.x1-ports.x2,
            y12 = ports.y1-ports.y2,
            l = Math.max(1, Math.sqrt(x12*x12+y12*y12)),
            ux = x12/l,
            uy = y12/l,
            L = 5,
            x3 = ports.x2+L*(2*ux+uy),
            x4 = ports.x2+L*(2*ux-uy),
            y3 = ports.y2+L*(2*uy-ux),
            y4 = ports.y2+L*(2*uy+ux)
            x5 = ports.x2+L*4*ux;
            y5 = ports.y2+L*4*uy;
            ;
        path.setAttribute("d", "M"+ports.x2+" "+ports.y2
                             +" L"+x3+" "+y3
                             +" L"+x5+" "+y5
                             +" L"+x4+" "+y4
                             +" Z");
    } else {
        path.setAttribute("d", "M0 0");
    }

    if(Math.min(ports.x1,ports.x2)==ports.x1) {
        tpath.setAttribute("d", "M "+ports.x1+" "+ports.y1
                  +" L "+ports.x2+" "+ports.y2);
    } else {
        tpath.setAttribute("d", "M "+ports.x2+" "+ports.y2
                  +" L "+ports.x1+" "+ports.y1);
    }
    var title = this.getAttribute("title") || "";
    alongPath.textContent = title;
    alongPath.setAttributeNS("http://www.w3.org/1999/xlink",
            "href", pid);
    var p = this.parentNode;
    if(p) {
        this.svg.setAttribute("width", p.offsetWidth);
        this.svg.setAttribute("height", p.offsetHeight);
    }
};
UmlLinkPrototype.pack = function() {
    var s = this.svg;
    var b = s.getBBox();
    var x0 = Math.floor(b.x)-1;
    var y0 = Math.floor(b.y)-1;
    var w = Math.floor(b.width)+4;
    var h = Math.floor(b.height)+4;

    s.setAttribute("viewBox",x0+" "+y0+" "+w+" "+h);
    s.setAttribute("width", w);
    s.setAttribute("height", h);
    this.style.left = x0+"px";
    this.style.top = y0+"px";
    this.style.width = w+"px";
    this.style.height = h+"px";
};
UmlLinkPrototype.createdCallback = function() {
    this.addEventListener("contextmenu", function(event) {
        menu(event, "Delete", 
            this.rightClick.bind(this));
        event.preventDefault();
    }.bind(this), false);
};
var UmlLink = document.registerElement('uml-link',
    {prototype:UmlLinkPrototype});

var UmlUsagePrototype = Object.create(UmlLinkPrototype);
UmlUsagePrototype.rightClick = function(choice, event) {
    if("Delete" == choice) {
        var diagram = this.parentNode;
        diagram.removeChild(this);
        diagram.wipeout();
    }
};
UmlUsagePrototype.update = function() {
    this.updateStraight();
    this.pack();
};
var UmlUsage = document.registerElement('uml-usage',
    {prototype:UmlUsagePrototype});

var UmlGeneralizationPrototype = Object.create(UmlLinkPrototype);
UmlGeneralizationPrototype.rightClick = function(choice, event) {
    if("Delete" == choice) {
        var diagram = this.parentNode;
        diagram.removeChild(this);
        diagram.wipeout();
    }
};
UmlGeneralizationPrototype.update = function() {
    if(this.getAttribute("type") == "implement") {
        this.updateDashedArrow();
    } else { 
        this.updateArrowed();
    }
    this.pack();
};
var UmlGeneralization = document.registerElement('uml-generalization',
    {prototype:UmlGeneralizationPrototype});

var UmlIncludePrototype = Object.create(UmlLinkPrototype,{
    defaultTitle:{value:"include"},
});
UmlIncludePrototype.rightClick = function(choice, event) {
    if("Delete" == choice) {
        var diagram = this.parentNode;
        diagram.removeChild(this);
        diagram.wipeout();
    }
};
UmlIncludePrototype.update = function() {
    this.updateDashed();
    this.pack();
};
var UmlInclude = document.registerElement('uml-include',
    {prototype:UmlIncludePrototype});

var UmlExtendPrototype = Object.create(UmlLinkPrototype,{
    defaultTitle:{value:"extend"},
});
UmlExtendPrototype.rightClick = function(choice, event) {
    if("Delete" == choice) {
        var diagram = this.parentNode;
        diagram.removeChild(this);
        diagram.wipeout();
    }
};
UmlExtendPrototype.update = function() {
    this.updateDashed();
    this.pack();
};
var UmlExtend = document.registerElement('uml-extend',
    {prototype:UmlExtendPrototype});

function getPortsFor(a,b,ref) {
    var e1=null,x1=0,y1=0,
        e2=null,x2=0,y2=0,
        xf1,yf1,xf2,yf2,
        L=16;
    var dx = dy = 0;
    if(ref) {
        dx = ref.pageX;
        dy = ref.pageY;
    }
    if(a.match(/,/)) {
        x1 = (+(a.replace(/,.*/,"")) || 0)+dx;
        y1 = (+(a.replace(/.*,/,"")) || 0)+dy;
    } else {
        e1 = document.querySelector("#"+a);
        if(e1) {
            x1 = e1.pageX+e1.width/2;
            y1 = e1.pageY+e1.height/2;
        }
    }
    if(b.match(/,/)) {
        x2 = (+(b.replace(/,.*/,"")) || 0)+dx;
        y2 = (+(b.replace(/.*,/,"")) || 0)+dy;
    } else {
        e2 = document.querySelector("#"+b);
        if(e2) {
            x2 = e2.pageX+e2.width/2;
            y2 = e2.pageY+e2.height/2;
        }
    }
    xf1 = x1; 
    yf1 = y1; 
    xf2 = x2;
    yf2 = y2;
    if(e1) {
        if(e1.getPort) {
            var p = e1.getPort(x1,y1,x2,y2);
            xf1 = p.x;
            yf1 = p.y;
        } else {
            var l = Math.sqrt(Math.max(1,
                    Math.pow(x2-x1,2)+Math.pow(y2-y1,2)));
            xf1 = x1+(x2-x1)/l*L;
            yf1 = y1+(y2-y1)/l*L;
        }
    }
    if(e2) {
        if(e2.getPort) {
            var p = e2.getPort(x2,y2,x1,y1);
            xf2 = p.x;
            yf2 = p.y;
        } else {
            var l = Math.sqrt(Math.max(1,
                    Math.pow(x2-x1,2)+Math.pow(y2-y1,2)));
            xf2 = x2+(x1-x2)/l*L;
            yf2 = y2+(y1-y2)/l*L;
        }
    }
    
    return {
        x1:xf1-dx,
        y1:yf1-dy,
        x2:xf2-dx,
        y2:yf2-dy,
        e1:e1,
        e2:e2,
    };
}

function shadowRouting(options) {
    options = options || {};
    var source = options.source;
    if(source) {
        var link = _("uml-link", {
            "from":idOrNewId(source),
            "to": (source.offsetLeft+source.width/2)+","
                 +(source.offsetTop+source.height/2),
            style:"width:100%;height:100%;",
            linktype:(options.linktype || "line"),
            title:options.title || "",
        });
        var inside = options.inside || document.body;
        inside.insertBefore(link, inside.firstChild);
        // XXX: better with a div, svg has become superfluous
        var capture = inside.appendChild(_("svg",{
                "xmlns": "http://www.w3.org/2000/svg",
                version:"1.1", style:"position:absolute;"
                +"width:100%;height:100%",
            }));
        var dx = source.pageX-source.offsetLeft;
        var dy = source.pageY-source.offsetTop;
        var accept = options.accept || (
            options.acceptNode?function(target){
                if(target)
                if(target != source)
                if(options.acceptNode == target.nodeName.toUpperCase())
                return true;
            }:function(target) {
                if(target) 
                if(target.parentNode == inside)
                if(target != source)
                if(target != capture)
                if(target != link)
                return true;
            });
        var destination = null;
        capture.addEventListener("mousemove", function(event) {
            var targets = elementsFromPoint(event.pageX, event.pageY);
            destination = targets.find(accept);
            link.setAttribute("to",destination?
                    idOrNewId(destination):
                    ((event.pageX-dx)+","+(event.pageY-dy)));
            link.update();
        });
        var done = options.done || function() {};
        capture.addEventListener("mousedown", function(event) {
            var from = link.getAttribute("from");
            var to = link.getAttribute("to");
            inside.removeChild(link);
            inside.removeChild(capture);
            if(destination) options.done(from,to);
        });
    }
}

function editInPlace(self,options) {
    options = options || {};
    var editor = _(options.tag || "div",{contenteditable:true});
    editor.textContent = ""+self.textContent;
    self.textContent = "";
    editor.onblur = editor.onchange = function(event) {
        var lt = String.fromCharCode(60);
        var gt = String.fromCharCode(62);
        var multiline = editor.innerHTML
            .replace(lt+"br"+gt,"\n","g")
            .replace(lt+"[^"+gt+"]*"+gt,"","g")
            .trim();
        //var txt = ""+editor.textContent;
        //console.log("COMMIT", txt,multiline);
        self.textContent = "";
        self.textContent = multiline;
        if(options.callback) options.callback();
    };
    var r = document.createRange();
    self.appendChild(editor);
    r.selectNodeContents(editor);
    var sel = window.getSelection();
    editor.focus();
    sel.removeAllRanges();
    sel.addRange(r);
}

var UmlActorPrototype = Object.create(HTMLDivElement.prototype, sizeGetters);
UmlActorPrototype.createdCallback = function() {
    draggableInParent(this);
    this.addEventListener("dblclick", this.edit.bind(this));
    this.addEventListener("contextmenu", function(event) {
        menu(event, "Link,Generalize,Unlink,Delete", 
            this.rightClick.bind(this));
        event.preventDefault();
    }.bind(this));
};
UmlActorPrototype.edit = function(event) {
    if(event) event.preventDefault();
    editInPlace(this);
};
UmlActorPrototype.rightClick = function(choice, event) {
    if("Link" == choice) {
        shadowRouting({
            source:this,
            inside:this.parentNode,
            acceptNode:"UML-USECASE",
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-usage', {
                    "from":from, "to":to,
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Generalize" == choice) {
        shadowRouting({
            source:this,
            inside:this.parentNode,
            linktype:"arrowed",
            acceptNode:"UML-ACTOR",
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-generalization', {
                    "from":from, "to":to,
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Unlink" == choice) {
        var impacted = this.parentNode.querySelectorAll(
            'uml-usage[from="'+this.id+'"],'+
            'uml-usage[to="'+this.id+'"],'+
            'uml-include[from="'+this.id+'"],'+
            'uml-include[to="'+this.id+'"],'+
            'uml-extend[from="'+this.id+'"],'+
            'uml-extend[to="'+this.id+'"],'+
            'uml-generalization[from="'+this.id+'"],'+
            'uml-generalization[to="'+this.id+'"]');
        [].forEach.call(impacted, function(i) {
            i.parentNode.removeChild(i);
        });
    } else if("Delete" == choice) {
        var diagram = this.parentNode;
        diagram.removeChild(this);
        diagram.wipeout();
    }
};
var UmlActor = document.registerElement('uml-actor',
    {prototype:UmlActorPrototype});

var UmlUsecasePrototype = Object.create(HTMLDivElement.prototype, sizeGetters);
UmlUsecasePrototype.createdCallback = function() {
    draggableInParent(this);
    this.addEventListener("dblclick", this.edit.bind(this));
    this.addEventListener("contextmenu", function(event) {
        menu(event, "Link,Generalize,Include,Extend,Unlink,Delete", 
            this.rightClick.bind(this));
        event.preventDefault();
    }.bind(this));
};
UmlUsecasePrototype.edit = function(event) {
    if(event) event.preventDefault();
    editInPlace(this,{
        callback:function() {
            this.parentNode.update();
        }.bind(this)
    });
};
UmlUsecasePrototype.getPort = function(x1,y1,x2,y2) {
    // nearest port for connecting an arrow near x1,y1
    // say x1,y1 is center of ellipse
    var a = this.width/2;
    var b = this.height/2;
    var x0 = x2-x1;
    var y0 = y2-y1;
    var sq = Math.sqrt((Math.pow(a*y0,2)
            +Math.pow(b*x0,2)) || 1);
    return {
        x:x1+a*b*x0/sq,
        y:y1+a*b*y0/sq,
    };
};
UmlUsecasePrototype.rightClick = function(choice, event) {
    if("Link" == choice) {
        shadowRouting({
            source:this,
            inside:this.parentNode,
            acceptNode:"UML-ACTOR",
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-usage', {
                    "from":to, "to":from,
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Generalize" == choice) {
        shadowRouting({
            source:this,
            inside:this.parentNode,
            linktype:"arrowed",
            acceptNode:"UML-USECASE",
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-generalization', {
                    "from":from, "to":to,
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Include" == choice) {
        shadowRouting({
            source:this,
            inside:this.parentNode,
            linktype:"dashed",
            title:"include",
            acceptNode:"UML-USECASE",
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-include', {
                    "from":from, "to":to,
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Extend" == choice) {
        shadowRouting({
            source:this,
            inside:this.parentNode,
            linktype:"dashed",
            title:"extend",
            acceptNode:"UML-USECASE",
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-extend', {
                    "from":from, "to":to,
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Unlink" == choice) {
        var impacted = this.parentNode.querySelectorAll(
            'uml-usage[from="'+this.id+'"],'+
            'uml-usage[to="'+this.id+'"],'+
            'uml-include[from="'+this.id+'"],'+
            'uml-include[to="'+this.id+'"],'+
            'uml-extend[from="'+this.id+'"],'+
            'uml-extend[to="'+this.id+'"],'+
            'uml-generalization[from="'+this.id+'"],'+
            'uml-generalization[to="'+this.id+'"]');
        [].forEach.call(impacted, function(i) {
            i.parentNode.removeChild(i);
        });
    } else if("Delete" == choice) {
        var diagram = this.parentNode;
        diagram.removeChild(this);
        diagram.wipeout();
    }
};
var UmlUsecase = document.registerElement('uml-usecase',
    {prototype:UmlUsecasePrototype});

function globalTools(self) {
    if(!self.querySelector("div.dangerous")) {
        var d = _("div",{"class":"dangerous",
            "style":"position:absolute;right:0;bottom:0",
            });
        var b;
        if("class" == self.umlDiagramType) {
            b = _("button",{"class":"zipnano",
                "onclick":"this.parentNode.parentNode.zip()"
                });
            b.textContent = "Zip";
            d.appendChild(b);
        }
        b = _("button",{"class":"deleteconfirm"});
        b.textContent = "Delete";
        d.appendChild(b);
        b = _("button",{"class":"confirmdelete",
            "onclick":"this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode)"
            });
        b.textContent = "Confirm";
        d.appendChild(b);
        self.appendChild(d);
    }
}



var UmlUsecaseDiagramPrototype = Object.create(HTMLDivElement.prototype,{
    umlDiagramType:{value:"usecase"},
    pageX:sizeGetters.pageX,
    pageY:sizeGetters.pageY,
});
UmlUsecaseDiagramPrototype.createdCallback = function() {
    this.addEventListener("mousemove", function(event) {
        if(this.dragging) {
            this.style.cursor = "move";
            var d = this.dragging;
            var e = d.element;
            e.style.left = (+(d.x0+(event.pageX-d.px0)))+"px";
            e.style.top =  (+(d.y0+(event.pageY-d.py0)))+"px";
            event.preventDefault();
            var cs = getComputedStyle(this);
            var minwidth = e.offsetLeft+e.width;
            var curwidth = +(cs.width.replace(/px/,""));
            var minheight = e.offsetTop+e.height;
            var curheight = +(cs.height.replace(/px/,""));
            if(Math.max(curwidth,minwidth) == minwidth) {
                this.style.minWidth = minwidth+"px";
            }
            if(Math.max(curheight,minheight) == minheight) {
                this.style.minHeight = minheight+"px";
            }
            if(e.update) e.update();
            if(e.id) {
                var impacted = e.parentNode.querySelectorAll(
                    'uml-usage[from="'+e.id+'"],'+
                    'uml-usage[to="'+e.id+'"],'+
                    'uml-include[from="'+e.id+'"],'+
                    'uml-include[to="'+e.id+'"],'+
                    'uml-extend[from="'+e.id+'"],'+
                    'uml-extend[to="'+e.id+'"],'+
                    'uml-generalization[from="'+e.id+'"],'+
                    'uml-generalization[to="'+e.id+'"]');
                [].forEach.call(impacted, function(i) {
                    if(i.update) i.update();
                });
            }
        }
    }.bind(this));
    this.addEventListener("mouseup", function(event) {
        this.style.cursor = "auto";
        this.dragging = undefined;
    }.bind(this));
    globalTools(this);
};
UmlUsecaseDiagramPrototype.update = function() {
    [].forEach.call(this.querySelectorAll(
            "uml-usage,uml-generalization,uml-include,uml-extend"), function(u) {
        u.update();
    });
};
UmlUsecaseDiagramPrototype.wipeout = function() {
    [].forEach.call(this.querySelectorAll(
            "uml-usage,uml-generalization,uml-include,uml-extend"), function(u) {
        var from = document.querySelector("#"+u.getAttribute("from"));
        var to = document.querySelector("#"+u.getAttribute("to"));
        if((!from) || (!to)) {
            u.parentNode.removeChild(u);
        }
    });
};
UmlUsecaseDiagramPrototype.startDrag = function(event, element) {
    this.dragging = {element:element,
        x0: +((element.style.left || "0").replace(/px/,"")),
        y0: +((element.style.top || "0").replace(/px/,"")),
        px0: event.pageX,
        py0: event.pageY,
        };
};
UmlUsecaseDiagramPrototype.addActor = function(name) {
    name = name || "Anonymous";
    var b = _("uml-actor");
    b.textContent = name;
    return this.appendChild(b);
};
UmlUsecaseDiagramPrototype.addUsecase = function(name) {
    name = name || "Anonymous";
    var b = _("uml-usecase");
    b.textContent = name;
    return this.appendChild(b);
};
var UmlUsecaseDiagram = document.registerElement('uml-usecase-diagram',
    {prototype:UmlUsecaseDiagramPrototype});


var UmlLifelanePrototype = Object.create(HTMLSpanElement.prototype, {
    participant:{get:function() {
        return this.querySelector("uml-participant") || 
            this.insertBefore(_("uml-participant"),this.firstChild);
    }},
    lane:{get:function() {
        return this.querySelector("uml-lane") || 
            this.appendChild(_("uml-lane"));
    }},
    name:{
        get:function() {
            return this.participant.textContent;
        },
        set:function(value) {
            return (this.participant.textContent = value);
        }
    },
    pageX:sizeGetters.pageX,
    pageY:sizeGetters.pageY,
    width:sizeGetters.width,
    height:sizeGetters.height,
});
UmlLifelanePrototype.createdCallback = function() {
    draggableInParent(this);
    this.addEventListener("dblclick", this.edit.bind(this));
    var lane = this.lane;
    var start = lane.querySelector("uml-dots") ||
                lane.appendChild(_("uml-dots"));
    var end = lane.querySelector("uml-dots:last-child");
    if(end == start) { end = lane.appendChild(_("uml-dots")) };
    var life = lane.querySelector("uml-life") ||
               lane.insertBefore(_("uml-life"), end);
};
UmlLifelanePrototype.edit = function(event) {
    if(event) event.preventDefault();
    editInPlace(this.participant,{tag:"span"});
};
UmlLifelanePrototype.getPort = function(x1,y1,x2,y2) {
    return {
        x:x1,
        y:y1,
    };
};
UmlLifelanePrototype.update = function() {
	if(!this.id) return;
	var diagram = this.parentNode;
	var h = 12;
	[].forEach.call(diagram.querySelectorAll("uml-message,uml-return,uml-async"),
		function(msg) {
		if( (this.id == msg.getAttribute("from")) ||
		    (this.id == msg.getAttribute("to")) ) {
			h = Math.max(h, msg.offsetTop); 
		}
    }.bind(this));
	this.querySelector("uml-life").style.height = h+"px";
};
var UmlLifelane = document.registerElement('uml-lifelane',
    {prototype:UmlLifelanePrototype});


var UmlMessagePrototype = Object.create(HTMLDivElement.prototype, {
	lanes:{get:function() {
		return ["from","to"].map(function(attr) {
			return document.querySelector("#"
					+this.getAttribute(attr));
		}.bind(this));
	}},
    diagram:{get:function() {
        var current = this.parentNode;
        while(current) {
            var tag = (current.nodeName || "").toUpperCase();
            if("UML-SEQUENCE-DIAGRAM" == tag) return current;
            current = current.parentNode;
        }
    }},
    pageX:sizeGetters.pageX,
    pageY:sizeGetters.pageY,
    width:sizeGetters.width,
    height:sizeGetters.height,
});
UmlMessagePrototype.createdCallback = function() {
    draggableInParent(this, this.diagram);
    this.addEventListener("dblclick", this.edit.bind(this));
    this.addEventListener("contextmenu", function(event) {
        event.preventDefault();
        menu(event, "Block,Unblock,Delete", 
            this.rightClick.bind(this),{
        });
    }.bind(this), false);
};
UmlMessagePrototype.rightClick = function(choice, event) {
    if("Block" == choice) {
        var p = this.parentNode;
        if(p) {
            var b = _("uml-block");
            this.parentNode.insertBefore(b, this);
            this.parentNode.removeChild(this);
            b.appendChild(this);
            var effectivity = _("uml-effectivity");
            b.insertBefore(effectivity, b.firstChild);
            var guard = _("uml-guard");
            guard.textContent = "...";
            effectivity.appendChild(guard);
            b.update();
            b.diagram.update();
        }
    } else if("Unblock" == choice) {
        var p = this.parentNode;
        if(p.nodeName.toUpperCase() == "UML-BLOCK") {
            var p2 = p.parentNode;
            var children = [].map
                .call(p.children,function(c){return c})
                .filter(function(c){
                    return c.nodeName.toUpperCase() != "UML-EFFECTIVITY";
                })
                ;
            children.forEach(function(c) {
                c.parentNode.removeChild(c);
                if(c.nodeName.toUpperCase() != "UML-GUARD") {
                    p2.insertBefore(c,p);
                }
            });
            p2.removeChild(p);
            p2.diagram.update();
        };
    } else if("Delete" == choice) {
        this.parentNode.removeChild(this);
    }
};
UmlMessagePrototype.edit = function(event) {
    if(event) event.preventDefault();
    editInPlace(this);
	this.diagram.update();
};
UmlMessagePrototype.update = function() {
    var from = this.getAttribute("from") || "0,0";
    var to =   this.getAttribute("to") || "0,0";

    var ports = getPortsFor(from,to,this.diagram);
    // Ref is diagram;
    var x = Math.min(ports.x1, ports.x2);
    var w =  Math.abs(ports.x1 - ports.x2);
    var c = "arrow"+((x==ports.x1)?"right":"left");
    var c2 = this.getAttribute("linkstyle") || "";
    this.className = c+" "+c2;
    this.style.left = (x+6)+"px";
    this.style.width = Math.max(1,(w-6))+"px";
}
var UmlMessage = document.registerElement('uml-message',
    {prototype:UmlMessagePrototype});

var UmlReturnPrototype = Object.create(UmlMessagePrototype, sizeGetters);
var UmlReturn = document.registerElement('uml-return',
    {prototype:UmlReturnPrototype});

var UmlAsyncPrototype = Object.create(UmlMessagePrototype, sizeGetters);
var UmlAsync = document.registerElement('uml-async',
    {prototype:UmlAsyncPrototype});


function messageRouting(options) {
    options = options || {};
    var source = options.source;
    var diagram = source.parentNode;
    var inside = options.inside || source.parentNode;
    var x = options.event.pageX-source.parentNode.pageX;
    var y = options.event.pageY-source.parentNode.pageY;

    var link = _("uml-message", {
        "from":idOrNewId(source),
        "to":x+","+y,
		"linkstyle":options.linkstyle || "messagestyle",
    });
    console.log("Routing" + (
		options.linkstyle || "messagestyle"));

    link.textContent = options.title || "...";

    // FIXME: append at nearest y

    var after = [].find.call(inside.querySelectorAll("uml-message,uml-return,uml-async"), 
        function(msg) {
            return (y == Math.min(y, msg.offsetTop+msg.offsetHeight));
        });
    (after?(after.parentNode):inside).insertBefore(link, after);
    var capture = diagram.insertBefore(_("div",{
            style:"position:absolute;width:100%;height:100%;z-index:255",
        }), diagram.firstChild);
    var destination;
    capture.addEventListener("mousemove", function(event) {
        var targets = elementsFromPoint(event.pageX, event.pageY);
        var life = targets.find(function(n) {
            if(n)
            if(n.nodeName)
            if(n.nodeName.toUpperCase() == "UML-LIFE")
            if(n.parentNode)
            if(n.parentNode.parentNode != source)
            return true;
        });
        if(life) {
            destination = life.parentNode.parentNode;
            link.setAttribute("to",idOrNewId(destination));
            link.update();
        } else {
            destination = null;
            var x = event.pageX-source.parentNode.pageX;
            link.setAttribute("to",x+","+y);
            link.update();
        }
    });
	var done = options.done || function() {};
    capture.addEventListener("mousedown", function(event) {
        diagram.removeChild(capture);
        var from = link.getAttribute("from");
        var to = link.getAttribute("to");
        if(link.parentNode) link.parentNode.removeChild(link);
        if(destination) {
			var msg = done(from,to,after);
			msg.lanes.forEach(function(lane) {
				lane.update();
			});
            if(msg.edit) msg.edit();
		}
    });
    link.update();
}

var UmlBlockPrototype = Object.create(HTMLDivElement.prototype,{
    diagram:{get:function(){
        var current = this.parentNode;
        while(current) {
            if(current.nodeName.toUpperCase() == "UML-SEQUENCE-DIAGRAM") {
                return current;
            }
            current = current.parentNode;
        }
    }},
});
UmlBlockPrototype.update = function() {
    var effectivity = this.querySelector("uml-effectivity");
    var x0 = this.offsetLeft; // XXX: merely zero for now
    var l = [].map.call(this.querySelectorAll("uml-message,uml-return,uml-async"),
        function(x){return x});
    var x1 = Math.min.apply(null, l.map(function(m){return m.offsetLeft}));
    var x2 = Math.max.apply(null, l.map(function(m){
                return m.offsetLeft+m.offsetWidth}));
    var y1 = Math.min.apply(null, l.map(function(m){return m.offsetTop}));
    var y2 = Math.max.apply(null, l.map(function(m){
                return m.offsetTop+m.offsetHeight}));
    effectivity.style.marginLeft = (x1-x0)+"px";
    effectivity.style.width = (-1+(x2-x1))+"px";
    effectivity.style.height = (5+(y2-y1))+"px";
};
var UmlBlock = document.registerElement('uml-block',
    {prototype:UmlBlockPrototype});

["uml-participant","uml-lane","uml-dots","uml-effectivity"
].forEach(function(tag) {
    document.registerElement(tag,{prototype:Object.create(
            HTMLDivElement.prototype)});
});
var UmlLifePrototype = Object.create(HTMLDivElement.prototype);
UmlLifePrototype.createdCallback = function() {
    this.addEventListener("contextmenu", function(event) {
        menu(event, "Message,Async,Return,Reflexive,Delete", 
            this.rightClick.bind(this),{
            originalEvent:true,
        });
        event.preventDefault();
    }.bind(this), false);
};
function ancestorIn(descendant, container) {
    var current = descendant;
    while(current != null) {
        if(current.parentNode == container) {
            return current;
        }
        current = current.parentNode;
    }
}
UmlLifePrototype.rightClick = function(choice, event) {
	var lifelane = this.parentNode.parentNode;
	var diagram = lifelane.parentNode;
    function getInside() {
        return elementsFromPoint(event.pageX, event.pageY)
                .find(function(candidate) {
                    if(candidate) {
                        var tag = candidate.nodeName.toUpperCase();
                        return ((tag == "UML-BLOCK")||(tag == "UML-SEQUENCE-DIAGRAM"));
                    }
                });
    }
    if("Message" == choice) {
        var inside = getInside();
        messageRouting({
            source:lifelane,
            inside:inside,
            event:event,
            done:function(from,to,after) {
                var msg = _('uml-message', { "from":from, "to":to, });
                inside.insertBefore(msg,ancestorIn(after,inside));
				msg.textContent = "...()"
				msg.update();
				return msg;
            }.bind(this),
        });
    } else if("Return" == choice) {
        var inside = getInside();
        messageRouting({
            source:lifelane,
            inside:inside,
            event:event,
			linkstyle:"returnstyle",
            done:function(from,to,after) {
                var msg = _('uml-return', { "from":from, "to":to, });
                inside.insertBefore(msg,ancestorIn(after,inside));
				msg.textContent = "..."
				msg.update();
				return msg;
            }.bind(this),
        });
    } else if("Async" == choice) {
        var inside = getInside();
        messageRouting({
            source:lifelane,
            inside:inside,
            event:event,
			linkstyle:"asyncstyle",
            done:function(from,to,after) {
                var msg = _('uml-async', { "from":from, "to":to, });
                inside.insertBefore(msg,ancestorIn(after,inside));
				msg.textContent = "..."
				msg.update();
				return msg;
            }.bind(this),
        });
    } else if("Reflexive" == choice) {
        var inside = getInside();
        var y = event.pageY-lifelane.parentNode.pageY;
        var after = [].find.call(inside.querySelectorAll(
                "uml-message,uml-return,uml-async"), function(msg) {
            return (y == Math.min(y, msg.offsetTop+msg.offsetHeight));
        });
        console.log("here", lifelane);
        var l2 = lifelane.parentNode.insertBefore(
                _("uml-lifelane"), lifelane.nextSibling);
        var id = idOrNewId(lifelane);
        var id2 = idOrNewId(l2);
        var msg = _('uml-message', { "from":id, "to":id2, });
        (l2.querySelector("uml-dots") || l2).style.marginTop = (y || 0)+"px";
        (l2.querySelector("uml-life") || l2).style.background = "white";
        inside.insertBefore(msg,ancestorIn(after,inside));
        msg.textContent = "..."
        msg.update();
        lifelane.style.marginRight = "-5px";
    } else if("Delete" == choice) {
        var target = this.parentNode.parentNode;
        var diagram = target.parentNode;
        diagram.removeChild(target);
        diagram.wipeout();
    }
};
var UmlLife = document.registerElement('uml-life',
    {prototype:UmlLifePrototype});

var UmlGuardPrototype = Object.create(HTMLDivElement.prototype);
UmlGuardPrototype.createdCallback = function() {
    this.addEventListener("dblclick", this.edit.bind(this));
};
UmlGuardPrototype.edit = function(event) {
    if(event) event.preventDefault();
    editInPlace(this);
};
var UmlGuard = document.registerElement('uml-guard',
    {prototype:UmlGuardPrototype});


var UmlSequenceDiagramPrototype = Object.create(HTMLDivElement.prototype,{
    umlDiagramType:{value:"sequence"},
    pageX:sizeGetters.pageX,
    pageY:sizeGetters.pageY,
});
UmlSequenceDiagramPrototype.createdCallback = function() {
    this.addEventListener("mousemove", function(event) {
        if(this.dragging) {
            this.style.cursor = "move";
            if(this.dragging.dragtype == "message") {
                var e = this.dragging.element;
                var y = event.pageY-this.pageY;
                // FIXME: add block top border as "before" candidate
                var after = [].find.call(this.querySelectorAll(
                        "uml-message,uml-return,uml-async"), 
                    function(msg) {
                        return (y == Math.min(y, msg.offsetTop+msg.offsetHeight));
                    });
                if(after != e) {
                    if(e.parentNode) e.parentNode.removeChild(e);
                    (after?(after.parentNode):this).insertBefore(e,after);
                    e.lanes.forEach(function(lane) {
                        lane.update();
                    });
                    [].forEach.call(
                            e.diagram.querySelectorAll("uml-block"), 
                            function(b) { b.update(); });
                }
            } else {
                var d = this.dragging;
                var e = d.element;
                var o = d.originElement;
                e.style.marginRight = (d.mr0+event.pageX-d.px0)+"px";
                this.update();
            }
        }
    }.bind(this));
    this.addEventListener("mouseup", function(event) {
        this.style.cursor = "auto";
        this.dragging = undefined;
    }.bind(this));
    globalTools(this);
};
UmlSequenceDiagramPrototype.wipeout = function() {
    [].forEach.call(this.querySelectorAll(
            "uml-message,uml-return,uml-async"), function(msg) {
        var from = document.querySelector("#"+msg.getAttribute("from"));
        var to = document.querySelector("#"+msg.getAttribute("to"));
        if((!from) || (!to)) {
            msg.parentNode.removeChild(msg);
        }
    });
};
UmlSequenceDiagramPrototype.update = function() {
    [].forEach.call(this.querySelectorAll(
            "uml-message,uml-return,uml-async"), function(msg) {
        msg.update();
    });
    [].forEach.call(this.querySelectorAll("uml-block"), function(b) {
        b.update();
    });
    [].forEach.call(this.querySelectorAll("uml-lifelane"), function(b) {
        b.update();
    });
};
function previousBrotherOrSelf(e) {
    if(e) {
        var p = e.parentNode;
        if(p) {
            var relatives = [].map.call(
                p.querySelectorAll(e.tagName),
                function(n){return n});
            var i = relatives.indexOf(e);
            return relatives[Math.max(0,i-1)];
        }
    }
}
function followingBrother(e) {
    if(e) {
        var p = e.parentNode;
        if(p) {
            var relatives = [].map.call(
                p.querySelectorAll(e.tagName),
                function(n){return n});
            var i = relatives.indexOf(e);
            if((i+1) in relatives) {
                return relatives[i+1];
            }
        }
    }
}
UmlSequenceDiagramPrototype.startDrag = function(event, element) {
    if("UML-LIFELANE" == (element.nodeName.toUpperCase())) {
        var margined = previousBrotherOrSelf(element);
        this.dragging = {element:margined,
            dragtype:"lane",
            originElement:element,
            mr0: +(margined.style.marginRight.replace(/px/,"")),
            px0: event.pageX,
            py0: event.pageY,
        };
    } else {
        this.dragging = {element:element,
            dragtype:"message",
            originalAfter:followingBrother(element),
        };
    }
};
UmlSequenceDiagramPrototype.addLifelane = function(name) {
    name = name || "Anonymous";
    var b = _("uml-lifelane",{style:"margin-right:16px"});
    b.name = name;
    return this.insertBefore(b,this.querySelector("uml-message,uml-return,uml-block,uml-async"));
};
var UmlSequenceDiagram = document.registerElement('uml-sequence-diagram',
    {prototype:UmlSequenceDiagramPrototype});


var UmlMemberPrototype = Object.create(HTMLDivElement.prototype);
UmlMemberPrototype.createdCallback = function() {
    this.addEventListener("dblclick", this.edit.bind(this));
};
UmlMemberPrototype.edit = function(event) {
    if(event) event.preventDefault();
    editInPlace(this,{
	callback:function() {
	    if("" == this.textContent) {
	        this.parentNode.removeChild(this);
	    } else {
            this.parentNode.parentNode.update();
        }
	}.bind(this),
    });
};
var UmlName = document.registerElement('uml-name',
    {prototype:UmlMemberPrototype});
var UmlAttributePrototype = Object.create(UmlMemberPrototype);
var UmlAttribute = document.registerElement('uml-attribute',
    {prototype:UmlAttributePrototype});
var UmlMethodPrototype = Object.create(UmlMemberPrototype);
var UmlMethod = document.registerElement('uml-method',
    {prototype:UmlMethodPrototype});

function selectChildrenAt(ancestor, selector, event) {
    var result = [];
    var ex = event.pageX;
    var ey = event.pageY;
    if(ancestor) {
        var nodes = ancestor.querySelectorAll(selector);
        if(nodes) {
            [].forEach.call(nodes, function(node){
                var nx = node.pageX;
                var ny = node.pageY;
                if(Math.min(nx,ex) == nx)
                if(Math.min(ny,ey) == ny)
                if(Math.min(nx+node.offsetWidth,ex) == ex)
                if(Math.min(ny+node.offsetHeight,ey) == ey)
                result.push(node);
            });
        }
    }
    return result;
}

function shadowClassRouting(options) {
    options = options || {};
    var source = options.source;
    if(source) {
        var link = _("uml-link", {
            "from":idOrNewId(source),
            "to": (source.offsetLeft+source.width/2)+","
                 +(source.offsetTop+source.height/2),
            style:"width:100%;height:100%;",
            linktype:(options.linktype || "line"),
            title:options.title || "",
        });
        var inside = options.inside || document.body;
        inside.insertBefore(link, inside.firstChild);
        var diagram = inside;
        var capture = diagram.insertBefore(_("div",{
                style:"position:absolute;width:100%;height:100%;z-index:255",
            }), diagram.firstChild);
        var dx = source.pageX-source.offsetLeft;
        var dy = source.pageY-source.offsetTop;
        var destination = null;
        var accepted = options.acceptNode.toUpperCase();
        capture.addEventListener("mousemove", function(event) {
            var targets = selectChildrenAt(inside,"uml-class",event);
            destination = targets.find(function(n) {
                return n.nodeName.toUpperCase() == accepted;
            });
            link.setAttribute("to",destination?
                    idOrNewId(destination):
                    ((event.pageX-dx)+","+(event.pageY-dy)));
            link.update();
        });
        var done = options.done || function() {};
        capture.addEventListener("mousedown", function(event) {
            var from = link.getAttribute("from");
            var to = link.getAttribute("to");
            inside.removeChild(link);
            inside.removeChild(capture);
            if(destination) options.done(from,to);
        });
    }
}


var UmlClassPrototype = Object.create(HTMLDivElement.prototype,{
    nameElement:{get:function(){
        return this.querySelector("uml-name") ||
               this.insertBefore(_("uml-name"),
               this.firstChild);
    }},
    name:{
        get:function(){return this.nameElement.textContent},
        set:function(n){this.nameElement.textContent = (n || "")},
    },
    pageX:sizeGetters.pageX,
    pageY:sizeGetters.pageY,
    width:sizeGetters.width,
    height:sizeGetters.height,
});
function lessThan(a,b) {
    return (Math.min(a,b)==a);
}
UmlClassPrototype.getPort = function(x1,y1,x2,y2) {
    var d = Math.sqrt(Math.max(1,
        Math.pow(x1-x2,2)+
        Math.pow(y1-y2,2)));
    var dx = (x2-x1)/d;
    var dy = (y2-y1)/d;
    var dxmin = lessThan(x1,x2)?(this.offsetWidth/2):(-this.offsetWidth/2);
    var dymin = lessThan(y1,y2)?(this.offsetHeight/2):(-this.offsetHeight/2);

    var x3,y3;
    if(lessThan(Math.abs(dxmin*dy),Math.abs(dymin*dx))) {
        // dx wins
        x3 = x1+dxmin;
        y3 = y1+dy*(dxmin/dx);
    } else {
        // dy wins
        y3 = y1+dymin;
        x3 = x1+dx*(dymin/dy);
    }
    return {x:x3,y:y3};
};
UmlClassPrototype.createdCallback = function() {
    draggableInParent(this);
    this.addEventListener("contextmenu", function(event) {
        menu(event, "Attribute,Method,Implement,Extend,"
            +"Compose,Aggregate,Usage,Delete", 
            this.rightClick.bind(this),{
        });
        event.preventDefault();
    }.bind(this), false);
};
UmlClassPrototype.edit = function(event) {
    if(event) event.preventDefault();
    this.nameElement.edit();
};
UmlClassPrototype.rightClick = function(choice, event) {
    if("Method" == choice) {
        var m = _("uml-method");
        m.textContent = "foo()";
        this.appendChild(m).edit();
    } else if("Attribute" == choice) {
        var m = _("uml-attribute");
        m.textContent = "name:String";
        this.insertBefore(m, this.querySelector("uml-method")).edit();
    } else if("Implement" == choice) {
        shadowClassRouting({
            source:this,
            inside:this.parentNode,
            linktype:"dashedarrow",
            acceptNode:"UML-CLASS",
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-generalization', {
                    "from":from, "to":to,
                    "type":"implement",
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Extend" == choice) {
        shadowClassRouting({
            source:this,
            inside:this.parentNode,
            linktype:"arrowed",
            acceptNode:"UML-CLASS",
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-generalization', {
                    "from":from, "to":to,
                    "type":"extend",
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Compose" == choice) {
        shadowClassRouting({
            source:this,
            inside:this.parentNode,
            linktype:"diamondfull",
            acceptNode:"UML-CLASS",
            done:function(from,to) {
                // XXX: classlinks
                this.parentNode.insertBefore(_('uml-containment', {
                    "from":from, "to":to,
                    "type":"composition",
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Aggregate" == choice) {
        shadowClassRouting({
            source:this,
            inside:this.parentNode,
            linktype:"diamond",
            acceptNode:"UML-CLASS",
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-containment', {
                    "from":from, "to":to,
                    "type":"aggregation",
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Usage" == choice) {
        shadowClassRouting({
            source:this,
            inside:this.parentNode,
            linktype:"dashedemptyarrow",
            acceptNode:"UML-CLASS",
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-containment', {
                    "from":from, "to":to,
                    "type":"usage",
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Delete" == choice) {
        var diagram = this.parentNode;
        diagram.removeChild(this);
        diagram.wipeout();
    }
};
var UmlClass = document.registerElement('uml-class',
    {prototype:UmlClassPrototype});


var UmlContainmentPrototype = Object.create(UmlLinkPrototype);
UmlContainmentPrototype.createdCallback = function() {
    UmlLinkPrototype.createdCallback.bind(this)();
    this.addEventListener("dblclick", this.edit.bind(this));
};
function editInSvgPlace(self,edited,options) {
    options = options || {};
    var text = edited.parentNode; 
    var editor = _(options.tag || "div",{contenteditable:true,
        style:("position:absolute;font-family:"
            +"Tahoma,Arial,Helvetica,sans-serif;font-size:10px;"),
    });
    editor.textContent = ""+(self.textContent || "...");
    var bb = edited.parentNode.getBBox();
    edited.textContent = "";
    editor.onblur = editor.onchange = function(event) {
        var txt = ""+editor.textContent;
        editor.parentNode.removeChild(editor);
        edited.textContent = txt;
        if(options.callback) options.callback(txt);
    };
    var r = document.createRange();
    self.parentNode.appendChild(editor);
    editor.style.left = (-bb.width/2+self.offsetWidth/2+self.offsetLeft)+"px";
    editor.style.top = (-10+(self.offsetHeight/2+self.offsetTop))+"px";
    r.selectNodeContents(editor);
    var sel = window.getSelection();
    editor.focus();
    sel.removeAllRanges();
    sel.addRange(r);
}
UmlContainmentPrototype.edit = function(event) {
    var edited = this.querySelector("textPath");
    if(edited) {
        if(event) event.preventDefault();
        editInSvgPlace(this, this.querySelector("textPath"), {
            callback:function(val) {
                this.setAttribute("title",val);
            }.bind(this),
        });
    }
};
UmlContainmentPrototype.rightClick = function(choice, event) {
    if("Delete" == choice) {
        var diagram = this.parentNode;
        diagram.removeChild(this);
        diagram.wipeout();
    }
};
UmlContainmentPrototype.update = function() {
    if(this.getAttribute("type") == "composition") {
        this.updateDiamondFull();
    } else if(this.getAttribute("type") == "usage") {
        this.updateDashedEmptyArrow();
    } else {
        this.updateDiamond();
    }
    this.pack();
};
var UmlContainment = document.registerElement('uml-containment',
    {prototype:UmlContainmentPrototype});

var UmlClassDiagramPrototype = Object.create(HTMLDivElement.prototype,{
    umlDiagramType:{value:"class"},
    pageX:sizeGetters.pageX,
    pageY:sizeGetters.pageY,
});
UmlClassDiagramPrototype.createdCallback = function() {
    this.addEventListener("mousemove", function(event) {
        if(this.dragging) {
            this.style.cursor = "move";
            var d = this.dragging;
            var e = d.element;
            var x = (+(d.x0+(event.pageX-d.px0)));
            var y = (+(d.y0+(event.pageY-d.py0)));
            e.style.left = x+"px";
            e.style.top =  y+"px";
            event.preventDefault();
            var cs = getComputedStyle(this);
            var minwidth = e.offsetWidth+x;
            var curwidth = +(cs.width.replace(/px/,""));
            var minheight = e.offsetHeight+y;
            var curheight = +(cs.height.replace(/px/,""));
            if(Math.max(curwidth,minwidth) == minwidth) {
                this.style.minWidth = minwidth+"px";
            }
            if(Math.max(curheight,minheight) == minheight) {
                this.style.minHeight = minheight+"px";
            }
            if(e.update) e.update();
            if(e.id) {
                // XXX: classlinks
                var impacted = e.parentNode.querySelectorAll(
                    'uml-containment[from="'+e.id+'"],'+
                    'uml-containment[to="'+e.id+'"],'+
                    'uml-generalization[from="'+e.id+'"],'+
                    'uml-generalization[to="'+e.id+'"]'
                    );
                [].forEach.call(impacted, function(i) {
                    if(i.update) i.update();
                });
            }
        }
    }.bind(this));
    this.addEventListener("mouseup", function(event) {
        this.style.cursor = "auto";
        this.dragging = undefined;
    }.bind(this));
    globalTools(this);
};
UmlClassDiagramPrototype.startDrag = function(event, element) {
    this.dragging = {element:element,
        x0: +((element.style.left || "0").replace(/px/,"")),
        y0: +((element.style.top || "0").replace(/px/,"")),
        px0: event.pageX,
        py0: event.pageY,
        };
};
UmlClassDiagramPrototype.addClass = function(name) {
    name = name || "Class";
    var b = _("uml-class");
    b.name = name;
    return this.appendChild(b);
};
UmlClassDiagramPrototype.wipeout = function() {
    [].forEach.call(this.querySelectorAll(
            "uml-containment,uml-generalization"), function(u) {
        var from = document.querySelector("#"+u.getAttribute("from"));
        var to = document.querySelector("#"+u.getAttribute("to"));
        if((!from) || (!to)) {
            u.parentNode.removeChild(u);
        }
    });
};
UmlClassDiagramPrototype.update = function() {
    [].forEach.call(this.querySelectorAll(
            "uml-containment,uml-generalization"), function(u) {
        u.update();
    });
};
UmlClassDiagramPrototype.zip = function() {
    var href = document.querySelector('a.file[title="Nano.zip"]')
            .getAttribute("href");
    var b64 = href.slice(href.indexOf(";base64,")+
            ";base64,".length);
    var nanozip = new JSZip().load(atob(b64));
    nanozip.remove("Nano/resources/users");
    nanozip.remove("Nano/resources/images");
    [].forEach.call(this.querySelectorAll(
            "uml-class"), function(klass) {
        var name = klass.querySelector("uml-name").textContent.trim();
        var collection = (name=="User")?{"type":"UserCollection"}:{"type":"Collection"};
        collection.properties = {};
        [].forEach.call(klass.querySelectorAll(
                "uml-attribute"), function(attr,i) {
            var parts = attr.textContent.replace(/(^[-=+])|(\*$)/g,"")
                .split(/:/).slice(0,2);
            collection.properties[parts[0]] = {
                "name": parts[0],
                "type": parts[1].toLowerCase(),
                "typeLabel": parts[1],
                "required": false,
                "id": parts[0],
                "order": i
            };
        });
        nanozip.file("Nano/resources/"+name.toLowerCase()+"s/config.json",
            JSON.stringify(collection, null, 4));
    });
    nanozip.file("Nano/public/model.html",
        Replicant.html());
    var a = _("a", {
        "href": "data:application/octet-stream;base64,"+nanozip.generate(),
        "download": "Nano.zip",
    });
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
};
var UmlClassDiagram = document.registerElement('uml-class-diagram',
    {prototype:UmlClassDiagramPrototype});


var UmlActivityDiagramPrototype = Object.create(HTMLDivElement.prototype,{
    umlDiagramType:{value:"activity"},
    pageX:sizeGetters.pageX,
    pageY:sizeGetters.pageY,
});
UmlActivityDiagramPrototype.createdCallback = function() {
    this.addEventListener("mousemove", function(event) {
        if(this.dragging) {
            var d = this.dragging;
            var e = d.element;
            var x = (+(d.x0+(event.pageX-d.px0)));
            var y = (+(d.y0+(event.pageY-d.py0)));
            e.style.left = x+"px";
            e.style.top =  y+"px";

            event.preventDefault();
            var cs = getComputedStyle(this);
            var minwidth = e.offsetWidth+x;
            var curwidth = +(cs.width.replace(/px/,""));
            var minheight = e.offsetHeight+y;
            var curheight = +(cs.height.replace(/px/,""));
            if(Math.max(curwidth,minwidth) == minwidth) {
                this.style.minWidth = minwidth+"px";
            }
            if(Math.max(curheight,minheight) == minheight) {
                this.style.minHeight = minheight+"px";
            }

            if(e.update) e.update();
            if(e.id) {
                var impacted = e.parentNode.querySelectorAll(
                    'uml-then[from="'+e.id+'"],'+
                    'uml-then[to="'+e.id+'"]'
                    );
                [].forEach.call(impacted, function(i) {
                    if(i.update) i.update();
                });
            }
        }
    }.bind(this));
    this.addEventListener("mouseup", function(event) {
        this.dragging = undefined;
    }.bind(this));
    globalTools(this);
};
UmlActivityDiagramPrototype.startDrag = function(event, element) {
    this.dragging = {element:element,
        x0: +((element.style.left || "0").replace(/px/,"")),
        y0: +((element.style.top || "0").replace(/px/,"")),
        px0: event.pageX,
        py0: event.pageY,
        };
};
UmlActivityDiagramPrototype.addState = function(event, element) {
    return this.appendChild(_("uml-state",{"type":"start","name":"Start"}));
};
UmlActivityDiagramPrototype.addActivity = function(event, element) {
    var result = this.appendChild(_("uml-activity",{"type":"activity"}));
    result.textContent = "Activity";
    return result;
};
UmlActivityDiagramPrototype.addCondition = function(event, element) {
    return this.appendChild(_("uml-activity",{"type":"condition"}));
};
UmlActivityDiagramPrototype.wipeout = function() {
    [].forEach.call(this.querySelectorAll(
            "uml-then"), function(u) {
        var from = document.querySelector("#"+u.getAttribute("from"));
        var to = document.querySelector("#"+u.getAttribute("to"));
        if((!from) || (!to)) {
            u.parentNode.removeChild(u);
        }
    });
};
var UmlActivityDiagram = document.registerElement('uml-activity-diagram',
    {prototype:UmlActivityDiagramPrototype});

var UmlActivityElementPrototype = Object.create(HTMLDivElement.prototype, sizeGetters);
UmlActivityElementPrototype.createdCallback = function() {
    draggableInParent(this);
    this.addEventListener("dblclick", this.edit.bind(this));
    this.addEventListener("contextmenu", function(event) {
        menu(event, this.menus,
            this.rightClick.bind(this));
        event.preventDefault();
    }.bind(this));
};
UmlActivityElementPrototype.menus = "Link,Delete";
UmlActivityElementPrototype.edit = function(event) {
    if(event) event.preventDefault();
    editInPlace(this);
};
UmlActivityElementPrototype.rightClick = function(choice, event) {
    if(("Start" == choice) || ("Stop" == choice)) {
        this.setAttribute("type", choice.toLowerCase());
    } else if("Link" == choice) {
        shadowRouting({
            source:this,
            inside:this.parentNode,
            linktype:"emptyarrow",
            accept:function(target) {
                if(target)
                if(target != this)
                if( ("UML-ACTIVITY" == target.nodeName.toUpperCase())
                 || ("UML-STATE" == target.nodeName.toUpperCase()) )
                return true;
            }.bind(this),
            done:function(from,to) {
                this.parentNode.insertBefore(_('uml-then', {
                    "from":from, "to":to,
                }), this.parentNode.firstChild).update();
            }.bind(this),
        });
    } else if("Delete" == choice) {
        var diagram = this.parentNode;
        diagram.removeChild(this);
        diagram.wipeout();
    }
};

var UmlStatePrototype = Object.create(UmlActivityElementPrototype, sizeGetters);
UmlStatePrototype.menus = "Link,Start,Stop,Delete";
var UmlState = document.registerElement('uml-state', {prototype:UmlStatePrototype});
var UmlActivityPrototype = Object.create(UmlActivityElementPrototype, sizeGetters);
UmlActivityPrototype.getPort = function(x1,y1,x2,y2) {
    var d = Math.sqrt(Math.max(1,
        Math.pow(x1-x2,2)+
        Math.pow(y1-y2,2)));
    var dx = (x2-x1)/d;
    var dy = (y2-y1)/d;
    var dxmin = lessThan(x1,x2)?(this.offsetWidth/2):(-this.offsetWidth/2);
    var dymin = lessThan(y1,y2)?(this.offsetHeight/2):(-this.offsetHeight/2);

    var x3,y3;
    if(lessThan(Math.abs(dxmin*dy),Math.abs(dymin*dx))) {
        // dx wins
        x3 = x1+dxmin;
        y3 = y1+dy*(dxmin/dx);
    } else {
        // dy wins
        y3 = y1+dymin;
        x3 = x1+dx*(dymin/dy);
    }
    return {x:x3,y:y3};
};

var UmlActivity = document.registerElement('uml-activity', {prototype:UmlActivityPrototype});


var UmlThenPrototype = Object.create(UmlLinkPrototype,{
    //defaultTitle:{value:"1."},
});
UmlThenPrototype.createdCallback = function() {
    this.addEventListener("dblclick", this.edit.bind(this));
    this.addEventListener("contextmenu", function(event) {
        menu(event, "Delete",
            this.rightClick.bind(this));
        event.preventDefault();
    }.bind(this));
};
UmlThenPrototype.edit = function(event) {
    var edited = this.querySelector("textPath");
    if(edited) {
        if(event) event.preventDefault();
        editInSvgPlace(this, this.querySelector("textPath"), {
            callback:function(val) {
                this.setAttribute("title",val);
            }.bind(this),
        });
    }
};
UmlThenPrototype.rightClick = function(choice, event) {
    if("Delete" == choice) {
        var diagram = this.parentNode;
        diagram.removeChild(this);
        diagram.wipeout();
    }
};
UmlThenPrototype.update = function() {
    this.updateEmptyArrow();
    this.pack();
};
var UmlThen = document.registerElement('uml-then',
    {prototype:UmlThenPrototype});




var UmlPalettePrototype = Object.create(HTMLDivElement.prototype);
UmlPalettePrototype.createdCallback = function() {
    this.focusedDiagram = null;
    var selectOrCreate = function(selector,onclick,style) {
        // ex: "button.tool.global.uml-usecase-diagram"
        var result = this.querySelector(selector);
        var parts = selector.split(/\.+/);
        var tag = parts[0];
        var klass = parts.slice(1).join(" ");
        if(!result) {
            result = _(tag, {
                "onclick":onclick,
                "class":klass,
            });
            this.appendChild(result);
        }
        if(style) {
            result.style = style;
        }
        return result;
    }.bind(this);

    selectOrCreate("button.tool.global.uml-usecase-diagram",
                   "this.parentNode.newDiagram('usecase')");
    selectOrCreate("button.tool.global.uml-sequence-diagram",
                   "this.parentNode.newDiagram('sequence')");
    selectOrCreate("button.tool.global.uml-class-diagram",
                   "this.parentNode.newDiagram('class')");
    selectOrCreate("button.tool.global.uml-activity-diagram",
                   "this.parentNode.newDiagram('activity')");

    selectOrCreate("button.tool.usecase.uml-actor",
                   "this.parentNode.newUmlActor()",
                   "display:none");
    selectOrCreate("button.tool.usecase.uml-usecase",
                   "this.parentNode.newUmlUsecase()",
                   "display:none");
    selectOrCreate("button.tool.sequence.uml-lifelane",
                   "this.parentNode.newUmlLifelane()",
                   "display:none");
    selectOrCreate("button.tool.class.uml-class",
                   "this.parentNode.newUmlClass()",
                   "display:none");
    selectOrCreate("button.tool.activity.uml-state",
                   "this.parentNode.newUmlState()",
                   "display:none");
    selectOrCreate("button.tool.activity.uml-activity",
                   "this.parentNode.newUmlActivity()",
                   "display:none");
    selectOrCreate("button.tool.activity.uml-condition",
                   "this.parentNode.newUmlCondition()",
                   "display:none");
};
UmlPalettePrototype.newUmlActor = function(diagram) {
    diagram = diagram || this.focusedDiagram;
    if(diagram) {
        diagram.addActor().edit();
    }
};
UmlPalettePrototype.newUmlUsecase = function(diagram) {
    diagram = diagram || this.focusedDiagram;
    if(diagram) {
        diagram.addUsecase().edit();
    }
};
UmlPalettePrototype.newUmlLifelane = function(diagram) {
    diagram = diagram || this.focusedDiagram;
    if(diagram) {
        diagram.addLifelane().edit();
    }
};
UmlPalettePrototype.newUmlClass = function(diagram) {
    diagram = diagram || this.focusedDiagram;
    if(diagram) {
        diagram.addClass().edit();
    }
};
UmlPalettePrototype.newUmlState = function(diagram) {
    diagram = diagram || this.focusedDiagram;
    if(diagram) {
        diagram.addState().edit();
    }
};
UmlPalettePrototype.newUmlCondition = function(diagram) {
    diagram = diagram || this.focusedDiagram;
    if(diagram) {
        diagram.addCondition().edit();
    }
};
UmlPalettePrototype.newUmlActivity = function(diagram) {
    diagram = diagram || this.focusedDiagram;
    if(diagram) {
        diagram.addActivity().edit();
    }
};
UmlPalettePrototype.newDiagram = function(type, container) {
    container = container || document.body;
    if(type in {usecase:1,sequence:1,"class":1,activity:1}) {
        var d = _("uml-"+type+"-diagram");
        d.setAttribute("onclick","if(document.querySelector('uml-palette'))document.querySelector('uml-palette').focusDiagram(this)");
        container.appendChild(d);
        this.focusDiagram(d);
    }
};
UmlPalettePrototype.displayButtons = function(selector,style) {
    [].forEach.call(
            this.querySelectorAll(selector),
            function(b) {
        b.style.display = style;
    });
};
UmlPalettePrototype.focusDiagram = function(d) {
    this.focusedDiagram = d;
    if(d) {
        this.style.display = "block";
        this.displayButtons("button.global","none");
        this.displayButtons("button.usecase,button.sequence,button.class,button.activity","none");
        this.displayButtons("button."+d.umlDiagramType, "block");
    } else {
        this.displayButtons("button.global","block");
        this.displayButtons("button.usecase,button.sequence,button.class,button.activity","none");
    }
};
var UmlPalette = document.registerElement('uml-palette',
    {prototype:UmlPalettePrototype});

})();
        </script>
        <!-- }}} UML -->
        <style type="text/css">/* {{{ */
        uml-usecase-diagram ,
        uml-sequence-diagram ,
        uml-activity-diagram ,
        uml-class-diagram {
            display:block;
            min-height:128px;
            border: 1px solid gray;
            box-shadow: 2px 2px 3px silver;
            margin: 1px 200px 4px 1px;
            position:relative;
        }
        uml-sequence-diagram {
            padding-bottom: 24px;
        }
        uml-actor, uml-usecase {
            display:block;
            position:absolute;
            text-align: center;
        }
        uml-actor, uml-usecase, uml-lifelane,uml-class,uml-activity,uml-state {
            font-family: Verdana,arial,sans-serif;
            font-size: 8pt;
        }
        uml-actor::before {
            content: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIAogICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICAgd2lkdGg9IjI0cHgiIGhlaWdodD0iNDJweCIKCSB2aWV3Qm94PSIwIDAgMTcgMzAiPgo8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4IDYpIj4KPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjUiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0id2hpdGUiIC8+CjxsaW5lIHgxPSIwIiB5MT0iNSIgeDI9IjAiIHkyPSIxNSIgc3Ryb2tlPSJibGFjayIgLz4KPGxpbmUgeDE9Ii04IiB5MT0iOCIgeDI9IjgiIHkyPSI4IiBzdHJva2U9ImJsYWNrIiAvPgo8cGF0aCBkPSJNIC03IDIyIEwgMCAxNSBMIDcgMjIiIHN0cm9rZT0iYmxhY2siIGZpbGw9Im5vbmUiIC8+CjwvZz4KPC9zdmc+Cg==);
            display:block;
        }
        uml-usecase {
            border-radius: 50%;
            background: yellow;
            padding: 5pt;
            border: 1px solid black;
        }
        /* XXX: classlinks */
        uml-link,uml-usage,uml-generalization,uml-include,uml-extend,uml-composition,uml-generalization,uml-containment,uml-then {
            position:absolute;
            display:block;
        }
        uml-lifelane {
            display: inline-block;
            text-align: center;
            vertical-align: top;
        }
        uml-participant {
            display: block;
        }
        uml-lane {
            width: 5px;
            display: inline-block;
            position: absolute;
        }
        uml-dots {
            background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIAogICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICAgd2lkdGg9IjFweCIgaGVpZ2h0PSI2NHB4IgoJIHZpZXdCb3g9IjAgMCAxIDY0Ij4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC41IDAuNSkiPgo8bGluZSB4MT0iMCIgeTE9IjAiIHgyPSIwIiB5Mj0iNjMiIHN0cm9rZT0iYmxhY2siIAogICAgc3Ryb2tlLWRhc2hhcnJheT0iNCw0IiAvPgo8L2c+Cjwvc3ZnPgo=);
            width: 5px;
            min-height: 12px;
            background-position: 3px 0px;
            background-repeat: repeat-y;
            display: block;
        }
        uml-life {
            width: 5px;
            min-height: 12px;
            border: 1px solid black;
            display: block;
        }
        uml-return.arrowright::after, uml-message.arrowright::after {
            content: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIAogICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICAgd2lkdGg9IjVweCIgaGVpZ2h0PSI5cHgiCgkgdmlld0JveD0iMCAwIDUgOSI+CjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuNSAwLjUpIj4KPHBhdGggc3Ryb2tlPSJibGFjayIgCiAgICBkPSJNIDAgMCBMIDQgNCBMIDAgOCIgLz4KPC9nPgo8L3N2Zz4K);
            bottom: -9px;
            right: 0px;
            position: absolute;
        }
        uml-return.arrowleft::before, uml-message.arrowleft::before {
            content: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIAogICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICAgd2lkdGg9IjVweCIgaGVpZ2h0PSI5cHgiCgkgdmlld0JveD0iMCAwIDUgOSI+CjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuNSAwLjUpIj4KPHBhdGggc3Ryb2tlPSJibGFjayIgCiAgICBkPSJNIDQgMCBMIDAgNCBMIDQgOCIgLz4KPC9nPgo8L3N2Zz4K);
            bottom: -9px;
            left: 0px;
            position: absolute;
        }
        uml-async.arrowright::after,
        uml-message.asyncstyle.arrowright::after {
            content: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIAogICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICAgd2lkdGg9IjVweCIgaGVpZ2h0PSI5cHgiCgkgdmlld0JveD0iMCAwIDUgOSI+CjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuNSAwLjUpIj4KPHBhdGggc3Ryb2tlPSJibGFjayIgZmlsbD0ibm9uZSIKICAgIGQ9Ik0gMCAwIEwgNCA0IEwgMCA0IiAvPgo8L2c+Cjwvc3ZnPgo=);
            bottom: -9px;
            right: 0px;
            position: absolute;
        }
        uml-async.arrowleft::before,
        uml-message.asyncstyle.arrowleft::before {
            content: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIAogICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgCiAgICAgd2lkdGg9IjVweCIgaGVpZ2h0PSI5cHgiCgkgdmlld0JveD0iMCAwIDUgOSI+CjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuNSAwLjUpIj4KPHBhdGggc3Ryb2tlPSJibGFjayIgZmlsbD0ibm9uZSIKICAgIGQ9Ik0gNCAwIEwgMCA0IEwgNCA0IiAvPgo8L2c+Cjwvc3ZnPgo=);
            bottom: -9px;
            left: 0px;
            position: absolute;
        }
        uml-message ,
        uml-async ,
        uml-return {
			font-family: Courier New;
			font-size: 11px;
            display:block;
            position: relative;
            text-align:center;
        }
        uml-effectivity:hover {
            background-color: rgba(250,250,250,0.75);
        }
        uml-effectivity {
            display:block;
            position:absolute;
            background-color: rgba(255,255,255,0.5);
            border: 1px solid black;
            border-collapse:collapse;
        }
        uml-guard {
			font-family: Courier New;
			font-size: 11px;
            display:inline-block;
            position: absolute;
            border-bottom: 1px solid black;
            border-right: 1px solid black;
            background-color: rgba(255,255,255,0.75);
            z-index:2;
        }
        uml-message, .messagestyle,
        uml-async, .asyncstyle {
            border-bottom: 1px solid gray;
        }
        uml-return, .returnstyle {
            border-bottom: 1px dotted gray;
        }
        uml-block {
            display: block;
            margin-top: 6px;
            padding-bottom: 6px;
        }
        uml-class {
            display:block;
            background-color: lightYellow;
            width:auto;
            position: absolute;
            border: 1px solid black;
        }
        uml-name {
            display:block;
            border-bottom: 1px solid black;
            margin-bottom: 1px;
        }
        uml-attribute,uml-method {
            display:block;
        }
        uml-attribute:first-of-type,uml-method:first-of-type {
            margin-top: 1px;
            border-top: 1px solid black;
        }
        uml-state,uml-activity {
            display:block;
            width:auto;
            position: absolute;
            white-space: pre;
        }
        uml-activity[type="activity"] {
            border: 1px solid black;
            background-color: lightYellow;
            border-radius: 6px;
            padding: 6px;
        }

        .dangerous {
            opacity: 0.25;
        }
        .dangerous:hover {
            opacity: 1;
        }
        .dangerous .confirmdelete {
            display:none;
            position:absolute;
        }
        .dangerous .zipnano {
            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAyMCI+DQo8cGF0aCBkPSJNMTguMTc1LDQuMTQySDEuOTUxQzEuNzAzLDQuMTQyLDEuNSw0LjM0NCwxLjUsNC41OTJ2MTAuODE2YzAsMC4yNDcsMC4yMDMsMC40NSwwLjQ1MSwwLjQ1aDE2LjIyNGMwLjI0NywwLDAuNDUtMC4yMDMsMC40NS0wLjQ1VjQuNTkyQzE4LjYyNSw0LjM0NCwxOC40MjIsNC4xNDIsMTguMTc1LDQuMTQyIE00LjY1NSwxNC45NTdIMi40MDF2LTEuODAzaDIuMjUzVjE0Ljk1N3pNNC42NTUsMTIuMjU0SDIuNDAxdi0xLjgwM2gyLjI1M1YxMi4yNTR6IE00LjY1NSw5LjU0OUgyLjQwMVY3Ljc0N2gyLjI1M1Y5LjU0OXogTTQuNjU1LDYuODQ2SDIuNDAxVjUuMDQzaDIuMjUzVjYuODQ2ek0xNC41NjksMTQuOTU3SDUuNTU2VjUuMDQzaDkuMDEzVjE0Ljk1N3ogTTE3LjcyNCwxNC45NTdoLTIuMjUzdi0xLjgwM2gyLjI1M1YxNC45NTd6IE0xNy43MjQsMTIuMjU0aC0yLjI1M3YtMS44MDNoMi4yNTNWMTIuMjU0ek0xNy43MjQsOS41NDloLTIuMjUzVjcuNzQ3aDIuMjUzVjkuNTQ5eiBNMTcuNzI0LDYuODQ2aC0yLjI1M1Y1LjA0M2gyLjI1M1Y2Ljg0NnoiPjwvcGF0aD4NCjwvc3ZnPg0K);
            color:transparent;
            overflow:hidden;
            width:24px;
            height:24px;
            background-size: cover;
        }
        .dangerous .deleteconfirm {
            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJpY29uLWRlbW8iIGRhdGEtbmFtZT0idHJhc2giIHdpZHRoPSIzMHB4IiBoZWlnaHQ9IjMwcHgiIHZpZXdCb3g9IjAgMCAzMCAzMCI+DQo8cGF0aCBmaWxsPSJkYXJrcmVkIiBkPSJNMTAuODMsMTIuNDk4SDkuMTYydjEwLjAwOWgxLjY2OFYxMi40OTh6IE0yMC44MzksMTIuNDk4aC0xLjY2OHYxMC4wMDloMS42NjhWMTIuNDk4eiBNMjcuNTEyLDQuOTloLTguMzQxDQpWMi40ODhjMC0wLjQ2MS0wLjM3NC0wLjgzNC0wLjgzNC0wLjgzNGgtNi42NzNjLTAuNDYxLDAtMC44MzQsMC4zNzMtMC44MzQsMC44MzRWNC45OUgyLjQ4OGMtMC40NjEsMC0wLjgzNCwwLjM3My0wLjgzNCwwLjgzNA0KYzAsMC40NjEsMC4zNzMsMC44MzQsMC44MzQsMC44MzRoMS42Njh2MjAuMDE5YzAsMC45MjEsMC43NDcsMS42NjgsMS42NjgsMS42NjhoMTguMzUxYzAuOTIxLDAsMS42NjgtMC43NDcsMS42NjgtMS42NjhWNi42NTkNCmgxLjY2OGMwLjQ2MSwwLDAuODM0LTAuMzczLDAuODM0LTAuODM0QzI4LjM0Niw1LjM2MywyNy45NzMsNC45OSwyNy41MTIsNC45OXogTTEyLjQ5OCwzLjMyMmg1LjAwNFY0Ljk5aC01LjAwNFYzLjMyMnoNCk0yNC4xNzYsMjUuODQ0YzAsMC40NjEtMC4zNzQsMC44MzQtMC44MzQsMC44MzRINi42NTljLTAuNDYxLDAtMC44MzQtMC4zNzMtMC44MzQtMC44MzRWNi42NTloMTguMzUxVjI1Ljg0NHogTTE1LjgzNCwxMC44MjkNCmgtMS42Njh2MTEuNjc4aDEuNjY4VjEwLjgyOXoiPjwvcGF0aD4NCjwvc3ZnPg0K);
            color:transparent;
            overflow:hidden;
            width:24px;
            height:24px;
            background-size: cover;
        }
        .dangerous .confirmdelete:hover {
            display:inline-block;
        }
        .dangerous .deleteconfirm:active + .confirmdelete {
            display:inline-block;
        }
        /* }}} */</style>
        <!-- {{{ TEMPLATES -->
        <script type="text/template" id="POJO">
package nano.service;

import java.util.List;
import javax.persistence.*;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@XmlRootElement
public class NAME {
	@Id
	@GeneratedValue(strategy = GenerationType.AUTO)
	public long id;
    ATTRS
}
</script>
        <script type="text/template" id="ATTR">
	@Basic
	protected TYPE name;
	public TYPE getNAME() {
		return name;
	}
	public TYPE setNAME(TYPE name) {
		return this.name = name;
	}
</script>
        <script type="text/template" id="CONTROLLER">
package nano.service;

import java.util.List;

import javax.ejb.EJB;
import javax.ws.rs.*;

@Path("/names")
public class NAMEController {
	@EJB
	DAO dao;

	@POST
	@Path("/create")
	@Consumes("application/json")
	@Produces("application/json")
	public NAME create(NAME name) {
		return dao.create(name);
	}

	@GET
	@Path("/list")
	@Produces("application/json")
	public List[NAME] list() {
		return dao.find(NAME.class, "select o from NAME o", 0,
				1024 * 1024);
	}

	@PUT
	@Path("/update")
	@Produces("application/json")
	@Consumes("application/json")
	public NAME update(NAME name) {
		return dao.update(name);
	}

	@DELETE
	@Path("/delete")
	@Consumes("application/json")
	public void delete(NAME name) {
		dao.delete(NAME.class, name.id);
	}

}
</script>
        <!-- }}} TEMPLATES -->
        <script type="text/javascript">
        function bootrefresh() {
            [].forEach.call(document.querySelectorAll('uml-usecase-diagram,uml-sequence-diagram,uml-class-diagram,uml-activity-diagram'), function(d) {
                if(d.update) d.update();
            });
        }
        </script>
    </head>
    <body onload="Replicant.bootstrap();bootrefresh()" ondrop="Replicant.drop(event)" ondragover="Replicant.dragover(event)"><nav class="replicant"><button class="tool save" onclick="Replicant.download()">Download</button><button class="tool upload" onclick="this.firstChild.click()"><input type="file" onchange="Replicant.addfiles(this.files)" />Upload</button><button class="tool uml" onclick="Replicant.uml(this)">UML</button><uml-palette style="display: block;"><button onclick="this.parentNode.newDiagram('usecase')" class="tool global uml-usecase-diagram" style="display: none;"></button><button onclick="this.parentNode.newDiagram('sequence')" class="tool global uml-sequence-diagram" style="display: none;"></button><button onclick="this.parentNode.newDiagram('class')" class="tool global uml-class-diagram" style="display: none;"></button><button onclick="this.parentNode.newDiagram('activity')" class="tool global uml-activity-diagram" style="display: none;"></button><button onclick="this.parentNode.newUmlActor()" class="tool usecase uml-actor" style="display: none;"></button><button onclick="this.parentNode.newUmlUsecase()" class="tool usecase uml-usecase" style="display: none;"></button><button onclick="this.parentNode.newUmlLifelane()" class="tool sequence uml-lifelane" style="display: none;"></button><button onclick="this.parentNode.newUmlClass()" class="tool class uml-class" style="display: block;"></button><button onclick="this.parentNode.newUmlState()" class="tool activity uml-state" style="display: none;"></button><button onclick="this.parentNode.newUmlActivity()" class="tool activity uml-activity" style="display: none;"></button><button onclick="this.parentNode.newUmlCondition()" class="tool activity uml-condition" style="display: none;"></button></uml-palette></nav>
        <!-- {{{ Nano -->
        <a style="display:none" title="Nano.zip" download="Nano.zip" class="file" href="data:application/zip;base64,UEsDBAoAAAAAAENc9kgAAAAAAAAAAAAAAAAFABwATmFuby9VVAkAA43okVeO6JFXdXgLAAEE6AMAAAToAwAAUEsDBAoAAAAAAOlZ9khDv6ajAgAAAAIAAAAMABwATmFuby9hcHAuZHBkVVQJAAMm5JFXmOWRV3V4CwABBOgDAAAE6AMAAHt9UEsDBAoAAAAAAJla9kgAAAAAAAAAAAAAAAAPABwATmFuby9yZXNvdXJjZXMvVVQJAANy5ZFXc+WRV3V4CwABBOgDAAAE6AMAAFBLAwQKAAAAAABLXPZIAAAAAAAAAAAAAAAAFgAcAE5hbm8vcmVzb3VyY2VzL2ltYWdlcy9VVAkAA53okVe16JFXdXgLAAEE6AMAAAToAwAAUEsDBBQAAAAIAGRa9kjn+tt2jQAAAFsBAAAhABwATmFuby9yZXNvdXJjZXMvaW1hZ2VzL2NvbmZpZy5qc29uVVQJAAML5ZFXEOWRV3V4CwABBOgDAAAE6AMAAK2OMQ7CMAxF5+YUKHMHkBADKyuXSJsPshSS4JgBVb173ZZKQBmRvPg9++t3prLyzLDHjT2lENAKpWhrxZlTBguhqOxMpYckAa+lstHdpreZ1hNbooowxesbPLsGYWUY9wcxvIqLCwUzJf8dm9iDFW5160dkG1dw2LcpCqKsKn3av1f7Fb9U3I0VjU4/AFBLAwQKAAAAAACnWvZIAAAAAAAAAAAAAAAAFQAcAE5hbm8vcmVzb3VyY2VzL3VzZXJzL1VUCQADieWRVxXmkVd1eAsAAQToAwAABOgDAABQSwMEFAAAAAgALVr2SDAgtUF1AAAAvAAAACAAHABOYW5vL3Jlc291cmNlcy91c2Vycy9jb25maWcuanNvblVUCQADpeSRV7HkkVd1eAsAAQToAwAABOgDAABljLEOwjAMROfkK5DnDsysrKx8QEqulSU3SZ0woKr/XqsFCYHk5d473+IdtVcBXU50r9BrFsGjcU7UmSqaC7QxqhUW7xxhCizv4CiFaX89aLezz1xtymn8grfQQ/6MYn6yIpoYglQclOPvbNYINXi2tHq7dQNQSwMECgAAAAAAO1z2SAAAAAAAAAAAAAAAAAwAHABOYW5vL3B1YmxpYy9VVAkAA4LokVeE6JFXdXgLAAEE6AMAAAToAwAAUEsDBBQAAAAIADtc9kiS3bLUtQAAACwBAAAWABwATmFuby9wdWJsaWMvaW5kZXguaHRtbFVUCQADguiRV4LokVd1eAsAAQToAwAABOgDAACNkLEOwjAMRHe+wmQnESsyWYAVGJAQo2kMoWqbkBhE/57SiIWJyZbP984yTte71eG034CXtrET/BYmZycAmKt0iwLSR14q4ZeYmp5UpgpyqpbKi8SFMVVwrOv7g1Ovq9Ca0s4aEs6i21un66wsmuL9F+6i+/GhKcfhObh+xPi5PXIzZDJIgC11YToszUct2lN4QEs9XMNHFc+ABD7xZYBT9udAySm7/rZoyGo08RNUEgbW+JQ3UEsBAh4DCgAAAAAAQ1z2SAAAAAAAAAAAAAAAAAUAGAAAAAAAAAAQAO1BAAAAAE5hbm8vVVQFAAON6JFXdXgLAAEE6AMAAAToAwAAUEsBAh4DCgAAAAAA6Vn2SEO/pqMCAAAAAgAAAAwAGAAAAAAAAQAAAKSBPwAAAE5hbm8vYXBwLmRwZFVUBQADJuSRV3V4CwABBOgDAAAE6AMAAFBLAQIeAwoAAAAAAJla9kgAAAAAAAAAAAAAAAAPABgAAAAAAAAAEADtQYcAAABOYW5vL3Jlc291cmNlcy9VVAUAA3LlkVd1eAsAAQToAwAABOgDAABQSwECHgMKAAAAAABLXPZIAAAAAAAAAAAAAAAAFgAYAAAAAAAAABAA7UHQAAAATmFuby9yZXNvdXJjZXMvaW1hZ2VzL1VUBQADneiRV3V4CwABBOgDAAAE6AMAAFBLAQIeAxQAAAAIAGRa9kjn+tt2jQAAAFsBAAAhABgAAAAAAAEAAACkgSABAABOYW5vL3Jlc291cmNlcy9pbWFnZXMvY29uZmlnLmpzb25VVAUAAwvlkVd1eAsAAQToAwAABOgDAABQSwECHgMKAAAAAACnWvZIAAAAAAAAAAAAAAAAFQAYAAAAAAAAABAA7UEIAgAATmFuby9yZXNvdXJjZXMvdXNlcnMvVVQFAAOJ5ZFXdXgLAAEE6AMAAAToAwAAUEsBAh4DFAAAAAgALVr2SDAgtUF1AAAAvAAAACAAGAAAAAAAAQAAAKSBVwIAAE5hbm8vcmVzb3VyY2VzL3VzZXJzL2NvbmZpZy5qc29uVVQFAAOl5JFXdXgLAAEE6AMAAAToAwAAUEsBAh4DCgAAAAAAO1z2SAAAAAAAAAAAAAAAAAwAGAAAAAAAAAAQAO1BJgMAAE5hbm8vcHVibGljL1VUBQADguiRV3V4CwABBOgDAAAE6AMAAFBLAQIeAxQAAAAIADtc9kiS3bLUtQAAACwBAAAWABgAAAAAAAEAAACkgWwDAABOYW5vL3B1YmxpYy9pbmRleC5odG1sVVQFAAOC6JFXdXgLAAEE6AMAAAToAwAAUEsFBgAAAAAJAAkAJAMAAHEEAAAAAA==">Nano.zip</a>
        <!-- }}} Nano -->

    


<uml-usecase-diagram onclick="if(document.querySelector('uml-palette'))document.querySelector('uml-palette').focusDiagram(this)" style="cursor: auto; min-height: 298px;"><uml-include from="rejoindre-une-partie" to="s-identifier" style="left: 138px; top: 174px; width: 73px; height: 22px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="73" height="22" viewBox="138 174 73 22"><defs><path id="_5" d="M 139.67332119171058 185.7363280349182 L 209.1018042191212 184.9138535679312"/></defs><g><line stroke="black" stroke-width="1" stroke-dasharray="5,5" x1="209.1018042191212" y1="184.9138535679312" x2="139.67332119171058" y2="185.7363280349182"/><path stroke="black" stroke-width="1" stroke-dasharray="5,5" fill="none" d="M155.57743442886294 177.5473609364475 L139.67332119171058 185.7363280349182 L155.76696281277856 193.54623836555766"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_5">include</textPath></text></g></svg></uml-include><uml-include from="creer-une-partie" to="rejoindre-une-partie" style="left: 169px; top: 134px; width: 80px; height: 40px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="80" height="40" viewBox="169 134 80 40"><defs><path id="_4" d="M 170.33785678095433 135.7810298830807 L 246.7970872782501 172.1090402902921"/></defs><g><line stroke="black" stroke-width="1" stroke-dasharray="5,5" x1="170.33785678095433" y1="135.7810298830807" x2="246.7970872782501" y2="172.1090402902921"/><path stroke="black" stroke-width="1" stroke-dasharray="5,5" fill="none" d="M228.9121547155031 172.46846653584547 L246.7970872782501 172.1090402902921 L235.77858674415924 158.01674998742652"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_4">include</textPath></text></g></svg></uml-include><uml-extend from="rejoindre-une-partie" to="lister-les-parties" style="left: 278px; top: 95px; width: 47px; height: 78px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="47" height="78" viewBox="278 95 47 78"><defs><path id="_3" d="M 279.82762215291035 171.09696614343574 L 323.68777069937613 96.19264933162508"/></defs><g><line stroke="black" stroke-width="1" stroke-dasharray="5,5" x1="279.82762215291035" y1="171.09696614343574" x2="323.68777069937613" y2="96.19264933162508"/><path stroke="black" stroke-width="1" stroke-dasharray="5,5" fill="none" d="M322.5065844962045 114.04215350270604 L323.68777069937613 96.19264933162508 L308.6994556406084 105.95740287173635"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_3">extend</textPath></text></g></svg></uml-extend><uml-usage from="user" to="filtrer-par-date-nom-participants" style="left: 65px; top: 43px; width: 118px; height: 38px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="118" height="38" viewBox="65 43 118 38"><g><line stroke="black" stroke-width="1" x1="66.74723907041256" y1="78.87690614129622" x2="181.49278367626172" y2="44.24474883832591"/></g></svg></uml-usage><uml-generalization from="filtrer-par-date-nom-participants" to="lister-les-parties" style="left: 247px; top: 43px; width: 61px; height: 31px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="61" height="31" viewBox="247 43 61 31"><defs><path id="_2" d="M 248.7944674696147 44.83895851790932 L 306.3909291865066 71.5903292279442"/></defs><g><line stroke="black" stroke-width="1" x1="248.7944674696147" y1="44.83895851790932" x2="306.3909291865066" y2="71.5903292279442"/><path stroke="black" stroke-width="1" fill="white" d="M306.3909291865066 71.5903292279442 L288.50982025786993 72.10602631173596 L295.2497061622912 57.594860335309946 Z"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_2"/></text></g></svg></uml-generalization><uml-usage from="user" to="creer-une-partie" style="left: 65px; top: 88px; width: 57px; height: 26px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="57" height="26" viewBox="65 88 57 26"><g><line stroke="black" stroke-width="1" x1="66.12573205559212" y1="89.8266611906288" x2="119.54450764743535" y2="112.82351456638213"/></g></svg></uml-usage><uml-extend from="creer-une-partie" to="lister-les-parties" style="left: 184px; top: 86px; width: 110px; height: 32px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="110" height="32" viewBox="184 86 110 32"><defs><path id="_1" d="M 185.0150122584816 115.51616279131675 L 292.01350321994323 91.85693953117364"/></defs><g><line stroke="black" stroke-width="1" stroke-dasharray="5,5" x1="185.0150122584816" y1="115.51616279131675" x2="292.01350321994323" y2="91.85693953117364"/><path stroke="black" stroke-width="1" stroke-dasharray="5,5" fill="none" d="M278.11808202360186 103.12269604266751 L292.01350321994323 91.85693953117364 L274.66364529294333 87.50005648099686"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_1">extend</textPath></text></g></svg></uml-extend><uml-usage from="user" to="lister-les-parties" style="left: 66px; top: 82px; width: 215px; height: 4px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="215" height="4" viewBox="66 82 215 4"><g><line stroke="black" stroke-width="1" x1="67.42968865308559" y1="83.4809447872714" x2="279.00058570743954" y2="83.22897408041884"/></g></svg></uml-usage><div class="dangerous" style="position:absolute;right:0;bottom:0"><button class="deleteconfirm">Delete</button><button class="confirmdelete" onclick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode)">Confirm</button></div><uml-actor id="user" style="left: 33px; top: 55px;">Joueur</uml-actor><uml-usecase id="lister-les-parties" style="left: 279px; top: 70px;">Lister les parties</uml-usecase><uml-usecase id="creer-une-partie" style="left: 94px; top: 111px;">Crer une partie</uml-usecase><uml-usecase id="filtrer-par-date-nom-participants" style="left: 121px; top: 19px;">Filtrer par date, nom, participants</uml-usecase><uml-usecase id="rejoindre-une-partie" style="left: 209px; top: 171px;">Rejoindre une partie</uml-usecase><uml-usecase id="s-identifier" style="left: 67px; top: 173px;">S'identifier</uml-usecase></uml-usecase-diagram><uml-activity-diagram onclick="if(document.querySelector('uml-palette'))document.querySelector('uml-palette').focusDiagram(this)" style="min-height: 221px;"><uml-then from="sauver-en-localstorage" to="retourner-le-pseudo" style="left: 429px; top: 122px; width: 19px; height: 45px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="19" height="45" viewBox="429 122 19 45"><defs><path id="_14" d="M 438.03345067114094 123 L 438.1107453020134 164"/></defs><g><line stroke="black" stroke-width="1" x1="438.1107453020134" y1="164" x2="438.03345067114094" y2="123"/><path stroke="black" stroke-width="1" fill="none" d="M446.06360015952305 138.98488971479742 L438.03345067114094 123 L430.0636285923323 139.01505341958415"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_14"/></text></g></svg></uml-then><uml-then from="pseudo-connu" to="rentrer-le-pseudo" title="non" style="left: 204px; top: 129px; width: 22px; height: 45px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="22" height="45" viewBox="204 129 22 45"><defs><path id="_13" d="M 215.22678034482757 171 L 215.34607620689656 130"/></defs><g><line stroke="black" stroke-width="1" x1="215.34607620689656" y1="130" x2="215.22678034482757" y2="171"/><path stroke="black" stroke-width="1" fill="none" d="M207.273368494678 154.97679058546944 L215.22678034482757 171 L223.2733007663623 155.02334487116204"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_13">non</textPath></text></g></svg></uml-then><uml-then from="rentrer-le-pseudo" to="sauver-en-localstorage" style="left: 270px; top: 175px; width: 129px; height: 19px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="129" height="19" viewBox="270 175 129 19"><defs><path id="_12" d="M 271.1875 184.37441747086206 L 397.14845 184.0919443516903"/></defs><g><line stroke="black" stroke-width="1" x1="271.1875" y1="184.37441747086206" x2="397.14845" y2="184.0919443516903"/><path stroke="black" stroke-width="1" fill="none" d="M381.1664305481132 192.12780486811988 L397.14845 184.0919443516903 L381.13054991572426 176.1278451000386"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_12"/></text></g></svg></uml-then><uml-then from="pseudo-connu" to="retourner-le-pseudo" title="oui, en localStorage" style="left: 252px; top: 99px; width: 125px; height: 21px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="125" height="21" viewBox="252 99 125 21"><defs><path id="_11" d="M 253.89845 111.56762861251912 L 375.008 110.20751681587785"/></defs><g><line stroke="black" stroke-width="1" x1="253.89845" y1="111.56762861251912" x2="375.008" y2="110.20751681587785"/><path stroke="black" stroke-width="1" fill="none" d="M359.09884662434183 118.38668785393456 L375.008 110.20751681587785 L358.91917114415975 102.38769673818537"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_11">oui, en localStorage</textPath></text></g></svg></uml-then><uml-then from="retourner-le-pseudo" to="_10" style="left: 427px; top: 50px; width: 19px; height: 48px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="19" height="48" viewBox="427 50 19 48"><defs><path id="_9" d="M 436.58367781302127 51.995094346094675 L 437.6736224489796 96"/></defs><g><line stroke="black" stroke-width="1" x1="437.6736224489796" y1="96" x2="436.58367781302127" y2="51.995094346094675"/><path stroke="black" stroke-width="1" fill="none" d="M444.97740279908993 67.79209978567869 L436.58367781302127 51.995094346094675 L428.98230845299526 68.1882775987"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_9"/></text></g></svg></uml-then><uml-then from="le-navigateur-doit-identifier-le-joueur" to="pseudo-connu" style="left: 206px; top: 58px; width: 19px; height: 39px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="19" height="39" viewBox="206 58 19 39"><defs><path id="_8" d="M 215.52359931506848 94 L 215.76694520547946 59"/></defs><g><line stroke="black" stroke-width="1" x1="215.76694520547946" y1="59" x2="215.52359931506848" y2="94"/><path stroke="black" stroke-width="1" fill="none" d="M207.63503381733474 77.94476613723846 L215.52359931506848 94 L223.63464710663746 78.05600728415608"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_8"/></text></g></svg></uml-then><uml-then from="_6" to="le-navigateur-doit-identifier-le-joueur" style="left: 76px; top: 29px; width: 84px; height: 19px;"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:block" width="84" height="19" viewBox="76 29 84 19"><defs><path id="_7" d="M 77.18616337043795 37.206809959642044 L 157.906 38.250251262777226"/></defs><g><line stroke="black" stroke-width="1" x1="77.18616337043795" y1="37.206809959642044" x2="157.906" y2="38.250251262777226"/><path stroke="black" stroke-width="1" fill="none" d="M141.80393164974106 46.04277298835417 L157.906 38.250251262777226 L142.01074160938308 30.044109617916224"/><text fill="black" font-family="Tahoma,Arial,Helvetica,sans-serif" font-size="10" text-anchor="middle"><textPath startOffset="50%" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#_7"/></text></g></svg></uml-then><div class="dangerous" style="position:absolute;right:0;bottom:0"><button class="deleteconfirm">Delete</button><button class="confirmdelete" onclick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode)">Confirm</button></div><uml-state type="start" name="Start" id="_6" style="left: 49px; top: 24px;"></uml-state><uml-activity type="activity" id="le-navigateur-doit-identifier-le-joueur" style="left: 159px; top: 20px;">Le navigateur doit
identifier le joueur</uml-activity><uml-activity type="condition" id="pseudo-connu" style="left: 177px; top: 94px;">pseudo connu</uml-activity><uml-activity type="activity" id="retourner-le-pseudo" style="left: 376px; top: 97px;">Retourner le pseudo</uml-activity><uml-state type="stop" name="Start" id="_10" style="left: 424px; top: 23px;"></uml-state><uml-activity type="activity" id="rentrer-le-pseudo" style="left: 160px; top: 172px;">Rentrer le pseudo</uml-activity><uml-activity type="activity" id="sauver-en-localstorage" style="left: 398px; top: 165px;">Sauver en
localStorage</uml-activity></uml-activity-diagram><uml-class-diagram onclick="if(document.querySelector('uml-palette'))document.querySelector('uml-palette').focusDiagram(this)" style="cursor: auto;"><div class="dangerous" style="position:absolute;right:0;bottom:0"><button class="zipnano" onclick="this.parentNode.parentNode.zip()">Zip</button><button class="deleteconfirm">Delete</button><button class="confirmdelete" onclick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode)">Confirm</button></div><uml-class><uml-name>Game</uml-name><uml-attribute>name:String</uml-attribute><uml-attribute>creation:Date</uml-attribute></uml-class></uml-class-diagram></body></html>